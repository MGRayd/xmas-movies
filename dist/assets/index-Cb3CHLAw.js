function p_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function m_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g_={exports:{}},bc={},y_={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),FT=Symbol.for("react.portal"),zT=Symbol.for("react.fragment"),BT=Symbol.for("react.strict_mode"),$T=Symbol.for("react.profiler"),HT=Symbol.for("react.provider"),WT=Symbol.for("react.context"),qT=Symbol.for("react.forward_ref"),QT=Symbol.for("react.suspense"),KT=Symbol.for("react.memo"),GT=Symbol.for("react.lazy"),_g=Symbol.iterator;function YT(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var v_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},__=Object.assign,w_={};function No(t,e,n){this.props=t,this.context=e,this.refs=w_,this.updater=n||v_}No.prototype.isReactComponent={};No.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};No.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function E_(){}E_.prototype=No.prototype;function Mf(t,e,n){this.props=t,this.context=e,this.refs=w_,this.updater=n||v_}var Vf=Mf.prototype=new E_;Vf.constructor=Mf;__(Vf,No.prototype);Vf.isPureReactComponent=!0;var wg=Array.isArray,x_=Object.prototype.hasOwnProperty,Uf={current:null},T_={key:!0,ref:!0,__self:!0,__source:!0};function I_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)x_.call(e,r)&&!T_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:cl,type:t,key:s,ref:o,props:i,_owner:Uf.current}}function XT(t,e){return{$$typeof:cl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ff(t){return typeof t=="object"&&t!==null&&t.$$typeof===cl}function JT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Eg=/\/+/g;function Td(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JT(""+t.key):e.toString(36)}function vu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cl:case FT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Td(o,0):r,wg(i)?(n="",t!=null&&(n=t.replace(Eg,"$&/")+"/"),vu(i,e,n,"",function(c){return c})):i!=null&&(Ff(i)&&(i=XT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Eg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wg(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Td(s,l);o+=vu(s,e,n,u,i)}else if(u=YT(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Td(s,l++),o+=vu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ql(t,e,n){if(t==null)return t;var r=[],i=0;return vu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ZT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},_u={transition:null},eI={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:_u,ReactCurrentOwner:Uf};function S_(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:ql,forEach:function(t,e,n){ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ql(t,function(){e++}),e},toArray:function(t){return ql(t,function(e){return e})||[]},only:function(t){if(!Ff(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=No;xe.Fragment=zT;xe.Profiler=$T;xe.PureComponent=Mf;xe.StrictMode=BT;xe.Suspense=QT;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eI;xe.act=S_;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=__({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Uf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)x_.call(e,u)&&!T_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:cl,type:t.type,key:i,ref:s,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:WT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HT,_context:t},t.Consumer=t};xe.createElement=I_;xe.createFactory=function(t){var e=I_.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:qT,render:t}};xe.isValidElement=Ff;xe.lazy=function(t){return{$$typeof:GT,_payload:{_status:-1,_result:t},_init:ZT}};xe.memo=function(t,e){return{$$typeof:KT,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=_u.transition;_u.transition={};try{t()}finally{_u.transition=e}};xe.unstable_act=S_;xe.useCallback=function(t,e){return on.current.useCallback(t,e)};xe.useContext=function(t){return on.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return on.current.useDeferredValue(t)};xe.useEffect=function(t,e){return on.current.useEffect(t,e)};xe.useId=function(){return on.current.useId()};xe.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return on.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};xe.useRef=function(t){return on.current.useRef(t)};xe.useState=function(t){return on.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return on.current.useTransition()};xe.version="18.3.1";y_.exports=xe;var k=y_.exports;const R_=m_(k),tI=p_({__proto__:null,default:R_},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nI=k,rI=Symbol.for("react.element"),iI=Symbol.for("react.fragment"),sI=Object.prototype.hasOwnProperty,oI=nI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aI={key:!0,ref:!0,__self:!0,__source:!0};function A_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sI.call(e,r)&&!aI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:rI,type:t,key:s,ref:o,props:i,_owner:oI.current}}bc.Fragment=iI;bc.jsx=A_;bc.jsxs=A_;g_.exports=bc;var d=g_.exports,fh={},N_={exports:{}},Nn={},C_={exports:{}},P_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,ie){var se=B.length;B.push(ie);e:for(;0<se;){var Ee=se-1>>>1,ae=B[Ee];if(0<i(ae,ie))B[Ee]=ie,B[se]=ae,se=Ee;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var ie=B[0],se=B.pop();if(se!==ie){B[0]=se;e:for(var Ee=0,ae=B.length,Te=ae>>>1;Ee<Te;){var lt=2*(Ee+1)-1,He=B[lt],We=lt+1,Xe=B[We];if(0>i(He,se))We<ae&&0>i(Xe,He)?(B[Ee]=Xe,B[We]=se,Ee=We):(B[Ee]=He,B[lt]=se,Ee=lt);else if(We<ae&&0>i(Xe,se))B[Ee]=Xe,B[We]=se,Ee=We;else break e}}return ie}function i(B,ie){var se=B.sortIndex-ie.sortIndex;return se!==0?se:B.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,p=null,g=3,E=!1,S=!1,N=!1,D=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(B){for(var ie=n(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=B)r(c),ie.sortIndex=ie.expirationTime,e(u,ie);else break;ie=n(c)}}function j(B){if(N=!1,R(B),!S)if(n(u)!==null)S=!0,re(U);else{var ie=n(c);ie!==null&&Re(j,ie.startTime-B)}}function U(B,ie){S=!1,N&&(N=!1,I(v),v=-1),E=!0;var se=g;try{for(R(ie),p=n(u);p!==null&&(!(p.expirationTime>ie)||B&&!C());){var Ee=p.callback;if(typeof Ee=="function"){p.callback=null,g=p.priorityLevel;var ae=Ee(p.expirationTime<=ie);ie=t.unstable_now(),typeof ae=="function"?p.callback=ae:p===n(u)&&r(u),R(ie)}else r(u);p=n(u)}if(p!==null)var Te=!0;else{var lt=n(c);lt!==null&&Re(j,lt.startTime-ie),Te=!1}return Te}finally{p=null,g=se,E=!1}}var F=!1,y=null,v=-1,T=5,x=-1;function C(){return!(t.unstable_now()-x<T)}function b(){if(y!==null){var B=t.unstable_now();x=B;var ie=!0;try{ie=y(!0,B)}finally{ie?A():(F=!1,y=null)}}else F=!1}var A;if(typeof w=="function")A=function(){w(b)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Ke=Ce.port2;Ce.port1.onmessage=b,A=function(){Ke.postMessage(null)}}else A=function(){D(b,0)};function re(B){y=B,F||(F=!0,A())}function Re(B,ie){v=D(function(){B(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){S||E||(S=!0,re(U))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var se=g;g=ie;try{return B()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,ie){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var se=g;g=B;try{return ie()}finally{g=se}},t.unstable_scheduleCallback=function(B,ie,se){var Ee=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ee+se:Ee):se=Ee,B){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=se+ae,B={id:f++,callback:ie,priorityLevel:B,startTime:se,expirationTime:ae,sortIndex:-1},se>Ee?(B.sortIndex=se,e(c,B),n(u)===null&&B===n(c)&&(N?(I(v),v=-1):N=!0,Re(j,se-Ee))):(B.sortIndex=ae,e(u,B),S||E||(S=!0,re(U))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var ie=g;return function(){var se=g;g=ie;try{return B.apply(this,arguments)}finally{g=se}}}})(P_);C_.exports=P_;var lI=C_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uI=k,An=lI;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b_=new Set,Oa={};function Is(t,e){co(t,e),co(t+"Capture",e)}function co(t,e){for(Oa[t]=e,t=0;t<e.length;t++)b_.add(e[t])}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=Object.prototype.hasOwnProperty,cI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xg={},Tg={};function dI(t){return ph.call(Tg,t)?!0:ph.call(xg,t)?!1:cI.test(t)?Tg[t]=!0:(xg[t]=!0,!1)}function hI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fI(t,e,n,r){if(e===null||typeof e>"u"||hI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new an(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new an(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new an(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new an(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new an(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new an(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new an(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new an(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new an(t,5,!1,t.toLowerCase(),null,!1,!1)});var zf=/[\-:]([a-z])/g;function Bf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zf,Bf);Bt[e]=new an(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zf,Bf);Bt[e]=new an(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zf,Bf);Bt[e]=new an(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new an(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new an(t,1,!1,t.toLowerCase(),null,!0,!0)});function $f(t,e,n,r){var i=Bt.hasOwnProperty(e)?Bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fI(e,n,i,r)&&(n=null),r||i===null?dI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yr=uI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),Hf=Symbol.for("react.strict_mode"),mh=Symbol.for("react.profiler"),k_=Symbol.for("react.provider"),D_=Symbol.for("react.context"),Wf=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),yh=Symbol.for("react.suspense_list"),qf=Symbol.for("react.memo"),li=Symbol.for("react.lazy"),j_=Symbol.for("react.offscreen"),Ig=Symbol.iterator;function Xo(t){return t===null||typeof t!="object"?null:(t=Ig&&t[Ig]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,Id;function da(t){if(Id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Id=e&&e[1]||""}return`
`+Id+t}var Sd=!1;function Rd(t,e){if(!t||Sd)return"";Sd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Sd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?da(t):""}function pI(t){switch(t.tag){case 5:return da(t.type);case 16:return da("Lazy");case 13:return da("Suspense");case 19:return da("SuspenseList");case 0:case 2:case 15:return t=Rd(t.type,!1),t;case 11:return t=Rd(t.type.render,!1),t;case 1:return t=Rd(t.type,!0),t;default:return""}}function vh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case Bs:return"Portal";case mh:return"Profiler";case Hf:return"StrictMode";case gh:return"Suspense";case yh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D_:return(t.displayName||"Context")+".Consumer";case k_:return(t._context.displayName||"Context")+".Provider";case Wf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qf:return e=t.displayName||null,e!==null?e:vh(t.type)||"Memo";case li:e=t._payload,t=t._init;try{return vh(t(e))}catch{}}return null}function mI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vh(e);case 8:return e===Hf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function O_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gI(t){var e=O_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kl(t){t._valueTracker||(t._valueTracker=gI(t))}function L_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=O_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _h(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function M_(t,e){e=e.checked,e!=null&&$f(t,"checked",e,!1)}function wh(t,e){M_(t,e);var n=bi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Eh(t,e.type,bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Eh(t,e,n){(e!=="number"||zu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ha=Array.isArray;function eo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ag(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(ha(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bi(n)}}function V_(t,e){var n=bi(e.value),r=bi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ng(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function U_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Th(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?U_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,F_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function La(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yI=["Webkit","ms","Moz","O"];Object.keys(wa).forEach(function(t){yI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wa[e]=wa[t]})});function z_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wa.hasOwnProperty(t)&&wa[t]?(""+e).trim():e+"px"}function B_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=z_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var vI=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ih(t,e){if(e){if(vI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Sh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=null;function Qf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ah=null,to=null,no=null;function Cg(t){if(t=fl(t)){if(typeof Ah!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Lc(e),Ah(t.stateNode,t.type,e))}}function $_(t){to?no?no.push(t):no=[t]:to=t}function H_(){if(to){var t=to,e=no;if(no=to=null,Cg(t),e)for(t=0;t<e.length;t++)Cg(e[t])}}function W_(t,e){return t(e)}function q_(){}var Ad=!1;function Q_(t,e,n){if(Ad)return t(e,n);Ad=!0;try{return W_(t,e,n)}finally{Ad=!1,(to!==null||no!==null)&&(q_(),H_())}}function Ma(t,e){var n=t.stateNode;if(n===null)return null;var r=Lc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Nh=!1;if(Ur)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){Nh=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{Nh=!1}function _I(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var Ea=!1,Bu=null,$u=!1,Ch=null,wI={onError:function(t){Ea=!0,Bu=t}};function EI(t,e,n,r,i,s,o,l,u){Ea=!1,Bu=null,_I.apply(wI,arguments)}function xI(t,e,n,r,i,s,o,l,u){if(EI.apply(this,arguments),Ea){if(Ea){var c=Bu;Ea=!1,Bu=null}else throw Error(W(198));$u||($u=!0,Ch=c)}}function Ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function K_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pg(t){if(Ss(t)!==t)throw Error(W(188))}function TI(t){var e=t.alternate;if(!e){if(e=Ss(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Pg(i),t;if(s===r)return Pg(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function G_(t){return t=TI(t),t!==null?Y_(t):null}function Y_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Y_(t);if(e!==null)return e;t=t.sibling}return null}var X_=An.unstable_scheduleCallback,bg=An.unstable_cancelCallback,II=An.unstable_shouldYield,SI=An.unstable_requestPaint,Tt=An.unstable_now,RI=An.unstable_getCurrentPriorityLevel,Kf=An.unstable_ImmediatePriority,J_=An.unstable_UserBlockingPriority,Hu=An.unstable_NormalPriority,AI=An.unstable_LowPriority,Z_=An.unstable_IdlePriority,kc=null,cr=null;function NI(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(kc,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:bI,CI=Math.log,PI=Math.LN2;function bI(t){return t>>>=0,t===0?32:31-(CI(t)/PI|0)|0}var Yl=64,Xl=4194304;function fa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=fa(l):(s&=o,s!==0&&(r=fa(s)))}else o=n&~i,o!==0?r=fa(o):s!==0&&(r=fa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),i=1<<n,r|=t[n],e&=~i;return r}function kI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Gn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=kI(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Ph(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ew(){var t=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),t}function Nd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function jI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Gf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Be=0;function tw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nw,Yf,rw,iw,sw,bh=!1,Jl=[],wi=null,Ei=null,xi=null,Va=new Map,Ua=new Map,ci=[],OI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kg(t,e){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Ei=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":Va.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(e.pointerId)}}function Zo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fl(e),e!==null&&Yf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function LI(t,e,n,r,i){switch(e){case"focusin":return wi=Zo(wi,t,e,n,r,i),!0;case"dragenter":return Ei=Zo(Ei,t,e,n,r,i),!0;case"mouseover":return xi=Zo(xi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Va.set(s,Zo(Va.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ua.set(s,Zo(Ua.get(s)||null,t,e,n,r,i)),!0}return!1}function ow(t){var e=ns(t.target);if(e!==null){var n=Ss(e);if(n!==null){if(e=n.tag,e===13){if(e=K_(n),e!==null){t.blockedOn=e,sw(t.priority,function(){rw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rh=r,n.target.dispatchEvent(r),Rh=null}else return e=fl(n),e!==null&&Yf(e),t.blockedOn=n,!1;e.shift()}return!0}function Dg(t,e,n){wu(t)&&n.delete(e)}function MI(){bh=!1,wi!==null&&wu(wi)&&(wi=null),Ei!==null&&wu(Ei)&&(Ei=null),xi!==null&&wu(xi)&&(xi=null),Va.forEach(Dg),Ua.forEach(Dg)}function ea(t,e){t.blockedOn===e&&(t.blockedOn=null,bh||(bh=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,MI)))}function Fa(t){function e(i){return ea(i,t)}if(0<Jl.length){ea(Jl[0],t);for(var n=1;n<Jl.length;n++){var r=Jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wi!==null&&ea(wi,t),Ei!==null&&ea(Ei,t),xi!==null&&ea(xi,t),Va.forEach(e),Ua.forEach(e),n=0;n<ci.length;n++)r=ci[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ci.length&&(n=ci[0],n.blockedOn===null);)ow(n),n.blockedOn===null&&ci.shift()}var ro=Yr.ReactCurrentBatchConfig,qu=!0;function VI(t,e,n,r){var i=Be,s=ro.transition;ro.transition=null;try{Be=1,Xf(t,e,n,r)}finally{Be=i,ro.transition=s}}function UI(t,e,n,r){var i=Be,s=ro.transition;ro.transition=null;try{Be=4,Xf(t,e,n,r)}finally{Be=i,ro.transition=s}}function Xf(t,e,n,r){if(qu){var i=kh(t,e,n,r);if(i===null)Vd(t,e,r,Qu,n),kg(t,r);else if(LI(i,t,e,n,r))r.stopPropagation();else if(kg(t,r),e&4&&-1<OI.indexOf(t)){for(;i!==null;){var s=fl(i);if(s!==null&&nw(s),s=kh(t,e,n,r),s===null&&Vd(t,e,r,Qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Vd(t,e,r,null,n)}}var Qu=null;function kh(t,e,n,r){if(Qu=null,t=Qf(r),t=ns(t),t!==null)if(e=Ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=K_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qu=t,null}function aw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RI()){case Kf:return 1;case J_:return 4;case Hu:case AI:return 16;case Z_:return 536870912;default:return 16}default:return 16}}var gi=null,Jf=null,Eu=null;function lw(){if(Eu)return Eu;var t,e=Jf,n=e.length,r,i="value"in gi?gi.value:gi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Eu=i.slice(t,1<r?1-r:void 0)}function xu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zl(){return!0}function jg(){return!1}function Cn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zl:jg,this.isPropagationStopped=jg,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),e}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zf=Cn(Co),hl=ht({},Co,{view:0,detail:0}),FI=Cn(hl),Cd,Pd,ta,Dc=ht({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ep,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ta&&(ta&&t.type==="mousemove"?(Cd=t.screenX-ta.screenX,Pd=t.screenY-ta.screenY):Pd=Cd=0,ta=t),Cd)},movementY:function(t){return"movementY"in t?t.movementY:Pd}}),Og=Cn(Dc),zI=ht({},Dc,{dataTransfer:0}),BI=Cn(zI),$I=ht({},hl,{relatedTarget:0}),bd=Cn($I),HI=ht({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),WI=Cn(HI),qI=ht({},Co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QI=Cn(qI),KI=ht({},Co,{data:0}),Lg=Cn(KI),GI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XI[t])?!!e[t]:!1}function ep(){return JI}var ZI=ht({},hl,{key:function(t){if(t.key){var e=GI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ep,charCode:function(t){return t.type==="keypress"?xu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eS=Cn(ZI),tS=ht({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mg=Cn(tS),nS=ht({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ep}),rS=Cn(nS),iS=ht({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),sS=Cn(iS),oS=ht({},Dc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aS=Cn(oS),lS=[9,13,27,32],tp=Ur&&"CompositionEvent"in window,xa=null;Ur&&"documentMode"in document&&(xa=document.documentMode);var uS=Ur&&"TextEvent"in window&&!xa,uw=Ur&&(!tp||xa&&8<xa&&11>=xa),Vg=" ",Ug=!1;function cw(t,e){switch(t){case"keyup":return lS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hs=!1;function cS(t,e){switch(t){case"compositionend":return dw(e);case"keypress":return e.which!==32?null:(Ug=!0,Vg);case"textInput":return t=e.data,t===Vg&&Ug?null:t;default:return null}}function dS(t,e){if(Hs)return t==="compositionend"||!tp&&cw(t,e)?(t=lw(),Eu=Jf=gi=null,Hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uw&&e.locale!=="ko"?null:e.data;default:return null}}var hS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hS[t.type]:e==="textarea"}function hw(t,e,n,r){$_(r),e=Ku(e,"onChange"),0<e.length&&(n=new Zf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ta=null,za=null;function fS(t){Tw(t,0)}function jc(t){var e=Qs(t);if(L_(e))return t}function pS(t,e){if(t==="change")return e}var fw=!1;if(Ur){var kd;if(Ur){var Dd="oninput"in document;if(!Dd){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),Dd=typeof zg.oninput=="function"}kd=Dd}else kd=!1;fw=kd&&(!document.documentMode||9<document.documentMode)}function Bg(){Ta&&(Ta.detachEvent("onpropertychange",pw),za=Ta=null)}function pw(t){if(t.propertyName==="value"&&jc(za)){var e=[];hw(e,za,t,Qf(t)),Q_(fS,e)}}function mS(t,e,n){t==="focusin"?(Bg(),Ta=e,za=n,Ta.attachEvent("onpropertychange",pw)):t==="focusout"&&Bg()}function gS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jc(za)}function yS(t,e){if(t==="click")return jc(e)}function vS(t,e){if(t==="input"||t==="change")return jc(e)}function _S(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zn=typeof Object.is=="function"?Object.is:_S;function Ba(t,e){if(Zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ph.call(e,i)||!Zn(t[i],e[i]))return!1}return!0}function $g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hg(t,e){var n=$g(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$g(n)}}function mw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gw(){for(var t=window,e=zu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zu(t.document)}return e}function np(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wS(t){var e=gw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mw(n.ownerDocument.documentElement,n)){if(r!==null&&np(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Hg(n,s);var o=Hg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ES=Ur&&"documentMode"in document&&11>=document.documentMode,Ws=null,Dh=null,Ia=null,jh=!1;function Wg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jh||Ws==null||Ws!==zu(r)||(r=Ws,"selectionStart"in r&&np(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ia&&Ba(Ia,r)||(Ia=r,r=Ku(Dh,"onSelect"),0<r.length&&(e=new Zf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ws)))}function eu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qs={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},jd={},yw={};Ur&&(yw=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Oc(t){if(jd[t])return jd[t];if(!qs[t])return t;var e=qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yw)return jd[t]=e[n];return t}var vw=Oc("animationend"),_w=Oc("animationiteration"),ww=Oc("animationstart"),Ew=Oc("transitionend"),xw=new Map,qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){xw.set(t,e),Is(e,[t])}for(var Od=0;Od<qg.length;Od++){var Ld=qg[Od],xS=Ld.toLowerCase(),TS=Ld[0].toUpperCase()+Ld.slice(1);Mi(xS,"on"+TS)}Mi(vw,"onAnimationEnd");Mi(_w,"onAnimationIteration");Mi(ww,"onAnimationStart");Mi("dblclick","onDoubleClick");Mi("focusin","onFocus");Mi("focusout","onBlur");Mi(Ew,"onTransitionEnd");co("onMouseEnter",["mouseout","mouseover"]);co("onMouseLeave",["mouseout","mouseover"]);co("onPointerEnter",["pointerout","pointerover"]);co("onPointerLeave",["pointerout","pointerover"]);Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Is("onBeforeInput",["compositionend","keypress","textInput","paste"]);Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IS=new Set("cancel close invalid load scroll toggle".split(" ").concat(pa));function Qg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xI(r,e,void 0,t),t.currentTarget=null}function Tw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Qg(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Qg(i,l,c),s=u}}}if($u)throw t=Ch,$u=!1,Ch=null,t}function tt(t,e){var n=e[Uh];n===void 0&&(n=e[Uh]=new Set);var r=t+"__bubble";n.has(r)||(Iw(e,t,2,!1),n.add(r))}function Md(t,e,n){var r=0;e&&(r|=4),Iw(n,t,r,e)}var tu="_reactListening"+Math.random().toString(36).slice(2);function $a(t){if(!t[tu]){t[tu]=!0,b_.forEach(function(n){n!=="selectionchange"&&(IS.has(n)||Md(n,!1,t),Md(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tu]||(e[tu]=!0,Md("selectionchange",!1,e))}}function Iw(t,e,n,r){switch(aw(e)){case 1:var i=VI;break;case 4:i=UI;break;default:i=Xf}n=i.bind(null,e,n,t),i=void 0,!Nh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Vd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=ns(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Q_(function(){var c=s,f=Qf(n),p=[];e:{var g=xw.get(t);if(g!==void 0){var E=Zf,S=t;switch(t){case"keypress":if(xu(n)===0)break e;case"keydown":case"keyup":E=eS;break;case"focusin":S="focus",E=bd;break;case"focusout":S="blur",E=bd;break;case"beforeblur":case"afterblur":E=bd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Og;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=BI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=rS;break;case vw:case _w:case ww:E=WI;break;case Ew:E=sS;break;case"scroll":E=FI;break;case"wheel":E=aS;break;case"copy":case"cut":case"paste":E=QI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Mg}var N=(e&4)!==0,D=!N&&t==="scroll",I=N?g!==null?g+"Capture":null:g;N=[];for(var w=c,R;w!==null;){R=w;var j=R.stateNode;if(R.tag===5&&j!==null&&(R=j,I!==null&&(j=Ma(w,I),j!=null&&N.push(Ha(w,j,R)))),D)break;w=w.return}0<N.length&&(g=new E(g,S,null,n,f),p.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==Rh&&(S=n.relatedTarget||n.fromElement)&&(ns(S)||S[Fr]))break e;if((E||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,E?(S=n.relatedTarget||n.toElement,E=c,S=S?ns(S):null,S!==null&&(D=Ss(S),S!==D||S.tag!==5&&S.tag!==6)&&(S=null)):(E=null,S=c),E!==S)){if(N=Og,j="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=Mg,j="onPointerLeave",I="onPointerEnter",w="pointer"),D=E==null?g:Qs(E),R=S==null?g:Qs(S),g=new N(j,w+"leave",E,n,f),g.target=D,g.relatedTarget=R,j=null,ns(f)===c&&(N=new N(I,w+"enter",S,n,f),N.target=R,N.relatedTarget=D,j=N),D=j,E&&S)t:{for(N=E,I=S,w=0,R=N;R;R=Ms(R))w++;for(R=0,j=I;j;j=Ms(j))R++;for(;0<w-R;)N=Ms(N),w--;for(;0<R-w;)I=Ms(I),R--;for(;w--;){if(N===I||I!==null&&N===I.alternate)break t;N=Ms(N),I=Ms(I)}N=null}else N=null;E!==null&&Kg(p,g,E,N,!1),S!==null&&D!==null&&Kg(p,D,S,N,!0)}}e:{if(g=c?Qs(c):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var U=pS;else if(Fg(g))if(fw)U=vS;else{U=gS;var F=mS}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=yS);if(U&&(U=U(t,c))){hw(p,U,n,f);break e}F&&F(t,g,c),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&Eh(g,"number",g.value)}switch(F=c?Qs(c):window,t){case"focusin":(Fg(F)||F.contentEditable==="true")&&(Ws=F,Dh=c,Ia=null);break;case"focusout":Ia=Dh=Ws=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,Wg(p,n,f);break;case"selectionchange":if(ES)break;case"keydown":case"keyup":Wg(p,n,f)}var y;if(tp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hs?cw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(uw&&n.locale!=="ko"&&(Hs||v!=="onCompositionStart"?v==="onCompositionEnd"&&Hs&&(y=lw()):(gi=f,Jf="value"in gi?gi.value:gi.textContent,Hs=!0)),F=Ku(c,v),0<F.length&&(v=new Lg(v,t,null,n,f),p.push({event:v,listeners:F}),y?v.data=y:(y=dw(n),y!==null&&(v.data=y)))),(y=uS?cS(t,n):dS(t,n))&&(c=Ku(c,"onBeforeInput"),0<c.length&&(f=new Lg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:c}),f.data=y))}Tw(p,e)})}function Ha(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ku(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ma(t,n),s!=null&&r.unshift(Ha(t,s,i)),s=Ma(t,e),s!=null&&r.push(Ha(t,s,i))),t=t.return}return r}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Ma(n,s),u!=null&&o.unshift(Ha(n,u,l))):i||(u=Ma(n,s),u!=null&&o.push(Ha(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var SS=/\r\n?/g,RS=/\u0000|\uFFFD/g;function Gg(t){return(typeof t=="string"?t:""+t).replace(SS,`
`).replace(RS,"")}function nu(t,e,n){if(e=Gg(e),Gg(t)!==e&&n)throw Error(W(425))}function Gu(){}var Oh=null,Lh=null;function Mh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vh=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,Yg=typeof Promise=="function"?Promise:void 0,NS=typeof queueMicrotask=="function"?queueMicrotask:typeof Yg<"u"?function(t){return Yg.resolve(null).then(t).catch(CS)}:Vh;function CS(t){setTimeout(function(){throw t})}function Ud(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fa(e)}function Ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Po=Math.random().toString(36).slice(2),lr="__reactFiber$"+Po,Wa="__reactProps$"+Po,Fr="__reactContainer$"+Po,Uh="__reactEvents$"+Po,PS="__reactListeners$"+Po,bS="__reactHandles$"+Po;function ns(t){var e=t[lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xg(t);t!==null;){if(n=t[lr])return n;t=Xg(t)}return e}t=n,n=t.parentNode}return null}function fl(t){return t=t[lr]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Lc(t){return t[Wa]||null}var Fh=[],Ks=-1;function Vi(t){return{current:t}}function it(t){0>Ks||(t.current=Fh[Ks],Fh[Ks]=null,Ks--)}function Ye(t,e){Ks++,Fh[Ks]=t.current,t.current=e}var ki={},Jt=Vi(ki),hn=Vi(!1),fs=ki;function ho(t,e){var n=t.type.contextTypes;if(!n)return ki;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function fn(t){return t=t.childContextTypes,t!=null}function Yu(){it(hn),it(Jt)}function Jg(t,e,n){if(Jt.current!==ki)throw Error(W(168));Ye(Jt,e),Ye(hn,n)}function Sw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,mI(t)||"Unknown",i));return ht({},n,r)}function Xu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ki,fs=Jt.current,Ye(Jt,t),Ye(hn,hn.current),!0}function Zg(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=Sw(t,e,fs),r.__reactInternalMemoizedMergedChildContext=t,it(hn),it(Jt),Ye(Jt,t)):it(hn),Ye(hn,n)}var Sr=null,Mc=!1,Fd=!1;function Rw(t){Sr===null?Sr=[t]:Sr.push(t)}function kS(t){Mc=!0,Rw(t)}function Ui(){if(!Fd&&Sr!==null){Fd=!0;var t=0,e=Be;try{var n=Sr;for(Be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sr=null,Mc=!1}catch(i){throw Sr!==null&&(Sr=Sr.slice(t+1)),X_(Kf,Ui),i}finally{Be=e,Fd=!1}}return null}var Gs=[],Ys=0,Ju=null,Zu=0,kn=[],Dn=0,ps=null,Ar=1,Nr="";function Xi(t,e){Gs[Ys++]=Zu,Gs[Ys++]=Ju,Ju=t,Zu=e}function Aw(t,e,n){kn[Dn++]=Ar,kn[Dn++]=Nr,kn[Dn++]=ps,ps=t;var r=Ar;t=Nr;var i=32-Gn(r)-1;r&=~(1<<i),n+=1;var s=32-Gn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ar=1<<32-Gn(e)+i|n<<i|r,Nr=s+t}else Ar=1<<s|n<<i|r,Nr=t}function rp(t){t.return!==null&&(Xi(t,1),Aw(t,1,0))}function ip(t){for(;t===Ju;)Ju=Gs[--Ys],Gs[Ys]=null,Zu=Gs[--Ys],Gs[Ys]=null;for(;t===ps;)ps=kn[--Dn],kn[Dn]=null,Nr=kn[--Dn],kn[Dn]=null,Ar=kn[--Dn],kn[Dn]=null}var Rn=null,Tn=null,at=!1,Kn=null;function Nw(t,e){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ey(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rn=t,Tn=Ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rn=t,Tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ps!==null?{id:Ar,overflow:Nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rn=t,Tn=null,!0):!1;default:return!1}}function zh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bh(t){if(at){var e=Tn;if(e){var n=e;if(!ey(t,e)){if(zh(t))throw Error(W(418));e=Ti(n.nextSibling);var r=Rn;e&&ey(t,e)?Nw(r,n):(t.flags=t.flags&-4097|2,at=!1,Rn=t)}}else{if(zh(t))throw Error(W(418));t.flags=t.flags&-4097|2,at=!1,Rn=t}}}function ty(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rn=t}function ru(t){if(t!==Rn)return!1;if(!at)return ty(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mh(t.type,t.memoizedProps)),e&&(e=Tn)){if(zh(t))throw Cw(),Error(W(418));for(;e;)Nw(t,e),e=Ti(e.nextSibling)}if(ty(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tn=Ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tn=null}}else Tn=Rn?Ti(t.stateNode.nextSibling):null;return!0}function Cw(){for(var t=Tn;t;)t=Ti(t.nextSibling)}function fo(){Tn=Rn=null,at=!1}function sp(t){Kn===null?Kn=[t]:Kn.push(t)}var DS=Yr.ReactCurrentBatchConfig;function na(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function iu(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ny(t){var e=t._init;return e(t._payload)}function Pw(t){function e(I,w){if(t){var R=I.deletions;R===null?(I.deletions=[w],I.flags|=16):R.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function i(I,w){return I=Ai(I,w),I.index=0,I.sibling=null,I}function s(I,w,R){return I.index=R,t?(R=I.alternate,R!==null?(R=R.index,R<w?(I.flags|=2,w):R):(I.flags|=2,w)):(I.flags|=1048576,w)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,w,R,j){return w===null||w.tag!==6?(w=Qd(R,I.mode,j),w.return=I,w):(w=i(w,R),w.return=I,w)}function u(I,w,R,j){var U=R.type;return U===$s?f(I,w,R.props.children,j,R.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===li&&ny(U)===w.type)?(j=i(w,R.props),j.ref=na(I,w,R),j.return=I,j):(j=Cu(R.type,R.key,R.props,null,I.mode,j),j.ref=na(I,w,R),j.return=I,j)}function c(I,w,R,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==R.containerInfo||w.stateNode.implementation!==R.implementation?(w=Kd(R,I.mode,j),w.return=I,w):(w=i(w,R.children||[]),w.return=I,w)}function f(I,w,R,j,U){return w===null||w.tag!==7?(w=us(R,I.mode,j,U),w.return=I,w):(w=i(w,R),w.return=I,w)}function p(I,w,R){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Qd(""+w,I.mode,R),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ql:return R=Cu(w.type,w.key,w.props,null,I.mode,R),R.ref=na(I,null,w),R.return=I,R;case Bs:return w=Kd(w,I.mode,R),w.return=I,w;case li:var j=w._init;return p(I,j(w._payload),R)}if(ha(w)||Xo(w))return w=us(w,I.mode,R,null),w.return=I,w;iu(I,w)}return null}function g(I,w,R,j){var U=w!==null?w.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return U!==null?null:l(I,w,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ql:return R.key===U?u(I,w,R,j):null;case Bs:return R.key===U?c(I,w,R,j):null;case li:return U=R._init,g(I,w,U(R._payload),j)}if(ha(R)||Xo(R))return U!==null?null:f(I,w,R,j,null);iu(I,R)}return null}function E(I,w,R,j,U){if(typeof j=="string"&&j!==""||typeof j=="number")return I=I.get(R)||null,l(w,I,""+j,U);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ql:return I=I.get(j.key===null?R:j.key)||null,u(w,I,j,U);case Bs:return I=I.get(j.key===null?R:j.key)||null,c(w,I,j,U);case li:var F=j._init;return E(I,w,R,F(j._payload),U)}if(ha(j)||Xo(j))return I=I.get(R)||null,f(w,I,j,U,null);iu(w,j)}return null}function S(I,w,R,j){for(var U=null,F=null,y=w,v=w=0,T=null;y!==null&&v<R.length;v++){y.index>v?(T=y,y=null):T=y.sibling;var x=g(I,y,R[v],j);if(x===null){y===null&&(y=T);break}t&&y&&x.alternate===null&&e(I,y),w=s(x,w,v),F===null?U=x:F.sibling=x,F=x,y=T}if(v===R.length)return n(I,y),at&&Xi(I,v),U;if(y===null){for(;v<R.length;v++)y=p(I,R[v],j),y!==null&&(w=s(y,w,v),F===null?U=y:F.sibling=y,F=y);return at&&Xi(I,v),U}for(y=r(I,y);v<R.length;v++)T=E(y,I,v,R[v],j),T!==null&&(t&&T.alternate!==null&&y.delete(T.key===null?v:T.key),w=s(T,w,v),F===null?U=T:F.sibling=T,F=T);return t&&y.forEach(function(C){return e(I,C)}),at&&Xi(I,v),U}function N(I,w,R,j){var U=Xo(R);if(typeof U!="function")throw Error(W(150));if(R=U.call(R),R==null)throw Error(W(151));for(var F=U=null,y=w,v=w=0,T=null,x=R.next();y!==null&&!x.done;v++,x=R.next()){y.index>v?(T=y,y=null):T=y.sibling;var C=g(I,y,x.value,j);if(C===null){y===null&&(y=T);break}t&&y&&C.alternate===null&&e(I,y),w=s(C,w,v),F===null?U=C:F.sibling=C,F=C,y=T}if(x.done)return n(I,y),at&&Xi(I,v),U;if(y===null){for(;!x.done;v++,x=R.next())x=p(I,x.value,j),x!==null&&(w=s(x,w,v),F===null?U=x:F.sibling=x,F=x);return at&&Xi(I,v),U}for(y=r(I,y);!x.done;v++,x=R.next())x=E(y,I,v,x.value,j),x!==null&&(t&&x.alternate!==null&&y.delete(x.key===null?v:x.key),w=s(x,w,v),F===null?U=x:F.sibling=x,F=x);return t&&y.forEach(function(b){return e(I,b)}),at&&Xi(I,v),U}function D(I,w,R,j){if(typeof R=="object"&&R!==null&&R.type===$s&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ql:e:{for(var U=R.key,F=w;F!==null;){if(F.key===U){if(U=R.type,U===$s){if(F.tag===7){n(I,F.sibling),w=i(F,R.props.children),w.return=I,I=w;break e}}else if(F.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===li&&ny(U)===F.type){n(I,F.sibling),w=i(F,R.props),w.ref=na(I,F,R),w.return=I,I=w;break e}n(I,F);break}else e(I,F);F=F.sibling}R.type===$s?(w=us(R.props.children,I.mode,j,R.key),w.return=I,I=w):(j=Cu(R.type,R.key,R.props,null,I.mode,j),j.ref=na(I,w,R),j.return=I,I=j)}return o(I);case Bs:e:{for(F=R.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===R.containerInfo&&w.stateNode.implementation===R.implementation){n(I,w.sibling),w=i(w,R.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=Kd(R,I.mode,j),w.return=I,I=w}return o(I);case li:return F=R._init,D(I,w,F(R._payload),j)}if(ha(R))return S(I,w,R,j);if(Xo(R))return N(I,w,R,j);iu(I,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,w!==null&&w.tag===6?(n(I,w.sibling),w=i(w,R),w.return=I,I=w):(n(I,w),w=Qd(R,I.mode,j),w.return=I,I=w),o(I)):n(I,w)}return D}var po=Pw(!0),bw=Pw(!1),ec=Vi(null),tc=null,Xs=null,op=null;function ap(){op=Xs=tc=null}function lp(t){var e=ec.current;it(ec),t._currentValue=e}function $h(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function io(t,e){tc=t,op=Xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(op!==t)if(t={context:t,memoizedValue:e,next:null},Xs===null){if(tc===null)throw Error(W(308));Xs=t,tc.dependencies={lanes:0,firstContext:t}}else Xs=Xs.next=t;return e}var rs=null;function up(t){rs===null?rs=[t]:rs.push(t)}function kw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,up(e)):(n.next=i.next,i.next=n),e.interleaved=n,zr(t,r)}function zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ui=!1;function cp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ii(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zr(t,n)}return i=r.interleaved,i===null?(e.next=e,up(r)):(e.next=i.next,i.next=e),r.interleaved=e,zr(t,n)}function Tu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gf(t,n)}}function ry(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nc(t,e,n,r){var i=t.updateQueue;ui=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=c=u=null,l=s;do{var g=l.lane,E=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=t,N=l;switch(g=e,E=n,N.tag){case 1:if(S=N.payload,typeof S=="function"){p=S.call(E,p,g);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=N.payload,g=typeof S=="function"?S.call(E,p,g):S,g==null)break e;p=ht({},p,g);break e;case 2:ui=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else E={eventTime:E,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=E,u=p):f=f.next=E,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);gs|=o,t.lanes=o,t.memoizedState=p}}function iy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var pl={},dr=Vi(pl),qa=Vi(pl),Qa=Vi(pl);function is(t){if(t===pl)throw Error(W(174));return t}function dp(t,e){switch(Ye(Qa,e),Ye(qa,t),Ye(dr,pl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Th(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Th(e,t)}it(dr),Ye(dr,e)}function mo(){it(dr),it(qa),it(Qa)}function jw(t){is(Qa.current);var e=is(dr.current),n=Th(e,t.type);e!==n&&(Ye(qa,t),Ye(dr,n))}function hp(t){qa.current===t&&(it(dr),it(qa))}var ct=Vi(0);function rc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zd=[];function fp(){for(var t=0;t<zd.length;t++)zd[t]._workInProgressVersionPrimary=null;zd.length=0}var Iu=Yr.ReactCurrentDispatcher,Bd=Yr.ReactCurrentBatchConfig,ms=0,dt=null,Ct=null,Dt=null,ic=!1,Sa=!1,Ka=0,jS=0;function qt(){throw Error(W(321))}function pp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zn(t[n],e[n]))return!1;return!0}function mp(t,e,n,r,i,s){if(ms=s,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Iu.current=t===null||t.memoizedState===null?VS:US,t=n(r,i),Sa){s=0;do{if(Sa=!1,Ka=0,25<=s)throw Error(W(301));s+=1,Dt=Ct=null,e.updateQueue=null,Iu.current=FS,t=n(r,i)}while(Sa)}if(Iu.current=sc,e=Ct!==null&&Ct.next!==null,ms=0,Dt=Ct=dt=null,ic=!1,e)throw Error(W(300));return t}function gp(){var t=Ka!==0;return Ka=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?dt.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Un(){if(Ct===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Dt===null?dt.memoizedState:Dt.next;if(e!==null)Dt=e,Ct=t;else{if(t===null)throw Error(W(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Dt===null?dt.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Ga(t,e){return typeof e=="function"?e(t):e}function $d(t){var e=Un(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var f=c.lane;if((ms&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,dt.lanes|=f,gs|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Zn(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,dt.lanes|=s,gs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hd(t){var e=Un(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Zn(s,e.memoizedState)||(dn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ow(){}function Lw(t,e){var n=dt,r=Un(),i=e(),s=!Zn(r.memoizedState,i);if(s&&(r.memoizedState=i,dn=!0),r=r.queue,yp(Uw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,Ya(9,Vw.bind(null,n,r,i,e),void 0,null),jt===null)throw Error(W(349));ms&30||Mw(n,e,i)}return i}function Mw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vw(t,e,n,r){e.value=n,e.getSnapshot=r,Fw(e)&&zw(t)}function Uw(t,e,n){return n(function(){Fw(e)&&zw(t)})}function Fw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zn(t,n)}catch{return!0}}function zw(t){var e=zr(t,1);e!==null&&Yn(e,t,1,-1)}function sy(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:t},e.queue=t,t=t.dispatch=MS.bind(null,dt,t),[e.memoizedState,t]}function Ya(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Bw(){return Un().memoizedState}function Su(t,e,n,r){var i=ar();dt.flags|=t,i.memoizedState=Ya(1|e,n,void 0,r===void 0?null:r)}function Vc(t,e,n,r){var i=Un();r=r===void 0?null:r;var s=void 0;if(Ct!==null){var o=Ct.memoizedState;if(s=o.destroy,r!==null&&pp(r,o.deps)){i.memoizedState=Ya(e,n,s,r);return}}dt.flags|=t,i.memoizedState=Ya(1|e,n,s,r)}function oy(t,e){return Su(8390656,8,t,e)}function yp(t,e){return Vc(2048,8,t,e)}function $w(t,e){return Vc(4,2,t,e)}function Hw(t,e){return Vc(4,4,t,e)}function Ww(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qw(t,e,n){return n=n!=null?n.concat([t]):null,Vc(4,4,Ww.bind(null,e,t),n)}function vp(){}function Qw(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Kw(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Gw(t,e,n){return ms&21?(Zn(n,e)||(n=ew(),dt.lanes|=n,gs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function OS(t,e){var n=Be;Be=n!==0&&4>n?n:4,t(!0);var r=Bd.transition;Bd.transition={};try{t(!1),e()}finally{Be=n,Bd.transition=r}}function Yw(){return Un().memoizedState}function LS(t,e,n){var r=Ri(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xw(t))Jw(e,n);else if(n=kw(t,e,n,r),n!==null){var i=sn();Yn(n,t,r,i),Zw(n,e,r)}}function MS(t,e,n){var r=Ri(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xw(t))Jw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Zn(l,o)){var u=e.interleaved;u===null?(i.next=i,up(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=kw(t,e,i,r),n!==null&&(i=sn(),Yn(n,t,r,i),Zw(n,e,r))}}function Xw(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function Jw(t,e){Sa=ic=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Zw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gf(t,n)}}var sc={readContext:Vn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},VS={readContext:Vn,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:oy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Su(4194308,4,Ww.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Su(4194308,4,t,e)},useInsertionEffect:function(t,e){return Su(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=LS.bind(null,dt,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:sy,useDebugValue:vp,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=sy(!1),e=t[0];return t=OS.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=dt,i=ar();if(at){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),jt===null)throw Error(W(349));ms&30||Mw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,oy(Uw.bind(null,r,s,t),[t]),r.flags|=2048,Ya(9,Vw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ar(),e=jt.identifierPrefix;if(at){var n=Nr,r=Ar;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ka++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},US={readContext:Vn,useCallback:Qw,useContext:Vn,useEffect:yp,useImperativeHandle:qw,useInsertionEffect:$w,useLayoutEffect:Hw,useMemo:Kw,useReducer:$d,useRef:Bw,useState:function(){return $d(Ga)},useDebugValue:vp,useDeferredValue:function(t){var e=Un();return Gw(e,Ct.memoizedState,t)},useTransition:function(){var t=$d(Ga)[0],e=Un().memoizedState;return[t,e]},useMutableSource:Ow,useSyncExternalStore:Lw,useId:Yw,unstable_isNewReconciler:!1},FS={readContext:Vn,useCallback:Qw,useContext:Vn,useEffect:yp,useImperativeHandle:qw,useInsertionEffect:$w,useLayoutEffect:Hw,useMemo:Kw,useReducer:Hd,useRef:Bw,useState:function(){return Hd(Ga)},useDebugValue:vp,useDeferredValue:function(t){var e=Un();return Ct===null?e.memoizedState=t:Gw(e,Ct.memoizedState,t)},useTransition:function(){var t=Hd(Ga)[0],e=Un().memoizedState;return[t,e]},useMutableSource:Ow,useSyncExternalStore:Lw,useId:Yw,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uc={isMounted:function(t){return(t=t._reactInternals)?Ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=sn(),i=Ri(t),s=Dr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ii(t,s,i),e!==null&&(Yn(e,t,i,r),Tu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=sn(),i=Ri(t),s=Dr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ii(t,s,i),e!==null&&(Yn(e,t,i,r),Tu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),r=Ri(t),i=Dr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ii(t,i,r),e!==null&&(Yn(e,t,r,n),Tu(e,t,r))}};function ay(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ba(n,r)||!Ba(i,s):!0}function e0(t,e,n){var r=!1,i=ki,s=e.contextType;return typeof s=="object"&&s!==null?s=Vn(s):(i=fn(e)?fs:Jt.current,r=e.contextTypes,s=(r=r!=null)?ho(t,i):ki),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ly(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uc.enqueueReplaceState(e,e.state,null)}function Wh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},cp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vn(s):(s=fn(e)?fs:Jt.current,i.context=ho(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Hh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Uc.enqueueReplaceState(i,i.state,null),nc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function go(t,e){try{var n="",r=e;do n+=pI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zS=typeof WeakMap=="function"?WeakMap:Map;function t0(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ac||(ac=!0,nf=r),qh(t,e)},n}function n0(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qh(t,e),typeof r!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=tR.bind(null,t,e,n),e.then(t,t))}function cy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,Ii(n,e,1))),n.lanes|=1),t)}var BS=Yr.ReactCurrentOwner,dn=!1;function nn(t,e,n,r){e.child=t===null?bw(e,null,n,r):po(e,t.child,n,r)}function hy(t,e,n,r,i){n=n.render;var s=e.ref;return io(e,i),r=mp(t,e,n,r,s,i),n=gp(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Br(t,e,i)):(at&&n&&rp(e),e.flags|=1,nn(t,e,r,i),e.child)}function fy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Rp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,r0(t,e,s,r,i)):(t=Cu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ba,n(o,r)&&t.ref===e.ref)return Br(t,e,i)}return e.flags|=1,t=Ai(s,r),t.ref=e.ref,t.return=e,e.child=t}function r0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ba(s,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,Br(t,e,i)}return Qh(t,e,n,r,i)}function i0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Zs,En),En|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(Zs,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ye(Zs,En),En|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ye(Zs,En),En|=r;return nn(t,e,i,n),e.child}function s0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qh(t,e,n,r,i){var s=fn(n)?fs:Jt.current;return s=ho(e,s),io(e,i),n=mp(t,e,n,r,s,i),r=gp(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Br(t,e,i)):(at&&r&&rp(e),e.flags|=1,nn(t,e,n,i),e.child)}function py(t,e,n,r,i){if(fn(n)){var s=!0;Xu(e)}else s=!1;if(io(e,i),e.stateNode===null)Ru(t,e),e0(e,n,r),Wh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Vn(c):(c=fn(n)?fs:Jt.current,c=ho(e,c));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&ly(e,o,r,c),ui=!1;var g=e.memoizedState;o.state=g,nc(e,r,o,i),u=e.memoizedState,l!==r||g!==u||hn.current||ui?(typeof f=="function"&&(Hh(e,n,f,r),u=e.memoizedState),(l=ui||ay(e,n,l,r,g,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Dw(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Wn(e.type,l),o.props=c,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vn(u):(u=fn(n)?fs:Jt.current,u=ho(e,u));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&ly(e,o,r,u),ui=!1,g=e.memoizedState,o.state=g,nc(e,r,o,i);var S=e.memoizedState;l!==p||g!==S||hn.current||ui?(typeof E=="function"&&(Hh(e,n,E,r),S=e.memoizedState),(c=ui||ay(e,n,c,r,g,S,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Kh(t,e,n,r,s,i)}function Kh(t,e,n,r,i,s){s0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Zg(e,n,!1),Br(t,e,s);r=e.stateNode,BS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=po(e,t.child,null,s),e.child=po(e,null,l,s)):nn(t,e,l,s),e.memoizedState=r.state,i&&Zg(e,n,!0),e.child}function o0(t){var e=t.stateNode;e.pendingContext?Jg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jg(t,e.context,!1),dp(t,e.containerInfo)}function my(t,e,n,r,i){return fo(),sp(i),e.flags|=256,nn(t,e,n,r),e.child}var Gh={dehydrated:null,treeContext:null,retryLane:0};function Yh(t){return{baseLanes:t,cachePool:null,transitions:null}}function a0(t,e,n){var r=e.pendingProps,i=ct.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ye(ct,i&1),t===null)return Bh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Bc(o,r,0,null),t=us(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Yh(n),e.memoizedState=Gh,t):_p(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return $S(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ai(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ai(l,s):(s=us(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Yh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gh,r}return s=t.child,t=s.sibling,r=Ai(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _p(t,e){return e=Bc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function su(t,e,n,r){return r!==null&&sp(r),po(e,t.child,null,n),t=_p(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $S(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Wd(Error(W(422))),su(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Bc({mode:"visible",children:r.children},i,0,null),s=us(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&po(e,t.child,null,o),e.child.memoizedState=Yh(o),e.memoizedState=Gh,s);if(!(e.mode&1))return su(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(W(419)),r=Wd(s,r,void 0),su(t,e,o,r)}if(l=(o&t.childLanes)!==0,dn||l){if(r=jt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zr(t,i),Yn(r,t,i,-1))}return Sp(),r=Wd(Error(W(421))),su(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=nR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Tn=Ti(i.nextSibling),Rn=e,at=!0,Kn=null,t!==null&&(kn[Dn++]=Ar,kn[Dn++]=Nr,kn[Dn++]=ps,Ar=t.id,Nr=t.overflow,ps=e),e=_p(e,r.children),e.flags|=4096,e)}function gy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$h(t.return,e,n)}function qd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function l0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(nn(t,e,r.children,n),r=ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gy(t,n,e);else if(t.tag===19)gy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(ct,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qd(e,!0,n,null,s);break;case"together":qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HS(t,e,n){switch(e.tag){case 3:o0(e),fo();break;case 5:jw(e);break;case 1:fn(e.type)&&Xu(e);break;case 4:dp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ye(ec,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(ct,ct.current&1),e.flags|=128,null):n&e.child.childLanes?a0(t,e,n):(Ye(ct,ct.current&1),t=Br(t,e,n),t!==null?t.sibling:null);Ye(ct,ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return l0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(ct,ct.current),r)break;return null;case 22:case 23:return e.lanes=0,i0(t,e,n)}return Br(t,e,n)}var u0,Xh,c0,d0;u0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xh=function(){};c0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,is(dr.current);var s=null;switch(n){case"input":i=_h(t,i),r=_h(t,r),s=[];break;case"select":i=ht({},i,{value:void 0}),r=ht({},r,{value:void 0}),s=[];break;case"textarea":i=xh(t,i),r=xh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gu)}Ih(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Oa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Oa.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&tt("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};d0=function(t,e,n,r){n!==r&&(e.flags|=4)};function ra(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WS(t,e,n){var r=e.pendingProps;switch(ip(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return fn(e.type)&&Yu(),Qt(e),null;case 3:return r=e.stateNode,mo(),it(hn),it(Jt),fp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ru(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(of(Kn),Kn=null))),Xh(t,e),Qt(e),null;case 5:hp(e);var i=is(Qa.current);if(n=e.type,t!==null&&e.stateNode!=null)c0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Qt(e),null}if(t=is(dr.current),ru(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[lr]=e,r[Wa]=s,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(i=0;i<pa.length;i++)tt(pa[i],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":Sg(r,s),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tt("invalid",r);break;case"textarea":Ag(r,s),tt("invalid",r)}Ih(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&nu(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&nu(r.textContent,l,t),i=["children",""+l]):Oa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":Kl(r),Rg(r,s,!0);break;case"textarea":Kl(r),Ng(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=U_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[lr]=e,t[Wa]=r,u0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sh(n,r),n){case"dialog":tt("cancel",t),tt("close",t),i=r;break;case"iframe":case"object":case"embed":tt("load",t),i=r;break;case"video":case"audio":for(i=0;i<pa.length;i++)tt(pa[i],t);i=r;break;case"source":tt("error",t),i=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),i=r;break;case"details":tt("toggle",t),i=r;break;case"input":Sg(t,r),i=_h(t,r),tt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ht({},r,{value:void 0}),tt("invalid",t);break;case"textarea":Ag(t,r),i=xh(t,r),tt("invalid",t);break;default:i=r}Ih(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?B_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&F_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&La(t,u):typeof u=="number"&&La(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Oa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&tt("scroll",t):u!=null&&$f(t,s,u,o))}switch(n){case"input":Kl(t),Rg(t,r,!1);break;case"textarea":Kl(t),Ng(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?eo(t,!!r.multiple,s,!1):r.defaultValue!=null&&eo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)d0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=is(Qa.current),is(dr.current),ru(e)){if(r=e.stateNode,n=e.memoizedProps,r[lr]=e,(s=r.nodeValue!==n)&&(t=Rn,t!==null))switch(t.tag){case 3:nu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lr]=e,e.stateNode=r}return Qt(e),null;case 13:if(it(ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&Tn!==null&&e.mode&1&&!(e.flags&128))Cw(),fo(),e.flags|=98560,s=!1;else if(s=ru(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[lr]=e}else fo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),s=!1}else Kn!==null&&(of(Kn),Kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?Pt===0&&(Pt=3):Sp())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return mo(),Xh(t,e),t===null&&$a(e.stateNode.containerInfo),Qt(e),null;case 10:return lp(e.type._context),Qt(e),null;case 17:return fn(e.type)&&Yu(),Qt(e),null;case 19:if(it(ct),s=e.memoizedState,s===null)return Qt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ra(s,!1);else{if(Pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rc(t),o!==null){for(e.flags|=128,ra(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(ct,ct.current&1|2),e.child}t=t.sibling}s.tail!==null&&Tt()>yo&&(e.flags|=128,r=!0,ra(s,!1),e.lanes=4194304)}else{if(!r)if(t=rc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ra(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!at)return Qt(e),null}else 2*Tt()-s.renderingStartTime>yo&&n!==1073741824&&(e.flags|=128,r=!0,ra(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Tt(),e.sibling=null,n=ct.current,Ye(ct,r?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return Ip(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?En&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function qS(t,e){switch(ip(e),e.tag){case 1:return fn(e.type)&&Yu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mo(),it(hn),it(Jt),fp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hp(e),null;case 13:if(it(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));fo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(ct),null;case 4:return mo(),null;case 10:return lp(e.type._context),null;case 22:case 23:return Ip(),null;case 24:return null;default:return null}}var ou=!1,Yt=!1,QS=typeof WeakSet=="function"?WeakSet:Set,X=null;function Js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function Jh(t,e,n){try{n()}catch(r){yt(t,e,r)}}var yy=!1;function KS(t,e){if(Oh=qu,t=gw(),np(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,p=t,g=null;t:for(;;){for(var E;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(E=p.firstChild)!==null;)g=p,p=E;for(;;){if(p===t)break t;if(g===n&&++c===i&&(l=o),g===s&&++f===r&&(u=o),(E=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=E}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lh={focusedElem:t,selectionRange:n},qu=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var N=S.memoizedProps,D=S.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?N:Wn(e.type,N),D);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(j){yt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return S=yy,yy=!1,S}function Ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Jh(e,n,s)}i=i.next}while(i!==r)}}function Fc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function h0(t){var e=t.alternate;e!==null&&(t.alternate=null,h0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[Wa],delete e[Uh],delete e[PS],delete e[bS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function f0(t){return t.tag===5||t.tag===3||t.tag===4}function vy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||f0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ef(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gu));else if(r!==4&&(t=t.child,t!==null))for(ef(t,e,n),t=t.sibling;t!==null;)ef(t,e,n),t=t.sibling}function tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tf(t,e,n),t=t.sibling;t!==null;)tf(t,e,n),t=t.sibling}var Mt=null,qn=!1;function ri(t,e,n){for(n=n.child;n!==null;)p0(t,e,n),n=n.sibling}function p0(t,e,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(kc,n)}catch{}switch(n.tag){case 5:Yt||Js(n,e);case 6:var r=Mt,i=qn;Mt=null,ri(t,e,n),Mt=r,qn=i,Mt!==null&&(qn?(t=Mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(qn?(t=Mt,n=n.stateNode,t.nodeType===8?Ud(t.parentNode,n):t.nodeType===1&&Ud(t,n),Fa(t)):Ud(Mt,n.stateNode));break;case 4:r=Mt,i=qn,Mt=n.stateNode.containerInfo,qn=!0,ri(t,e,n),Mt=r,qn=i;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Jh(n,e,o),i=i.next}while(i!==r)}ri(t,e,n);break;case 1:if(!Yt&&(Js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){yt(n,e,l)}ri(t,e,n);break;case 21:ri(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,ri(t,e,n),Yt=r):ri(t,e,n);break;default:ri(t,e,n)}}function _y(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QS),e.forEach(function(r){var i=rR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Mt=l.stateNode,qn=!1;break e;case 3:Mt=l.stateNode.containerInfo,qn=!0;break e;case 4:Mt=l.stateNode.containerInfo,qn=!0;break e}l=l.return}if(Mt===null)throw Error(W(160));p0(s,o,i),Mt=null,qn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){yt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)m0(e,t),e=e.sibling}function m0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),or(t),r&4){try{Ra(3,t,t.return),Fc(3,t)}catch(N){yt(t,t.return,N)}try{Ra(5,t,t.return)}catch(N){yt(t,t.return,N)}}break;case 1:Hn(e,t),or(t),r&512&&n!==null&&Js(n,n.return);break;case 5:if(Hn(e,t),or(t),r&512&&n!==null&&Js(n,n.return),t.flags&32){var i=t.stateNode;try{La(i,"")}catch(N){yt(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&M_(i,s),Sh(l,o);var c=Sh(l,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?B_(i,p):f==="dangerouslySetInnerHTML"?F_(i,p):f==="children"?La(i,p):$f(i,f,p,c)}switch(l){case"input":wh(i,s);break;case"textarea":V_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var E=s.value;E!=null?eo(i,!!s.multiple,E,!1):g!==!!s.multiple&&(s.defaultValue!=null?eo(i,!!s.multiple,s.defaultValue,!0):eo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wa]=s}catch(N){yt(t,t.return,N)}}break;case 6:if(Hn(e,t),or(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){yt(t,t.return,N)}}break;case 3:if(Hn(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fa(e.containerInfo)}catch(N){yt(t,t.return,N)}break;case 4:Hn(e,t),or(t);break;case 13:Hn(e,t),or(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xp=Tt())),r&4&&_y(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(c=Yt)||f,Hn(e,t),Yt=c):Hn(e,t),or(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(X=t,f=t.child;f!==null;){for(p=X=f;X!==null;){switch(g=X,E=g.child,g.tag){case 0:case 11:case 14:case 15:Ra(4,g,g.return);break;case 1:Js(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(N){yt(r,n,N)}}break;case 5:Js(g,g.return);break;case 22:if(g.memoizedState!==null){Ey(p);continue}}E!==null?(E.return=g,X=E):Ey(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=z_("display",o))}catch(N){yt(t,t.return,N)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(N){yt(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Hn(e,t),or(t),r&4&&_y(t);break;case 21:break;default:Hn(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(f0(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(La(i,""),r.flags&=-33);var s=vy(t);tf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=vy(t);ef(t,l,o);break;default:throw Error(W(161))}}catch(u){yt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GS(t,e,n){X=t,g0(t)}function g0(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ou;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Yt;l=ou;var c=Yt;if(ou=o,(Yt=u)&&!c)for(X=i;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?xy(i):u!==null?(u.return=o,X=u):xy(i);for(;s!==null;)X=s,g0(s),s=s.sibling;X=i,ou=l,Yt=c}wy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):wy(t)}}function wy(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Fc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&iy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}iy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Fa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Yt||e.flags&512&&Zh(e)}catch(g){yt(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Ey(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function xy(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fc(4,e)}catch(u){yt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){yt(e,i,u)}}var s=e.return;try{Zh(e)}catch(u){yt(e,s,u)}break;case 5:var o=e.return;try{Zh(e)}catch(u){yt(e,o,u)}}}catch(u){yt(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var YS=Math.ceil,oc=Yr.ReactCurrentDispatcher,wp=Yr.ReactCurrentOwner,Ln=Yr.ReactCurrentBatchConfig,De=0,jt=null,At=null,Ft=0,En=0,Zs=Vi(0),Pt=0,Xa=null,gs=0,zc=0,Ep=0,Aa=null,un=null,xp=0,yo=1/0,Ir=null,ac=!1,nf=null,Si=null,au=!1,yi=null,lc=0,Na=0,rf=null,Au=-1,Nu=0;function sn(){return De&6?Tt():Au!==-1?Au:Au=Tt()}function Ri(t){return t.mode&1?De&2&&Ft!==0?Ft&-Ft:DS.transition!==null?(Nu===0&&(Nu=ew()),Nu):(t=Be,t!==0||(t=window.event,t=t===void 0?16:aw(t.type)),t):1}function Yn(t,e,n,r){if(50<Na)throw Na=0,rf=null,Error(W(185));dl(t,n,r),(!(De&2)||t!==jt)&&(t===jt&&(!(De&2)&&(zc|=n),Pt===4&&di(t,Ft)),pn(t,r),n===1&&De===0&&!(e.mode&1)&&(yo=Tt()+500,Mc&&Ui()))}function pn(t,e){var n=t.callbackNode;DI(t,e);var r=Wu(t,t===jt?Ft:0);if(r===0)n!==null&&bg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bg(n),e===1)t.tag===0?kS(Ty.bind(null,t)):Rw(Ty.bind(null,t)),NS(function(){!(De&6)&&Ui()}),n=null;else{switch(tw(r)){case 1:n=Kf;break;case 4:n=J_;break;case 16:n=Hu;break;case 536870912:n=Z_;break;default:n=Hu}n=I0(n,y0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function y0(t,e){if(Au=-1,Nu=0,De&6)throw Error(W(327));var n=t.callbackNode;if(so()&&t.callbackNode!==n)return null;var r=Wu(t,t===jt?Ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=uc(t,r);else{e=r;var i=De;De|=2;var s=_0();(jt!==t||Ft!==e)&&(Ir=null,yo=Tt()+500,ls(t,e));do try{ZS();break}catch(l){v0(t,l)}while(!0);ap(),oc.current=s,De=i,At!==null?e=0:(jt=null,Ft=0,e=Pt)}if(e!==0){if(e===2&&(i=Ph(t),i!==0&&(r=i,e=sf(t,i))),e===1)throw n=Xa,ls(t,0),di(t,r),pn(t,Tt()),n;if(e===6)di(t,r);else{if(i=t.current.alternate,!(r&30)&&!XS(i)&&(e=uc(t,r),e===2&&(s=Ph(t),s!==0&&(r=s,e=sf(t,s))),e===1))throw n=Xa,ls(t,0),di(t,r),pn(t,Tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Ji(t,un,Ir);break;case 3:if(di(t,r),(r&130023424)===r&&(e=xp+500-Tt(),10<e)){if(Wu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vh(Ji.bind(null,t,un,Ir),e);break}Ji(t,un,Ir);break;case 4:if(di(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Gn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YS(r/1960))-r,10<r){t.timeoutHandle=Vh(Ji.bind(null,t,un,Ir),r);break}Ji(t,un,Ir);break;case 5:Ji(t,un,Ir);break;default:throw Error(W(329))}}}return pn(t,Tt()),t.callbackNode===n?y0.bind(null,t):null}function sf(t,e){var n=Aa;return t.current.memoizedState.isDehydrated&&(ls(t,e).flags|=256),t=uc(t,e),t!==2&&(e=un,un=n,e!==null&&of(e)),t}function of(t){un===null?un=t:un.push.apply(un,t)}function XS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function di(t,e){for(e&=~Ep,e&=~zc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function Ty(t){if(De&6)throw Error(W(327));so();var e=Wu(t,0);if(!(e&1))return pn(t,Tt()),null;var n=uc(t,e);if(t.tag!==0&&n===2){var r=Ph(t);r!==0&&(e=r,n=sf(t,r))}if(n===1)throw n=Xa,ls(t,0),di(t,e),pn(t,Tt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ji(t,un,Ir),pn(t,Tt()),null}function Tp(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&(yo=Tt()+500,Mc&&Ui())}}function ys(t){yi!==null&&yi.tag===0&&!(De&6)&&so();var e=De;De|=1;var n=Ln.transition,r=Be;try{if(Ln.transition=null,Be=1,t)return t()}finally{Be=r,Ln.transition=n,De=e,!(De&6)&&Ui()}}function Ip(){En=Zs.current,it(Zs)}function ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AS(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(ip(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yu();break;case 3:mo(),it(hn),it(Jt),fp();break;case 5:hp(r);break;case 4:mo();break;case 13:it(ct);break;case 19:it(ct);break;case 10:lp(r.type._context);break;case 22:case 23:Ip()}n=n.return}if(jt=t,At=t=Ai(t.current,null),Ft=En=e,Pt=0,Xa=null,Ep=zc=gs=0,un=Aa=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}rs=null}return t}function v0(t,e){do{var n=At;try{if(ap(),Iu.current=sc,ic){for(var r=dt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ic=!1}if(ms=0,Dt=Ct=dt=null,Sa=!1,Ka=0,wp.current=null,n===null||n.return===null){Pt=1,Xa=e,At=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Ft,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=cy(o);if(E!==null){E.flags&=-257,dy(E,o,l,s,e),E.mode&1&&uy(s,c,e),e=E,u=c;var S=e.updateQueue;if(S===null){var N=new Set;N.add(u),e.updateQueue=N}else S.add(u);break e}else{if(!(e&1)){uy(s,c,e),Sp();break e}u=Error(W(426))}}else if(at&&l.mode&1){var D=cy(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),dy(D,o,l,s,e),sp(go(u,l));break e}}s=u=go(u,l),Pt!==4&&(Pt=2),Aa===null?Aa=[s]:Aa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=t0(s,u,e);ry(s,I);break e;case 1:l=u;var w=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Si===null||!Si.has(R)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=n0(s,l,e);ry(s,j);break e}}s=s.return}while(s!==null)}E0(n)}catch(U){e=U,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function _0(){var t=oc.current;return oc.current=sc,t===null?sc:t}function Sp(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),jt===null||!(gs&268435455)&&!(zc&268435455)||di(jt,Ft)}function uc(t,e){var n=De;De|=2;var r=_0();(jt!==t||Ft!==e)&&(Ir=null,ls(t,e));do try{JS();break}catch(i){v0(t,i)}while(!0);if(ap(),De=n,oc.current=r,At!==null)throw Error(W(261));return jt=null,Ft=0,Pt}function JS(){for(;At!==null;)w0(At)}function ZS(){for(;At!==null&&!II();)w0(At)}function w0(t){var e=T0(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?E0(t):At=e,wp.current=null}function E0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qS(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pt=6,At=null;return}}else if(n=WS(n,e,En),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Pt===0&&(Pt=5)}function Ji(t,e,n){var r=Be,i=Ln.transition;try{Ln.transition=null,Be=1,eR(t,e,n,r)}finally{Ln.transition=i,Be=r}return null}function eR(t,e,n,r){do so();while(yi!==null);if(De&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(jI(t,s),t===jt&&(At=jt=null,Ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||au||(au=!0,I0(Hu,function(){return so(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ln.transition,Ln.transition=null;var o=Be;Be=1;var l=De;De|=4,wp.current=null,KS(t,n),m0(n,t),wS(Lh),qu=!!Oh,Lh=Oh=null,t.current=n,GS(n),SI(),De=l,Be=o,Ln.transition=s}else t.current=n;if(au&&(au=!1,yi=t,lc=i),s=t.pendingLanes,s===0&&(Si=null),NI(n.stateNode),pn(t,Tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ac)throw ac=!1,t=nf,nf=null,t;return lc&1&&t.tag!==0&&so(),s=t.pendingLanes,s&1?t===rf?Na++:(Na=0,rf=t):Na=0,Ui(),null}function so(){if(yi!==null){var t=tw(lc),e=Ln.transition,n=Be;try{if(Ln.transition=null,Be=16>t?16:t,yi===null)var r=!1;else{if(t=yi,yi=null,lc=0,De&6)throw Error(W(331));var i=De;for(De|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(X=c;X!==null;){var f=X;switch(f.tag){case 0:case 11:case 15:Ra(8,f,s)}var p=f.child;if(p!==null)p.return=f,X=p;else for(;X!==null;){f=X;var g=f.sibling,E=f.return;if(h0(f),f===c){X=null;break}if(g!==null){g.return=E,X=g;break}X=E}}}var S=s.alternate;if(S!==null){var N=S.child;if(N!==null){S.child=null;do{var D=N.sibling;N.sibling=null,N=D}while(N!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ra(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,X=I;break e}X=s.return}}var w=t.current;for(X=w;X!==null;){o=X;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,X=R;else e:for(o=w;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fc(9,l)}}catch(U){yt(l,l.return,U)}if(l===o){X=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,X=j;break e}X=l.return}}if(De=i,Ui(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(kc,t)}catch{}r=!0}return r}finally{Be=n,Ln.transition=e}}return!1}function Iy(t,e,n){e=go(n,e),e=t0(t,e,1),t=Ii(t,e,1),e=sn(),t!==null&&(dl(t,1,e),pn(t,e))}function yt(t,e,n){if(t.tag===3)Iy(t,t,n);else for(;e!==null;){if(e.tag===3){Iy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Si===null||!Si.has(r))){t=go(n,t),t=n0(e,t,1),e=Ii(e,t,1),t=sn(),e!==null&&(dl(e,1,t),pn(e,t));break}}e=e.return}}function tR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(Ft&n)===n&&(Pt===4||Pt===3&&(Ft&130023424)===Ft&&500>Tt()-xp?ls(t,0):Ep|=n),pn(t,e)}function x0(t,e){e===0&&(t.mode&1?(e=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):e=1);var n=sn();t=zr(t,e),t!==null&&(dl(t,e,n),pn(t,n))}function nR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),x0(t,n)}function rR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),x0(t,n)}var T0;T0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,HS(t,e,n);dn=!!(t.flags&131072)}else dn=!1,at&&e.flags&1048576&&Aw(e,Zu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ru(t,e),t=e.pendingProps;var i=ho(e,Jt.current);io(e,n),i=mp(null,e,r,t,i,n);var s=gp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(r)?(s=!0,Xu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cp(e),i.updater=Uc,e.stateNode=i,i._reactInternals=e,Wh(e,r,t,n),e=Kh(null,e,r,!0,s,n)):(e.tag=0,at&&s&&rp(e),nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=sR(r),t=Wn(r,t),i){case 0:e=Qh(null,e,r,t,n);break e;case 1:e=py(null,e,r,t,n);break e;case 11:e=hy(null,e,r,t,n);break e;case 14:e=fy(null,e,r,Wn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),Qh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),py(t,e,r,i,n);case 3:e:{if(o0(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Dw(t,e),nc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=go(Error(W(423)),e),e=my(t,e,r,n,i);break e}else if(r!==i){i=go(Error(W(424)),e),e=my(t,e,r,n,i);break e}else for(Tn=Ti(e.stateNode.containerInfo.firstChild),Rn=e,at=!0,Kn=null,n=bw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fo(),r===i){e=Br(t,e,n);break e}nn(t,e,r,n)}e=e.child}return e;case 5:return jw(e),t===null&&Bh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Mh(r,i)?o=null:s!==null&&Mh(r,s)&&(e.flags|=32),s0(t,e),nn(t,e,o,n),e.child;case 6:return t===null&&Bh(e),null;case 13:return a0(t,e,n);case 4:return dp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=po(e,null,r,n):nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),hy(t,e,r,i,n);case 7:return nn(t,e,e.pendingProps,n),e.child;case 8:return nn(t,e,e.pendingProps.children,n),e.child;case 12:return nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ye(ec,r._currentValue),r._currentValue=o,s!==null)if(Zn(s.value,o)){if(s.children===i.children&&!hn.current){e=Br(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Dr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),$h(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),$h(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,io(e,n),i=Vn(i),r=r(i),e.flags|=1,nn(t,e,r,n),e.child;case 14:return r=e.type,i=Wn(r,e.pendingProps),i=Wn(r.type,i),fy(t,e,r,i,n);case 15:return r0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),Ru(t,e),e.tag=1,fn(r)?(t=!0,Xu(e)):t=!1,io(e,n),e0(e,r,i),Wh(e,r,i,n),Kh(null,e,r,!0,t,n);case 19:return l0(t,e,n);case 22:return i0(t,e,n)}throw Error(W(156,e.tag))};function I0(t,e){return X_(t,e)}function iR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,e,n,r){return new iR(t,e,n,r)}function Rp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sR(t){if(typeof t=="function")return Rp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wf)return 11;if(t===qf)return 14}return 2}function Ai(t,e){var n=t.alternate;return n===null?(n=jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Rp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $s:return us(n.children,i,s,e);case Hf:o=8,i|=8;break;case mh:return t=jn(12,n,e,i|2),t.elementType=mh,t.lanes=s,t;case gh:return t=jn(13,n,e,i),t.elementType=gh,t.lanes=s,t;case yh:return t=jn(19,n,e,i),t.elementType=yh,t.lanes=s,t;case j_:return Bc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k_:o=10;break e;case D_:o=9;break e;case Wf:o=11;break e;case qf:o=14;break e;case li:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=jn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function us(t,e,n,r){return t=jn(7,t,r,e),t.lanes=n,t}function Bc(t,e,n,r){return t=jn(22,t,r,e),t.elementType=j_,t.lanes=n,t.stateNode={isHidden:!1},t}function Qd(t,e,n){return t=jn(6,t,null,e),t.lanes=n,t}function Kd(t,e,n){return e=jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nd(0),this.expirationTimes=Nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ap(t,e,n,r,i,s,o,l,u){return t=new oR(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cp(s),t}function aR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function S0(t){if(!t)return ki;t=t._reactInternals;e:{if(Ss(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(fn(n))return Sw(t,n,e)}return e}function R0(t,e,n,r,i,s,o,l,u){return t=Ap(n,r,!0,t,i,s,o,l,u),t.context=S0(null),n=t.current,r=sn(),i=Ri(n),s=Dr(r,i),s.callback=e??null,Ii(n,s,i),t.current.lanes=i,dl(t,i,r),pn(t,r),t}function $c(t,e,n,r){var i=e.current,s=sn(),o=Ri(i);return n=S0(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ii(i,e,o),t!==null&&(Yn(t,i,o,s),Tu(t,i,o)),o}function cc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Np(t,e){Sy(t,e),(t=t.alternate)&&Sy(t,e)}function lR(){return null}var A0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cp(t){this._internalRoot=t}Hc.prototype.render=Cp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));$c(t,e,null,null)};Hc.prototype.unmount=Cp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){$c(null,t,null,null)}),e[Fr]=null}};function Hc(t){this._internalRoot=t}Hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=iw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ci.length&&e!==0&&e<ci[n].priority;n++);ci.splice(n,0,t),n===0&&ow(t)}};function Pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ry(){}function uR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=cc(o);s.call(c)}}var o=R0(e,r,t,0,null,!1,!1,"",Ry);return t._reactRootContainer=o,t[Fr]=o.current,$a(t.nodeType===8?t.parentNode:t),ys(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=cc(u);l.call(c)}}var u=Ap(t,0,!1,null,null,!1,!1,"",Ry);return t._reactRootContainer=u,t[Fr]=u.current,$a(t.nodeType===8?t.parentNode:t),ys(function(){$c(e,u,n,r)}),u}function qc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=cc(o);l.call(u)}}$c(e,o,t,i)}else o=uR(n,e,t,i,r);return cc(o)}nw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fa(e.pendingLanes);n!==0&&(Gf(e,n|1),pn(e,Tt()),!(De&6)&&(yo=Tt()+500,Ui()))}break;case 13:ys(function(){var r=zr(t,1);if(r!==null){var i=sn();Yn(r,t,1,i)}}),Np(t,1)}};Yf=function(t){if(t.tag===13){var e=zr(t,134217728);if(e!==null){var n=sn();Yn(e,t,134217728,n)}Np(t,134217728)}};rw=function(t){if(t.tag===13){var e=Ri(t),n=zr(t,e);if(n!==null){var r=sn();Yn(n,t,e,r)}Np(t,e)}};iw=function(){return Be};sw=function(t,e){var n=Be;try{return Be=t,e()}finally{Be=n}};Ah=function(t,e,n){switch(e){case"input":if(wh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lc(r);if(!i)throw Error(W(90));L_(r),wh(r,i)}}}break;case"textarea":V_(t,n);break;case"select":e=n.value,e!=null&&eo(t,!!n.multiple,e,!1)}};W_=Tp;q_=ys;var cR={usingClientEntryPoint:!1,Events:[fl,Qs,Lc,$_,H_,Tp]},ia={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dR={bundleType:ia.bundleType,version:ia.version,rendererPackageName:ia.rendererPackageName,rendererConfig:ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=G_(t),t===null?null:t.stateNode},findFiberByHostInstance:ia.findFiberByHostInstance||lR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{kc=lu.inject(dR),cr=lu}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cR;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pp(e))throw Error(W(200));return aR(t,e,null,n)};Nn.createRoot=function(t,e){if(!Pp(t))throw Error(W(299));var n=!1,r="",i=A0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ap(t,1,!1,null,null,n,!1,r,i),t[Fr]=e.current,$a(t.nodeType===8?t.parentNode:t),new Cp(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=G_(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return ys(t)};Nn.hydrate=function(t,e,n){if(!Wc(e))throw Error(W(200));return qc(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!Pp(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=A0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=R0(e,null,t,1,n??null,i,!1,s,o),t[Fr]=e.current,$a(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Hc(e)};Nn.render=function(t,e,n){if(!Wc(e))throw Error(W(200));return qc(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!Wc(t))throw Error(W(40));return t._reactRootContainer?(ys(function(){qc(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};Nn.unstable_batchedUpdates=Tp;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wc(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return qc(t,e,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function N0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N0)}catch(t){console.error(t)}}N0(),N_.exports=Nn;var bp=N_.exports;const hR=m_(bp),fR=p_({__proto__:null,default:hR},[bp]);var Ay=bp;fh.createRoot=Ay.createRoot,fh.hydrateRoot=Ay.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ot(){return ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ot.apply(this,arguments)}var Rt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rt||(Rt={}));const Ny="popstate";function pR(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Ja("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vs(i)}return gR(e,n,null,t)}function we(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mR(){return Math.random().toString(36).substr(2,8)}function Cy(t,e){return{usr:t.state,key:t.key,idx:e}}function Ja(t,e,n,r){return n===void 0&&(n=null),ot({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fi(e):e,{state:n,key:e&&e.key||r||mR()})}function vs(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function gR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Rt.Pop,u=null,c=f();c==null&&(c=0,o.replaceState(ot({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=Rt.Pop;let D=f(),I=D==null?null:D-c;c=D,u&&u({action:l,location:N.location,delta:I})}function g(D,I){l=Rt.Push;let w=Ja(N.location,D,I);c=f()+1;let R=Cy(w,c),j=N.createHref(w);try{o.pushState(R,"",j)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(j)}s&&u&&u({action:l,location:N.location,delta:1})}function E(D,I){l=Rt.Replace;let w=Ja(N.location,D,I);c=f();let R=Cy(w,c),j=N.createHref(w);o.replaceState(R,"",j),s&&u&&u({action:l,location:N.location,delta:0})}function S(D){let I=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof D=="string"?D:vs(D);return w=w.replace(/ $/,"%20"),we(I,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,I)}let N={get action(){return l},get location(){return t(i,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Ny,p),u=D,()=>{i.removeEventListener(Ny,p),u=null}},createHref(D){return e(i,D)},createURL:S,encodeLocation(D){let I=S(D);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:g,replace:E,go(D){return o.go(D)}};return N}var ze;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ze||(ze={}));const yR=new Set(["lazy","caseSensitive","path","id","index","children"]);function vR(t){return t.index===!0}function dc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],l=typeof i.id=="string"?i.id:o.join("-");if(we(i.index!==!0||!i.children,"Cannot specify children on an index route"),we(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),vR(i)){let u=ot({},i,e(i),{id:l});return r[l]=u,u}else{let u=ot({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=dc(i.children,e,o,r)),u}})}function es(t,e,n){return n===void 0&&(n="/"),Pu(t,e,n,!1)}function Pu(t,e,n,r){let i=typeof e=="string"?Fi(e):e,s=$r(i.pathname||"/",n);if(s==null)return null;let o=C0(t);wR(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=bR(s);l=CR(o[u],c,r)}return l}function _R(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function C0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(we(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=jr([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(we(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),C0(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:AR(c,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of P0(s.path))i(s,o,u)}),e}function P0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=P0(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function wR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:NR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ER=/^:[\w-]+$/,xR=3,TR=2,IR=1,SR=10,RR=-2,Py=t=>t==="*";function AR(t,e){let n=t.split("/"),r=n.length;return n.some(Py)&&(r+=RR),e&&(r+=TR),n.filter(i=>!Py(i)).reduce((i,s)=>i+(ER.test(s)?xR:s===""?IR:SR),r)}function NR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function CR(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=hc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),g=u.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=hc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:jr([s,p.pathname]),pathnameBase:jR(jr([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=jr([s,p.pathnameBase]))}return o}function hc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,f,p)=>{let{paramName:g,isOptional:E}=f;if(g==="*"){let N=l[p]||"";o=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const S=l[p];return E&&!S?c[g]=void 0:c[g]=(S||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function PR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function bR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vo(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $r(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fi(t):t;return{pathname:n?n.startsWith("/")?n:DR(n,e):e,search:OR(r),hash:LR(i)}}function DR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Gd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function b0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kp(t,e){let n=b0(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Dp(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fi(t):(i=ot({},t),we(!i.pathname||!i.pathname.includes("?"),Gd("?","pathname","search",i)),we(!i.pathname||!i.pathname.includes("#"),Gd("#","pathname","hash",i)),we(!i.search||!i.search.includes("#"),Gd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=kR(i,l),c=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const jr=t=>t.join("/").replace(/\/\/+/g,"/"),jR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),OR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class fc{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Za(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const k0=["post","put","patch","delete"],MR=new Set(k0),VR=["get",...k0],UR=new Set(VR),FR=new Set([301,302,303,307,308]),zR=new Set([307,308]),Yd={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},BR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},jp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$R=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),D0="remix-router-transitions";function HR(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;we(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let P=t.detectErrorBoundary;i=O=>({hasErrorBoundary:P(O)})}else i=$R;let s={},o=dc(t.routes,i,void 0,s),l,u=t.basename||"/",c=t.dataStrategy||KR,f=t.patchRoutesOnNavigation,p=ot({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,E=new Set,S=null,N=null,D=null,I=t.hydrationData!=null,w=es(o,t.history.location,u),R=!1,j=null;if(w==null&&!f){let P=ln(404,{pathname:t.history.location.pathname}),{matches:O,route:M}=zy(o);w=O,j={[M.id]:P}}w&&!t.hydrationData&&Ki(w,o,t.history.location.pathname).active&&(w=null);let U;if(w)if(w.some(P=>P.route.lazy))U=!1;else if(!w.some(P=>P.route.loader))U=!0;else if(p.v7_partialHydration){let P=t.hydrationData?t.hydrationData.loaderData:null,O=t.hydrationData?t.hydrationData.errors:null;if(O){let M=w.findIndex($=>O[$.route.id]!==void 0);U=w.slice(0,M+1).every($=>!lf($.route,P,O))}else U=w.every(M=>!lf(M.route,P,O))}else U=t.hydrationData!=null;else if(U=!1,w=[],p.v7_partialHydration){let P=Ki(null,o,t.history.location.pathname);P.active&&P.matches&&(R=!0,w=P.matches)}let F,y={historyAction:t.history.action,location:t.history.location,matches:w,initialized:U,navigation:Yd,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||j,fetchers:new Map,blockers:new Map},v=Rt.Pop,T=!1,x,C=!1,b=new Map,A=null,Ce=!1,Ke=!1,re=[],Re=new Set,B=new Map,ie=0,se=-1,Ee=new Map,ae=new Set,Te=new Map,lt=new Map,He=new Set,We=new Map,Xe=new Map,Fn;function tr(){if(g=t.history.listen(P=>{let{action:O,location:M,delta:$}=P;if(Fn){Fn(),Fn=void 0;return}vo(Xe.size===0||$!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let K=zo({currentLocation:y.location,nextLocation:M,historyAction:O});if(K&&$!=null){let te=new Promise(ce=>{Fn=ce});t.history.go($*-1),Wi(K,{state:"blocked",location:M,proceed(){Wi(K,{state:"proceeding",proceed:void 0,reset:void 0,location:M}),te.then(()=>t.history.go($))},reset(){let ce=new Map(y.blockers);ce.set(K,sa),qe({blockers:ce})}});return}return Ie(O,M)}),n){lA(e,b);let P=()=>uA(e,b);e.addEventListener("pagehide",P),A=()=>e.removeEventListener("pagehide",P)}return y.initialized||Ie(Rt.Pop,y.location,{initialHydration:!0}),F}function gn(){g&&g(),A&&A(),E.clear(),x&&x.abort(),y.fetchers.forEach((P,O)=>Ps(O)),y.blockers.forEach((P,O)=>ks(O))}function nr(P){return E.add(P),()=>E.delete(P)}function qe(P,O){O===void 0&&(O={}),y=ot({},y,P);let M=[],$=[];p.v7_fetcherPersist&&y.fetchers.forEach((K,te)=>{K.state==="idle"&&(He.has(te)?$.push(te):M.push(te))}),He.forEach(K=>{!y.fetchers.has(K)&&!B.has(K)&&$.push(K)}),[...E].forEach(K=>K(y,{deletedFetchers:$,viewTransitionOpts:O.viewTransitionOpts,flushSync:O.flushSync===!0})),p.v7_fetcherPersist?(M.forEach(K=>y.fetchers.delete(K)),$.forEach(K=>Ps(K))):$.forEach(K=>He.delete(K))}function le(P,O,M){var $,K;let{flushSync:te}=M===void 0?{}:M,ce=y.actionData!=null&&y.navigation.formMethod!=null&&Qn(y.navigation.formMethod)&&y.navigation.state==="loading"&&(($=P.state)==null?void 0:$._isRedirect)!==!0,Z;O.actionData?Object.keys(O.actionData).length>0?Z=O.actionData:Z=null:ce?Z=y.actionData:Z=null;let J=O.loaderData?Uy(y.loaderData,O.loaderData,O.matches||[],O.errors):y.loaderData,Y=y.blockers;Y.size>0&&(Y=new Map(Y),Y.forEach((ve,It)=>Y.set(It,sa)));let ne=T===!0||y.navigation.formMethod!=null&&Qn(y.navigation.formMethod)&&((K=P.state)==null?void 0:K._isRedirect)!==!0;l&&(o=l,l=void 0),Ce||v===Rt.Pop||(v===Rt.Push?t.history.push(P,P.state):v===Rt.Replace&&t.history.replace(P,P.state));let he;if(v===Rt.Pop){let ve=b.get(y.location.pathname);ve&&ve.has(P.pathname)?he={currentLocation:y.location,nextLocation:P}:b.has(P.pathname)&&(he={currentLocation:P,nextLocation:y.location})}else if(C){let ve=b.get(y.location.pathname);ve?ve.add(P.pathname):(ve=new Set([P.pathname]),b.set(y.location.pathname,ve)),he={currentLocation:y.location,nextLocation:P}}qe(ot({},O,{actionData:Z,loaderData:J,historyAction:v,location:P,initialized:!0,navigation:Yd,revalidation:"idle",restoreScrollPosition:Qi(P,O.matches||y.matches),preventScrollReset:ne,blockers:Y}),{viewTransitionOpts:he,flushSync:te===!0}),v=Rt.Pop,T=!1,C=!1,Ce=!1,Ke=!1,re=[]}async function _e(P,O){if(typeof P=="number"){t.history.go(P);return}let M=af(y.location,y.matches,u,p.v7_prependBasename,P,p.v7_relativeSplatPath,O==null?void 0:O.fromRouteId,O==null?void 0:O.relative),{path:$,submission:K,error:te}=by(p.v7_normalizeFormMethod,!1,M,O),ce=y.location,Z=Ja(y.location,$,O&&O.state);Z=ot({},Z,t.history.encodeLocation(Z));let J=O&&O.replace!=null?O.replace:void 0,Y=Rt.Push;J===!0?Y=Rt.Replace:J===!1||K!=null&&Qn(K.formMethod)&&K.formAction===y.location.pathname+y.location.search&&(Y=Rt.Replace);let ne=O&&"preventScrollReset"in O?O.preventScrollReset===!0:void 0,he=(O&&O.flushSync)===!0,ve=zo({currentLocation:ce,nextLocation:Z,historyAction:Y});if(ve){Wi(ve,{state:"blocked",location:Z,proceed(){Wi(ve,{state:"proceeding",proceed:void 0,reset:void 0,location:Z}),_e(P,O)},reset(){let It=new Map(y.blockers);It.set(ve,sa),qe({blockers:It})}});return}return await Ie(Y,Z,{submission:K,pendingError:te,preventScrollReset:ne,replace:O&&O.replace,enableViewTransition:O&&O.viewTransition,flushSync:he})}function ut(){if(Ve(),qe({revalidation:"loading"}),y.navigation.state!=="submitting"){if(y.navigation.state==="idle"){Ie(y.historyAction,y.location,{startUninterruptedRevalidation:!0});return}Ie(v||y.historyAction,y.navigation.location,{overrideNavigation:y.navigation,enableViewTransition:C===!0})}}async function Ie(P,O,M){x&&x.abort(),x=null,v=P,Ce=(M&&M.startUninterruptedRevalidation)===!0,kl(y.location,y.matches),T=(M&&M.preventScrollReset)===!0,C=(M&&M.enableViewTransition)===!0;let $=l||o,K=M&&M.overrideNavigation,te=M!=null&&M.initialHydration&&y.matches&&y.matches.length>0&&!R?y.matches:es($,O,u),ce=(M&&M.flushSync)===!0;if(te&&y.initialized&&!Ke&&eA(y.location,O)&&!(M&&M.submission&&Qn(M.submission.formMethod))){le(O,{matches:te},{flushSync:ce});return}let Z=Ki(te,$,O.pathname);if(Z.active&&Z.matches&&(te=Z.matches),!te){let{error:Fe,notFoundMatches:Ae,route:Ge}=vr(O.pathname);le(O,{matches:Ae,loaderData:{},errors:{[Ge.id]:Fe}},{flushSync:ce});return}x=new AbortController;let J=Vs(t.history,O,x.signal,M&&M.submission),Y;if(M&&M.pendingError)Y=[ts(te).route.id,{type:ze.error,error:M.pendingError}];else if(M&&M.submission&&Qn(M.submission.formMethod)){let Fe=await Q(J,O,M.submission,te,Z.active,{replace:M.replace,flushSync:ce});if(Fe.shortCircuited)return;if(Fe.pendingActionResult){let[Ae,Ge]=Fe.pendingActionResult;if(xn(Ge)&&Za(Ge.error)&&Ge.error.status===404){x=null,le(O,{matches:Fe.matches,loaderData:{},errors:{[Ae]:Ge.error}});return}}te=Fe.matches||te,Y=Fe.pendingActionResult,K=Xd(O,M.submission),ce=!1,Z.active=!1,J=Vs(t.history,J.url,J.signal)}let{shortCircuited:ne,matches:he,loaderData:ve,errors:It}=await ue(J,O,te,Z.active,K,M&&M.submission,M&&M.fetcherSubmission,M&&M.replace,M&&M.initialHydration===!0,ce,Y);ne||(x=null,le(O,ot({matches:he||te},Fy(Y),{loaderData:ve,errors:It})))}async function Q(P,O,M,$,K,te){te===void 0&&(te={}),Ve();let ce=oA(O,M);if(qe({navigation:ce},{flushSync:te.flushSync===!0}),K){let Y=await ir($,O.pathname,P.signal);if(Y.type==="aborted")return{shortCircuited:!0};if(Y.type==="error"){let ne=ts(Y.partialMatches).route.id;return{matches:Y.partialMatches,pendingActionResult:[ne,{type:ze.error,error:Y.error}]}}else if(Y.matches)$=Y.matches;else{let{notFoundMatches:ne,error:he,route:ve}=vr(O.pathname);return{matches:ne,pendingActionResult:[ve.id,{type:ze.error,error:he}]}}}let Z,J=ma($,O);if(!J.route.action&&!J.route.lazy)Z={type:ze.error,error:ln(405,{method:P.method,pathname:O.pathname,routeId:J.route.id})};else if(Z=(await je("action",y,P,[J],$,null))[J.route.id],P.signal.aborted)return{shortCircuited:!0};if(ss(Z)){let Y;return te&&te.replace!=null?Y=te.replace:Y=Ly(Z.response.headers.get("Location"),new URL(P.url),u)===y.location.pathname+y.location.search,await mt(P,Z,!0,{submission:M,replace:Y}),{shortCircuited:!0}}if(vi(Z))throw ln(400,{type:"defer-action"});if(xn(Z)){let Y=ts($,J.route.id);return(te&&te.replace)!==!0&&(v=Rt.Push),{matches:$,pendingActionResult:[Y.route.id,Z]}}return{matches:$,pendingActionResult:[J.route.id,Z]}}async function ue(P,O,M,$,K,te,ce,Z,J,Y,ne){let he=K||Xd(O,te),ve=te||ce||$y(he),It=!Ce&&(!p.v7_partialHydration||!J);if($){if(It){let Ze=ye(ne);qe(ot({navigation:he},Ze!==void 0?{actionData:Ze}:{}),{flushSync:Y})}let Pe=await ir(M,O.pathname,P.signal);if(Pe.type==="aborted")return{shortCircuited:!0};if(Pe.type==="error"){let Ze=ts(Pe.partialMatches).route.id;return{matches:Pe.partialMatches,loaderData:{},errors:{[Ze]:Pe.error}}}else if(Pe.matches)M=Pe.matches;else{let{error:Ze,notFoundMatches:Er,route:ei}=vr(O.pathname);return{matches:Er,loaderData:{},errors:{[ei.id]:Ze}}}}let Fe=l||o,[Ae,Ge]=Dy(t.history,y,M,ve,O,p.v7_partialHydration&&J===!0,p.v7_skipActionErrorRevalidation,Ke,re,Re,He,Te,ae,Fe,u,ne);if(qi(Pe=>!(M&&M.some(Ze=>Ze.route.id===Pe))||Ae&&Ae.some(Ze=>Ze.route.id===Pe)),se=++ie,Ae.length===0&&Ge.length===0){let Pe=bs();return le(O,ot({matches:M,loaderData:{},errors:ne&&xn(ne[1])?{[ne[0]]:ne[1].error}:null},Fy(ne),Pe?{fetchers:new Map(y.fetchers)}:{}),{flushSync:Y}),{shortCircuited:!0}}if(It){let Pe={};if(!$){Pe.navigation=he;let Ze=ye(ne);Ze!==void 0&&(Pe.actionData=Ze)}Ge.length>0&&(Pe.fetchers=Je(Ge)),qe(Pe,{flushSync:Y})}Ge.forEach(Pe=>{zn(Pe.key),Pe.controller&&B.set(Pe.key,Pe.controller)});let _r=()=>Ge.forEach(Pe=>zn(Pe.key));x&&x.signal.addEventListener("abort",_r);let{loaderResults:Jr,fetcherResults:Bn}=await de(y,M,Ae,Ge,P);if(P.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",_r),Ge.forEach(Pe=>B.delete(Pe.key));let en=uu(Jr);if(en)return await mt(P,en.result,!0,{replace:Z}),{shortCircuited:!0};if(en=uu(Bn),en)return ae.add(en.key),await mt(P,en.result,!0,{replace:Z}),{shortCircuited:!0};let{loaderData:Ds,errors:wr}=Vy(y,M,Jr,ne,Ge,Bn,We);We.forEach((Pe,Ze)=>{Pe.subscribe(Er=>{(Er||Pe.done)&&We.delete(Ze)})}),p.v7_partialHydration&&J&&y.errors&&(wr=ot({},y.errors,wr));let yn=bs(),bn=bl(se),Zr=yn||bn||Ge.length>0;return ot({matches:M,loaderData:Ds,errors:wr},Zr?{fetchers:new Map(y.fetchers)}:{})}function ye(P){if(P&&!xn(P[1]))return{[P[0]]:P[1].data};if(y.actionData)return Object.keys(y.actionData).length===0?null:y.actionData}function Je(P){return P.forEach(O=>{let M=y.fetchers.get(O.key),$=oa(void 0,M?M.data:void 0);y.fetchers.set(O.key,$)}),new Map(y.fetchers)}function Me(P,O,M,$){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");zn(P);let K=($&&$.flushSync)===!0,te=l||o,ce=af(y.location,y.matches,u,p.v7_prependBasename,M,p.v7_relativeSplatPath,O,$==null?void 0:$.relative),Z=es(te,ce,u),J=Ki(Z,te,ce);if(J.active&&J.matches&&(Z=J.matches),!Z){Pn(P,O,ln(404,{pathname:ce}),{flushSync:K});return}let{path:Y,submission:ne,error:he}=by(p.v7_normalizeFormMethod,!0,ce,$);if(he){Pn(P,O,he,{flushSync:K});return}let ve=ma(Z,Y),It=($&&$.preventScrollReset)===!0;if(ne&&Qn(ne.formMethod)){ke(P,O,Y,ve,Z,J.active,K,It,ne);return}Te.set(P,{routeId:O,path:Y}),wt(P,O,Y,ve,Z,J.active,K,It,ne)}async function ke(P,O,M,$,K,te,ce,Z,J){Ve(),Te.delete(P);function Y(st){if(!st.route.action&&!st.route.lazy){let sr=ln(405,{method:J.formMethod,pathname:M,routeId:O});return Pn(P,O,sr,{flushSync:ce}),!0}return!1}if(!te&&Y($))return;let ne=y.fetchers.get(P);Ue(P,aA(J,ne),{flushSync:ce});let he=new AbortController,ve=Vs(t.history,M,he.signal,J);if(te){let st=await ir(K,new URL(ve.url).pathname,ve.signal,P);if(st.type==="aborted")return;if(st.type==="error"){Pn(P,O,st.error,{flushSync:ce});return}else if(st.matches){if(K=st.matches,$=ma(K,M),Y($))return}else{Pn(P,O,ln(404,{pathname:M}),{flushSync:ce});return}}B.set(P,he);let It=ie,Ae=(await je("action",y,ve,[$],K,P))[$.route.id];if(ve.signal.aborted){B.get(P)===he&&B.delete(P);return}if(p.v7_fetcherPersist&&He.has(P)){if(ss(Ae)||xn(Ae)){Ue(P,ai(void 0));return}}else{if(ss(Ae))if(B.delete(P),se>It){Ue(P,ai(void 0));return}else return ae.add(P),Ue(P,oa(J)),mt(ve,Ae,!1,{fetcherSubmission:J,preventScrollReset:Z});if(xn(Ae)){Pn(P,O,Ae.error);return}}if(vi(Ae))throw ln(400,{type:"defer-action"});let Ge=y.navigation.location||y.location,_r=Vs(t.history,Ge,he.signal),Jr=l||o,Bn=y.navigation.state!=="idle"?es(Jr,y.navigation.location,u):y.matches;we(Bn,"Didn't find any matches after fetcher action");let en=++ie;Ee.set(P,en);let Ds=oa(J,Ae.data);y.fetchers.set(P,Ds);let[wr,yn]=Dy(t.history,y,Bn,J,Ge,!1,p.v7_skipActionErrorRevalidation,Ke,re,Re,He,Te,ae,Jr,u,[$.route.id,Ae]);yn.filter(st=>st.key!==P).forEach(st=>{let sr=st.key,$o=y.fetchers.get(sr),jl=oa(void 0,$o?$o.data:void 0);y.fetchers.set(sr,jl),zn(sr),st.controller&&B.set(sr,st.controller)}),qe({fetchers:new Map(y.fetchers)});let bn=()=>yn.forEach(st=>zn(st.key));he.signal.addEventListener("abort",bn);let{loaderResults:Zr,fetcherResults:Pe}=await de(y,Bn,wr,yn,_r);if(he.signal.aborted)return;he.signal.removeEventListener("abort",bn),Ee.delete(P),B.delete(P),yn.forEach(st=>B.delete(st.key));let Ze=uu(Zr);if(Ze)return mt(_r,Ze.result,!1,{preventScrollReset:Z});if(Ze=uu(Pe),Ze)return ae.add(Ze.key),mt(_r,Ze.result,!1,{preventScrollReset:Z});let{loaderData:Er,errors:ei}=Vy(y,Bn,Zr,void 0,yn,Pe,We);if(y.fetchers.has(P)){let st=ai(Ae.data);y.fetchers.set(P,st)}bl(en),y.navigation.state==="loading"&&en>se?(we(v,"Expected pending action"),x&&x.abort(),le(y.navigation.location,{matches:Bn,loaderData:Er,errors:ei,fetchers:new Map(y.fetchers)})):(qe({errors:ei,loaderData:Uy(y.loaderData,Er,Bn,ei),fetchers:new Map(y.fetchers)}),Ke=!1)}async function wt(P,O,M,$,K,te,ce,Z,J){let Y=y.fetchers.get(P);Ue(P,oa(J,Y?Y.data:void 0),{flushSync:ce});let ne=new AbortController,he=Vs(t.history,M,ne.signal);if(te){let Ae=await ir(K,new URL(he.url).pathname,he.signal,P);if(Ae.type==="aborted")return;if(Ae.type==="error"){Pn(P,O,Ae.error,{flushSync:ce});return}else if(Ae.matches)K=Ae.matches,$=ma(K,M);else{Pn(P,O,ln(404,{pathname:M}),{flushSync:ce});return}}B.set(P,ne);let ve=ie,Fe=(await je("loader",y,he,[$],K,P))[$.route.id];if(vi(Fe)&&(Fe=await Op(Fe,he.signal,!0)||Fe),B.get(P)===ne&&B.delete(P),!he.signal.aborted){if(He.has(P)){Ue(P,ai(void 0));return}if(ss(Fe))if(se>ve){Ue(P,ai(void 0));return}else{ae.add(P),await mt(he,Fe,!1,{preventScrollReset:Z});return}if(xn(Fe)){Pn(P,O,Fe.error);return}we(!vi(Fe),"Unhandled fetcher deferred data"),Ue(P,ai(Fe.data))}}async function mt(P,O,M,$){let{submission:K,fetcherSubmission:te,preventScrollReset:ce,replace:Z}=$===void 0?{}:$;O.response.headers.has("X-Remix-Revalidate")&&(Ke=!0);let J=O.response.headers.get("Location");we(J,"Expected a Location header on the redirect Response"),J=Ly(J,new URL(P.url),u);let Y=Ja(y.location,J,{_isRedirect:!0});if(n){let Ae=!1;if(O.response.headers.has("X-Remix-Reload-Document"))Ae=!0;else if(jp.test(J)){const Ge=t.history.createURL(J);Ae=Ge.origin!==e.location.origin||$r(Ge.pathname,u)==null}if(Ae){Z?e.location.replace(J):e.location.assign(J);return}}x=null;let ne=Z===!0||O.response.headers.has("X-Remix-Replace")?Rt.Replace:Rt.Push,{formMethod:he,formAction:ve,formEncType:It}=y.navigation;!K&&!te&&he&&ve&&It&&(K=$y(y.navigation));let Fe=K||te;if(zR.has(O.response.status)&&Fe&&Qn(Fe.formMethod))await Ie(ne,Y,{submission:ot({},Fe,{formAction:J}),preventScrollReset:ce||T,enableViewTransition:M?C:void 0});else{let Ae=Xd(Y,K);await Ie(ne,Y,{overrideNavigation:Ae,fetcherSubmission:te,preventScrollReset:ce||T,enableViewTransition:M?C:void 0})}}async function je(P,O,M,$,K,te){let ce,Z={};try{ce=await GR(c,P,O,M,$,K,te,s,i)}catch(J){return $.forEach(Y=>{Z[Y.route.id]={type:ze.error,error:J}}),Z}for(let[J,Y]of Object.entries(ce))if(tA(Y)){let ne=Y.result;Z[J]={type:ze.redirect,response:JR(ne,M,J,K,u,p.v7_relativeSplatPath)}}else Z[J]=await XR(Y);return Z}async function de(P,O,M,$,K){let te=P.matches,ce=je("loader",P,K,M,O,null),Z=Promise.all($.map(async ne=>{if(ne.matches&&ne.match&&ne.controller){let ve=(await je("loader",P,Vs(t.history,ne.path,ne.controller.signal),[ne.match],ne.matches,ne.key))[ne.match.route.id];return{[ne.key]:ve}}else return Promise.resolve({[ne.key]:{type:ze.error,error:ln(404,{pathname:ne.path})}})})),J=await ce,Y=(await Z).reduce((ne,he)=>Object.assign(ne,he),{});return await Promise.all([iA(O,J,K.signal,te,P.loaderData),sA(O,Y,$)]),{loaderResults:J,fetcherResults:Y}}function Ve(){Ke=!0,re.push(...qi()),Te.forEach((P,O)=>{B.has(O)&&Re.add(O),zn(O)})}function Ue(P,O,M){M===void 0&&(M={}),y.fetchers.set(P,O),qe({fetchers:new Map(y.fetchers)},{flushSync:(M&&M.flushSync)===!0})}function Pn(P,O,M,$){$===void 0&&($={});let K=ts(y.matches,O);Ps(P),qe({errors:{[K.route.id]:M},fetchers:new Map(y.fetchers)},{flushSync:($&&$.flushSync)===!0})}function Uo(P){return lt.set(P,(lt.get(P)||0)+1),He.has(P)&&He.delete(P),y.fetchers.get(P)||BR}function Ps(P){let O=y.fetchers.get(P);B.has(P)&&!(O&&O.state==="loading"&&Ee.has(P))&&zn(P),Te.delete(P),Ee.delete(P),ae.delete(P),p.v7_fetcherPersist&&He.delete(P),Re.delete(P),y.fetchers.delete(P)}function Hi(P){let O=(lt.get(P)||0)-1;O<=0?(lt.delete(P),He.add(P),p.v7_fetcherPersist||Ps(P)):lt.set(P,O),qe({fetchers:new Map(y.fetchers)})}function zn(P){let O=B.get(P);O&&(O.abort(),B.delete(P))}function Fo(P){for(let O of P){let M=Uo(O),$=ai(M.data);y.fetchers.set(O,$)}}function bs(){let P=[],O=!1;for(let M of ae){let $=y.fetchers.get(M);we($,"Expected fetcher: "+M),$.state==="loading"&&(ae.delete(M),P.push(M),O=!0)}return Fo(P),O}function bl(P){let O=[];for(let[M,$]of Ee)if($<P){let K=y.fetchers.get(M);we(K,"Expected fetcher: "+M),K.state==="loading"&&(zn(M),Ee.delete(M),O.push(M))}return Fo(O),O.length>0}function yd(P,O){let M=y.blockers.get(P)||sa;return Xe.get(P)!==O&&Xe.set(P,O),M}function ks(P){y.blockers.delete(P),Xe.delete(P)}function Wi(P,O){let M=y.blockers.get(P)||sa;we(M.state==="unblocked"&&O.state==="blocked"||M.state==="blocked"&&O.state==="blocked"||M.state==="blocked"&&O.state==="proceeding"||M.state==="blocked"&&O.state==="unblocked"||M.state==="proceeding"&&O.state==="unblocked","Invalid blocker state transition: "+M.state+" -> "+O.state);let $=new Map(y.blockers);$.set(P,O),qe({blockers:$})}function zo(P){let{currentLocation:O,nextLocation:M,historyAction:$}=P;if(Xe.size===0)return;Xe.size>1&&vo(!1,"A router only supports one blocker at a time");let K=Array.from(Xe.entries()),[te,ce]=K[K.length-1],Z=y.blockers.get(te);if(!(Z&&Z.state==="proceeding")&&ce({currentLocation:O,nextLocation:M,historyAction:$}))return te}function vr(P){let O=ln(404,{pathname:P}),M=l||o,{matches:$,route:K}=zy(M);return qi(),{notFoundMatches:$,route:K,error:O}}function qi(P){let O=[];return We.forEach((M,$)=>{(!P||P($))&&(M.cancel(),O.push($),We.delete($))}),O}function Bo(P,O,M){if(S=P,D=O,N=M||null,!I&&y.navigation===Yd){I=!0;let $=Qi(y.location,y.matches);$!=null&&qe({restoreScrollPosition:$})}return()=>{S=null,D=null,N=null}}function rr(P,O){return N&&N(P,O.map($=>_R($,y.loaderData)))||P.key}function kl(P,O){if(S&&D){let M=rr(P,O);S[M]=D()}}function Qi(P,O){if(S){let M=rr(P,O),$=S[M];if(typeof $=="number")return $}return null}function Ki(P,O,M){if(f)if(P){if(Object.keys(P[0].params).length>0)return{active:!0,matches:Pu(O,M,u,!0)}}else return{active:!0,matches:Pu(O,M,u,!0)||[]};return{active:!1,matches:null}}async function ir(P,O,M,$){if(!f)return{type:"success",matches:P};let K=P;for(;;){let te=l==null,ce=l||o,Z=s;try{await f({signal:M,path:O,matches:K,fetcherKey:$,patch:(ne,he)=>{M.aborted||Oy(ne,he,ce,Z,i)}})}catch(ne){return{type:"error",error:ne,partialMatches:K}}finally{te&&!M.aborted&&(o=[...o])}if(M.aborted)return{type:"aborted"};let J=es(ce,O,u);if(J)return{type:"success",matches:J};let Y=Pu(ce,O,u,!0);if(!Y||K.length===Y.length&&K.every((ne,he)=>ne.route.id===Y[he].route.id))return{type:"success",matches:null};K=Y}}function Dl(P){s={},l=dc(P,i,void 0,s)}function Ot(P,O){let M=l==null;Oy(P,O,l||o,s,i),M&&(o=[...o],qe({}))}return F={get basename(){return u},get future(){return p},get state(){return y},get routes(){return o},get window(){return e},initialize:tr,subscribe:nr,enableScrollRestoration:Bo,navigate:_e,fetch:Me,revalidate:ut,createHref:P=>t.history.createHref(P),encodeLocation:P=>t.history.encodeLocation(P),getFetcher:Uo,deleteFetcher:Hi,dispose:gn,getBlocker:yd,deleteBlocker:ks,patchRoutes:Ot,_internalFetchControllers:B,_internalActiveDeferreds:We,_internalSetRoutes:Dl},F}function WR(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function af(t,e,n,r,i,s,o,l){let u,c;if(o){u=[];for(let p of e)if(u.push(p),p.route.id===o){c=p;break}}else u=e,c=e[e.length-1];let f=Dp(i||".",kp(u,s),$r(t.pathname,n)||t.pathname,l==="path");if(i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&c){let p=Lp(f.search);if(c.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&p){let g=new URLSearchParams(f.search),E=g.getAll("index");g.delete("index"),E.filter(N=>N).forEach(N=>g.append("index",N));let S=g.toString();f.search=S?"?"+S:""}}return r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:jr([n,f.pathname])),vs(f)}function by(t,e,n,r){if(!r||!WR(r))return{path:n};if(r.formMethod&&!rA(r.formMethod))return{path:n,error:ln(405,{method:r.formMethod})};let i=()=>({path:n,error:ln(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=L0(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Qn(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((E,S)=>{let[N,D]=S;return""+E+N+"="+D+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!Qn(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}we(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=uf(r.formData),c=r.formData;else if(r.body instanceof FormData)u=uf(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=My(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=My(u)}catch{return i()}let f={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Qn(f.formMethod))return{path:n,submission:f};let p=Fi(n);return e&&p.search&&Lp(p.search)&&u.append("index",""),p.search="?"+u,{path:vs(p),submission:f}}function ky(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Dy(t,e,n,r,i,s,o,l,u,c,f,p,g,E,S,N){let D=N?xn(N[1])?N[1].error:N[1].data:void 0,I=t.createURL(e.location),w=t.createURL(i),R=n;s&&e.errors?R=ky(n,Object.keys(e.errors)[0],!0):N&&xn(N[1])&&(R=ky(n,N[0]));let j=N?N[1].statusCode:void 0,U=o&&j&&j>=400,F=R.filter((v,T)=>{let{route:x}=v;if(x.lazy)return!0;if(x.loader==null)return!1;if(s)return lf(x,e.loaderData,e.errors);if(qR(e.loaderData,e.matches[T],v)||u.some(A=>A===v.route.id))return!0;let C=e.matches[T],b=v;return jy(v,ot({currentUrl:I,currentParams:C.params,nextUrl:w,nextParams:b.params},r,{actionResult:D,actionStatus:j,defaultShouldRevalidate:U?!1:l||I.pathname+I.search===w.pathname+w.search||I.search!==w.search||j0(C,b)}))}),y=[];return p.forEach((v,T)=>{if(s||!n.some(Ce=>Ce.route.id===v.routeId)||f.has(T))return;let x=es(E,v.path,S);if(!x){y.push({key:T,routeId:v.routeId,path:v.path,matches:null,match:null,controller:null});return}let C=e.fetchers.get(T),b=ma(x,v.path),A=!1;g.has(T)?A=!1:c.has(T)?(c.delete(T),A=!0):C&&C.state!=="idle"&&C.data===void 0?A=l:A=jy(b,ot({currentUrl:I,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:D,actionStatus:j,defaultShouldRevalidate:U?!1:l})),A&&y.push({key:T,routeId:v.routeId,path:v.path,matches:x,match:b,controller:new AbortController})}),[F,y]}function lf(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function qR(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function j0(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function jy(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Oy(t,e,n,r,i){var s;let o;if(t){let c=r[t];we(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let l=e.filter(c=>!o.some(f=>O0(c,f))),u=dc(l,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...u)}function O0(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>O0(n,s))}):!1}async function QR(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];we(i,"No route found in manifest");let s={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";vo(!u,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!yR.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,ot({},e(i),{lazy:void 0}))}async function KR(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function GR(t,e,n,r,i,s,o,l,u,c){let f=s.map(E=>E.route.lazy?QR(E.route,u,l):void 0),p=s.map((E,S)=>{let N=f[S],D=i.some(w=>w.route.id===E.route.id);return ot({},E,{shouldLoad:D,resolve:async w=>(w&&r.method==="GET"&&(E.route.lazy||E.route.loader)&&(D=!0),D?YR(e,r,E,N,w,c):Promise.resolve({type:ze.data,result:void 0}))})}),g=await t({matches:p,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(f)}catch{}return g}async function YR(t,e,n,r,i,s){let o,l,u=c=>{let f,p=new Promise((S,N)=>f=N);l=()=>f(),e.signal.addEventListener("abort",l);let g=S=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...S!==void 0?[S]:[]),E=(async()=>{try{return{type:"data",result:await(i?i(N=>g(N)):g())}}catch(S){return{type:"error",result:S}}})();return Promise.race([E,p])};try{let c=n.route[t];if(r)if(c){let f,[p]=await Promise.all([u(c).catch(g=>{f=g}),r]);if(f!==void 0)throw f;o=p}else if(await r,c=n.route[t],c)o=await u(c);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw ln(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:ze.data,result:void 0};else if(c)o=await u(c);else{let f=new URL(e.url),p=f.pathname+f.search;throw ln(404,{pathname:p})}we(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:ze.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function XR(t){let{result:e,type:n}=t;if(M0(e)){let p;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(g){return{type:ze.error,error:g}}return n===ze.error?{type:ze.error,error:new fc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:ze.data,data:p,statusCode:e.status,headers:e.headers}}if(n===ze.error){if(By(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:ze.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:ze.error,error:new fc(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Za(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:ze.error,error:e,statusCode:Za(e)?e.status:void 0}}if(nA(e)){var l,u;return{type:ze.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(By(e)){var c,f;return{type:ze.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:ze.data,data:e}}function JR(t,e,n,r,i,s){let o=t.headers.get("Location");if(we(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!jp.test(o)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=af(new URL(e.url),l,i,!0,o,s),t.headers.set("Location",o)}return t}function Ly(t,e,n){if(jp.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=$r(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Vs(t,e,n,r){let i=t.createURL(L0(e)).toString(),s={signal:n};if(r&&Qn(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=uf(r.formData):s.body=r.formData}return new Request(i,s)}function uf(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function My(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function ZR(t,e,n,r,i){let s={},o=null,l,u=!1,c={},f=n&&xn(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let g=p.route.id,E=e[g];if(we(!ss(E),"Cannot handle redirect results in processLoaderData"),xn(E)){let S=E.error;f!==void 0&&(S=f,f=void 0),o=o||{};{let N=ts(t,g);o[N.route.id]==null&&(o[N.route.id]=S)}s[g]=void 0,u||(u=!0,l=Za(E.error)?E.error.status:500),E.headers&&(c[g]=E.headers)}else vi(E)?(r.set(g,E.deferredData),s[g]=E.deferredData.data,E.statusCode!=null&&E.statusCode!==200&&!u&&(l=E.statusCode),E.headers&&(c[g]=E.headers)):(s[g]=E.data,E.statusCode&&E.statusCode!==200&&!u&&(l=E.statusCode),E.headers&&(c[g]=E.headers))}),f!==void 0&&n&&(o={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:c}}function Vy(t,e,n,r,i,s,o){let{loaderData:l,errors:u}=ZR(e,n,r,o);return i.forEach(c=>{let{key:f,match:p,controller:g}=c,E=s[f];if(we(E,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(xn(E)){let S=ts(t.matches,p==null?void 0:p.route.id);u&&u[S.route.id]||(u=ot({},u,{[S.route.id]:E.error})),t.fetchers.delete(f)}else if(ss(E))we(!1,"Unhandled fetcher revalidation redirect");else if(vi(E))we(!1,"Unhandled fetcher deferred data");else{let S=ai(E.data);t.fetchers.set(f,S)}}),{loaderData:l,errors:u}}function Uy(t,e,n,r){let i=ot({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function Fy(t){return t?xn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function ts(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function zy(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ln(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?u="defer() is not supported in actions":s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new fc(t||500,l,new Error(u),!0)}function uu(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(ss(i))return{key:r,result:i}}}function L0(t){let e=typeof t=="string"?Fi(t):t;return vs(ot({},e,{hash:""}))}function eA(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function tA(t){return M0(t.result)&&FR.has(t.result.status)}function vi(t){return t.type===ze.deferred}function xn(t){return t.type===ze.error}function ss(t){return(t&&t.type)===ze.redirect}function By(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function nA(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function M0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function rA(t){return UR.has(t.toLowerCase())}function Qn(t){return MR.has(t.toLowerCase())}async function iA(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[l,u]=s[o],c=t.find(g=>(g==null?void 0:g.route.id)===l);if(!c)continue;let f=r.find(g=>g.route.id===c.route.id),p=f!=null&&!j0(f,c)&&(i&&i[c.route.id])!==void 0;vi(u)&&p&&await Op(u,n,!1).then(g=>{g&&(e[l]=g)})}}async function sA(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],l=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&vi(l)&&(we(o,"Expected an AbortController for revalidating fetcher deferred result"),await Op(l,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function Op(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ze.data,data:t.deferredData.unwrappedData}}catch(i){return{type:ze.error,error:i}}return{type:ze.data,data:t.deferredData.data}}}function Lp(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ma(t,e){let n=typeof e=="string"?Fi(e).search:e.search;if(t[t.length-1].route.index&&Lp(n||""))return t[t.length-1];let r=b0(t);return r[r.length-1]}function $y(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Xd(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function oA(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function oa(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function aA(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ai(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function lA(t,e){try{let n=t.sessionStorage.getItem(D0);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function uA(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(D0,JSON.stringify(n))}catch(r){vo(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pc(){return pc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pc.apply(this,arguments)}const ml=k.createContext(null),Mp=k.createContext(null),zi=k.createContext(null),Vp=k.createContext(null),Xr=k.createContext({outlet:null,matches:[],isDataRoute:!1}),V0=k.createContext(null);function cA(t,e){let{relative:n}=e===void 0?{}:e;gl()||we(!1);let{basename:r,navigator:i}=k.useContext(zi),{hash:s,pathname:o,search:l}=Qc(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:jr([r,o])),i.createHref({pathname:u,search:l,hash:s})}function gl(){return k.useContext(Vp)!=null}function bo(){return gl()||we(!1),k.useContext(Vp).location}function U0(t){k.useContext(zi).static||k.useLayoutEffect(t)}function Rs(){let{isDataRoute:t}=k.useContext(Xr);return t?SA():dA()}function dA(){gl()||we(!1);let t=k.useContext(ml),{basename:e,future:n,navigator:r}=k.useContext(zi),{matches:i}=k.useContext(Xr),{pathname:s}=bo(),o=JSON.stringify(kp(i,n.v7_relativeSplatPath)),l=k.useRef(!1);return U0(()=>{l.current=!0}),k.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let p=Dp(c,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:jr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,s,t])}const hA=k.createContext(null);function fA(t){let e=k.useContext(Xr).outlet;return e&&k.createElement(hA.Provider,{value:t},e)}function pA(){let{matches:t}=k.useContext(Xr),e=t[t.length-1];return e?e.params:{}}function Qc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(zi),{matches:i}=k.useContext(Xr),{pathname:s}=bo(),o=JSON.stringify(kp(i,r.v7_relativeSplatPath));return k.useMemo(()=>Dp(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function mA(t,e,n,r){gl()||we(!1);let{navigator:i}=k.useContext(zi),{matches:s}=k.useContext(Xr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=bo(),f;f=c;let p=f.pathname||"/",g=p;if(u!=="/"){let N=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(N.length).join("/")}let E=es(t,{pathname:g});return wA(E&&E.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:jr([u,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:jr([u,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r)}function gA(){let t=IA(),e=Za(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,null)}const yA=k.createElement(gA,null);class vA extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Xr.Provider,{value:this.props.routeContext},k.createElement(V0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _A(t){let{routeContext:e,match:n,children:r}=t,i=k.useContext(ml);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Xr.Provider,{value:e},r)}function wA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||we(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:g,errors:E}=n,S=p.route.loader&&g[p.route.id]===void 0&&(!E||E[p.route.id]===void 0);if(p.route.lazy||S){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let E,S=!1,N=null,D=null;n&&(E=l&&p.route.id?l[p.route.id]:void 0,N=p.route.errorElement||yA,u&&(c<0&&g===0?(RA("route-fallback"),S=!0,D=null):c===g&&(S=!0,D=p.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,g+1)),w=()=>{let R;return E?R=N:S?R=D:p.route.Component?R=k.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=f,k.createElement(_A,{match:p,routeContext:{outlet:f,matches:I,isDataRoute:n!=null},children:R})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?k.createElement(vA,{location:n.location,revalidation:n.revalidation,component:N,error:E,children:w(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):w()},null)}var F0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(F0||{}),z0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(z0||{});function EA(t){let e=k.useContext(ml);return e||we(!1),e}function xA(t){let e=k.useContext(Mp);return e||we(!1),e}function TA(t){let e=k.useContext(Xr);return e||we(!1),e}function B0(t){let e=TA(),n=e.matches[e.matches.length-1];return n.route.id||we(!1),n.route.id}function IA(){var t;let e=k.useContext(V0),n=xA(z0.UseRouteError),r=B0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function SA(){let{router:t}=EA(F0.UseNavigateStable),e=B0(),n=k.useRef(!1);return U0(()=>{n.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,pc({fromRouteId:e},s)))},[t,e])}const Hy={};function RA(t,e,n){Hy[t]||(Hy[t]=!0)}function AA(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function NA(t){return fA(t.context)}function CA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Rt.Pop,navigator:s,static:o=!1,future:l}=t;gl()&&we(!1);let u=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:u,navigator:s,static:o,future:pc({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Fi(r));let{pathname:f="/",search:p="",hash:g="",state:E=null,key:S="default"}=r,N=k.useMemo(()=>{let D=$r(f,u);return D==null?null:{location:{pathname:D,search:p,hash:g,state:E,key:S},navigationType:i}},[u,f,p,g,E,S,i]);return N==null?null:k.createElement(zi.Provider,{value:c},k.createElement(Vp.Provider,{children:n,value:N}))}new Promise(()=>{});function PA(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:k.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:k.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:k.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _o(){return _o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_o.apply(this,arguments)}function $0(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function bA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kA(t,e){return t.button===0&&(!e||e==="_self")&&!bA(t)}const DA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],OA="6";try{window.__reactRouterVersion=OA}catch{}function LA(t,e){return HR({basename:void 0,future:_o({},void 0,{v7_prependBasename:!0}),history:pR({window:void 0}),hydrationData:MA(),routes:t,mapRouteProperties:PA,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function MA(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=_o({},e,{errors:VA(e.errors)})),e}function VA(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new fc(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const H0=k.createContext({isTransitioning:!1}),UA=k.createContext(new Map),FA="startTransition",Wy=tI[FA],zA="flushSync",qy=fR[zA];function BA(t){Wy?Wy(t):t()}function aa(t){qy?qy(t):t()}let $A=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function HA(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=k.useState(n.state),[o,l]=k.useState(),[u,c]=k.useState({isTransitioning:!1}),[f,p]=k.useState(),[g,E]=k.useState(),[S,N]=k.useState(),D=k.useRef(new Map),{v7_startTransition:I}=r||{},w=k.useCallback(v=>{I?BA(v):v()},[I]),R=k.useCallback((v,T)=>{let{deletedFetchers:x,flushSync:C,viewTransitionOpts:b}=T;v.fetchers.forEach((Ce,Ke)=>{Ce.data!==void 0&&D.current.set(Ke,Ce.data)}),x.forEach(Ce=>D.current.delete(Ce));let A=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!b||A){C?aa(()=>s(v)):w(()=>s(v));return}if(C){aa(()=>{g&&(f&&f.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:b.currentLocation,nextLocation:b.nextLocation})});let Ce=n.window.document.startViewTransition(()=>{aa(()=>s(v))});Ce.finished.finally(()=>{aa(()=>{p(void 0),E(void 0),l(void 0),c({isTransitioning:!1})})}),aa(()=>E(Ce));return}g?(f&&f.resolve(),g.skipTransition(),N({state:v,currentLocation:b.currentLocation,nextLocation:b.nextLocation})):(l(v),c({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}))},[n.window,g,f,D,w]);k.useLayoutEffect(()=>n.subscribe(R),[n,R]),k.useEffect(()=>{u.isTransitioning&&!u.flushSync&&p(new $A)},[u]),k.useEffect(()=>{if(f&&o&&n.window){let v=o,T=f.promise,x=n.window.document.startViewTransition(async()=>{w(()=>s(v)),await T});x.finished.finally(()=>{p(void 0),E(void 0),l(void 0),c({isTransitioning:!1})}),E(x)}},[w,o,f,n.window]),k.useEffect(()=>{f&&o&&i.location.key===o.location.key&&f.resolve()},[f,g,i.location,o]),k.useEffect(()=>{!u.isTransitioning&&S&&(l(S.state),c({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),N(void 0))},[u.isTransitioning,S]),k.useEffect(()=>{},[]);let j=k.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:v=>n.navigate(v),push:(v,T,x)=>n.navigate(v,{state:T,preventScrollReset:x==null?void 0:x.preventScrollReset}),replace:(v,T,x)=>n.navigate(v,{replace:!0,state:T,preventScrollReset:x==null?void 0:x.preventScrollReset})}),[n]),U=n.basename||"/",F=k.useMemo(()=>({router:n,navigator:j,static:!1,basename:U}),[n,j,U]),y=k.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return k.useEffect(()=>AA(r,n.future),[r,n.future]),k.createElement(k.Fragment,null,k.createElement(ml.Provider,{value:F},k.createElement(Mp.Provider,{value:i},k.createElement(UA.Provider,{value:D.current},k.createElement(H0.Provider,{value:u},k.createElement(CA,{basename:U,location:i.location,navigationType:i.historyAction,navigator:j,future:y},i.initialized||n.future.v7_partialHydration?k.createElement(WA,{routes:n.routes,future:n.future,state:i}):e))))),null)}const WA=k.memo(qA);function qA(t){let{routes:e,future:n,state:r}=t;return mA(e,void 0,r,n)}const QA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rn=k.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:f,viewTransition:p}=e,g=$0(e,DA),{basename:E}=k.useContext(zi),S,N=!1;if(typeof c=="string"&&KA.test(c)&&(S=c,QA))try{let R=new URL(window.location.href),j=c.startsWith("//")?new URL(R.protocol+c):new URL(c),U=$r(j.pathname,E);j.origin===R.origin&&U!=null?c=U+j.search+j.hash:N=!0}catch{}let D=cA(c,{relative:i}),I=YA(c,{replace:o,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:p});function w(R){r&&r(R),R.defaultPrevented||I(R)}return k.createElement("a",_o({},g,{href:S||D,onClick:N||s?r:w,ref:n,target:u}))}),cu=k.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:c,children:f}=e,p=$0(e,jA),g=Qc(u,{relative:p.relative}),E=bo(),S=k.useContext(Mp),{navigator:N,basename:D}=k.useContext(zi),I=S!=null&&XA(g)&&c===!0,w=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,R=E.pathname,j=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(R=R.toLowerCase(),j=j?j.toLowerCase():null,w=w.toLowerCase()),j&&D&&(j=$r(j,D)||j);const U=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let F=R===w||!o&&R.startsWith(w)&&R.charAt(U)==="/",y=j!=null&&(j===w||!o&&j.startsWith(w)&&j.charAt(w.length)==="/"),v={isActive:F,isPending:y,isTransitioning:I},T=F?r:void 0,x;typeof s=="function"?x=s(v):x=[s,F?"active":null,y?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let C=typeof l=="function"?l(v):l;return k.createElement(rn,_o({},p,{"aria-current":T,className:x,ref:n,style:C,to:u,viewTransition:c}),typeof f=="function"?f(v):f)});var cf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cf||(cf={}));var Qy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Qy||(Qy={}));function GA(t){let e=k.useContext(ml);return e||we(!1),e}function YA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=Rs(),c=bo(),f=Qc(t,{relative:o});return k.useCallback(p=>{if(kA(p,n)){p.preventDefault();let g=r!==void 0?r:vs(c)===vs(f);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,f,r,i,n,t,s,o,l])}function XA(t,e){e===void 0&&(e={});let n=k.useContext(H0);n==null&&we(!1);let{basename:r}=GA(cf.useViewTransitionState),i=Qc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=$r(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=$r(n.nextLocation.pathname,r)||n.nextLocation.pathname;return hc(i.pathname,o)!=null||hc(i.pathname,s)!=null}var Ky={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},JA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|c>>6,E=c&63;u||(E=64,o||(g=64)),r.push(n[f],n[p],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(W0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||p==null)throw new ZA;const g=s<<2|l>>4;if(r.push(g),c!==64){const E=l<<4&240|c>>2;if(r.push(E),p!==64){const S=c<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eN=function(t){const e=W0(t);return q0.encodeByteArray(e,!0)},mc=function(t){return eN(t).replace(/\./g,"")},Q0=function(t){try{return q0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=()=>tN().__FIREBASE_DEFAULTS__,rN=()=>{if(typeof process>"u"||typeof Ky>"u")return;const t=Ky.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Q0(t[1]);return e&&JSON.parse(e)},Kc=()=>{try{return nN()||rN()||iN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},K0=t=>{var e,n;return(n=(e=Kc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Up=t=>{const e=K0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},G0=()=>{var t;return(t=Kc())===null||t===void 0?void 0:t.config},Y0=t=>{var e;return(e=Kc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mc(JSON.stringify(n)),mc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function aN(){var t;const e=(t=Kc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dN(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hN(){return!aN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fN(){try{return typeof indexedDB=="object"}catch{return!1}}function pN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mN,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?gN(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new yr(i,l,r)}}function gN(t,e){return t.replace(yN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const yN=/\{\$([^}]+)}/g;function vN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Gy(s)&&Gy(o)){if(!gc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Gy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _N(t,e){const n=new wN(t,e);return n.subscribe.bind(n)}class wN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");EN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Jd),i.error===void 0&&(i.error=Jd),i.complete===void 0&&(i.complete=Jd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t){return t&&t._delegate?t._delegate:t}class Hr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IN(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zi){return this.instances.has(e)}getOptions(e=Zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zi){return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TN(t){return t===Zi?void 0:t}function IN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const RN={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},AN=Ne.INFO,NN={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},CN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=NN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fp{constructor(e){this.name=e,this._logLevel=AN,this._logHandler=CN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const PN=(t,e)=>e.some(n=>t instanceof n);let Yy,Xy;function bN(){return Yy||(Yy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kN(){return Xy||(Xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J0=new WeakMap,df=new WeakMap,Z0=new WeakMap,Zd=new WeakMap,zp=new WeakMap;function DN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ni(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&J0.set(n,t)}).catch(()=>{}),zp.set(e,t),e}function jN(t){if(df.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});df.set(t,e)}let hf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return df.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Z0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ON(t){hf=t(hf)}function LN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(eh(this),e,...n);return Z0.set(r,e.sort?e.sort():[e]),Ni(r)}:kN().includes(t)?function(...e){return t.apply(eh(this),e),Ni(J0.get(this))}:function(...e){return Ni(t.apply(eh(this),e))}}function MN(t){return typeof t=="function"?LN(t):(t instanceof IDBTransaction&&jN(t),PN(t,bN())?new Proxy(t,hf):t)}function Ni(t){if(t instanceof IDBRequest)return DN(t);if(Zd.has(t))return Zd.get(t);const e=MN(t);return e!==t&&(Zd.set(t,e),zp.set(e,t)),e}const eh=t=>zp.get(t);function VN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Ni(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ni(o.result),u.oldVersion,u.newVersion,Ni(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const UN=["get","getKey","getAll","getAllKeys","count"],FN=["put","add","delete","clear"],th=new Map;function Jy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(th.get(e))return th.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=FN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UN.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return th.set(e,s),s}ON(t=>({...t,get:(e,n,r)=>Jy(e,n)||t.get(e,n,r),has:(e,n)=>!!Jy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ff="@firebase/app",Zy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Fp("@firebase/app"),$N="@firebase/app-compat",HN="@firebase/analytics-compat",WN="@firebase/analytics",qN="@firebase/app-check-compat",QN="@firebase/app-check",KN="@firebase/auth",GN="@firebase/auth-compat",YN="@firebase/database",XN="@firebase/data-connect",JN="@firebase/database-compat",ZN="@firebase/functions",eC="@firebase/functions-compat",tC="@firebase/installations",nC="@firebase/installations-compat",rC="@firebase/messaging",iC="@firebase/messaging-compat",sC="@firebase/performance",oC="@firebase/performance-compat",aC="@firebase/remote-config",lC="@firebase/remote-config-compat",uC="@firebase/storage",cC="@firebase/storage-compat",dC="@firebase/firestore",hC="@firebase/vertexai-preview",fC="@firebase/firestore-compat",pC="firebase",mC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="[DEFAULT]",gC={[ff]:"fire-core",[$N]:"fire-core-compat",[WN]:"fire-analytics",[HN]:"fire-analytics-compat",[QN]:"fire-app-check",[qN]:"fire-app-check-compat",[KN]:"fire-auth",[GN]:"fire-auth-compat",[YN]:"fire-rtdb",[XN]:"fire-data-connect",[JN]:"fire-rtdb-compat",[ZN]:"fire-fn",[eC]:"fire-fn-compat",[tC]:"fire-iid",[nC]:"fire-iid-compat",[rC]:"fire-fcm",[iC]:"fire-fcm-compat",[sC]:"fire-perf",[oC]:"fire-perf-compat",[aC]:"fire-rc",[lC]:"fire-rc-compat",[uC]:"fire-gcs",[cC]:"fire-gcs-compat",[dC]:"fire-fst",[fC]:"fire-fst-compat",[hC]:"fire-vertex","fire-js":"fire-js",[pC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map,yC=new Map,mf=new Map;function ev(t,e){try{t.container.addComponent(e)}catch(n){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(mf.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;mf.set(e,t);for(const n of yc.values())ev(n,t);for(const n of yC.values())ev(n,t);return!0}function _l(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Cr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ci=new yl("app","Firebase",vC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=mC;function eE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ci.create("bad-app-name",{appName:String(i)});if(n||(n=G0()),!n)throw Ci.create("no-options");const s=yc.get(i);if(s){if(gc(n,s.options)&&gc(r,s.config))return s;throw Ci.create("duplicate-app",{appName:i})}const o=new SN(i);for(const u of mf.values())o.addComponent(u);const l=new _C(n,r,o);return yc.set(i,l),l}function Gc(t=pf){const e=yc.get(t);if(!e&&t===pf&&G0())return eE();if(!e)throw Ci.create("no-app",{appName:t});return e}function Mn(t,e,n){var r;let i=(r=gC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(l.join(" "));return}Di(new Hr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="firebase-heartbeat-database",EC=1,el="firebase-heartbeat-store";let nh=null;function tE(){return nh||(nh=VN(wC,EC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(el)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ci.create("idb-open",{originalErrorMessage:t.message})})),nh}async function xC(t){try{const n=(await tE()).transaction(el),r=await n.objectStore(el).get(nE(t));return await n.done,r}catch(e){if(e instanceof yr)Wr.warn(e.message);else{const n=Ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wr.warn(n.message)}}}async function tv(t,e){try{const r=(await tE()).transaction(el,"readwrite");await r.objectStore(el).put(e,nE(t)),await r.done}catch(n){if(n instanceof yr)Wr.warn(n.message);else{const r=Ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wr.warn(r.message)}}}function nE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=1024,IC=30*24*60*60*1e3;class SC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=nv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=IC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nv(),{heartbeatsToSend:r,unsentEntries:i}=RC(this._heartbeatsCache.heartbeats),s=mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Wr.warn(n),""}}}function nv(){return new Date().toISOString().substring(0,10)}function RC(t,e=TC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),rv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fN()?pN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return tv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function rv(t){return mc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){Di(new Hr("platform-logger",e=>new zN(e),"PRIVATE")),Di(new Hr("heartbeat",e=>new SC(e),"PRIVATE")),Mn(ff,Zy,t),Mn(ff,Zy,"esm2017"),Mn("fire-js","")}NC("");function Bp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function rE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CC=rE,iE=new yl("auth","Firebase",rE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new Fp("@firebase/auth");function PC(t,...e){vc.logLevel<=Ne.WARN&&vc.warn(`Auth (${As}): ${t}`,...e)}function bu(t,...e){vc.logLevel<=Ne.ERROR&&vc.error(`Auth (${As}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,...e){throw Hp(t,...e)}function Xn(t,...e){return Hp(t,...e)}function $p(t,e,n){const r=Object.assign(Object.assign({},CC()),{[e]:n});return new yl("auth","Firebase",r).create(e,{appName:t.name})}function cs(t){return $p(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mr(t,"argument-error"),$p(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iE.create(t,...e)}function fe(t,e,...n){if(!t)throw Hp(e,...n)}function Pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bu(e),new Error(e)}function qr(t,e){t||Pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function kC(){return iv()==="http:"||iv()==="https:"}function iv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kC()||uN()||"connection"in navigator)?navigator.onLine:!0}function jC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.shortDelay=e,this.longDelay=n,qr(n>e,"Short delay should be less than long delay!"),this.isMobile=oN()||cN()}get(){return DC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t,e){qr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new wl(3e4,6e4);function qp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ko(t,e,n,r,i={}){return oE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=vl(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return lN()||(c.referrerPolicy="no-referrer"),sE.fetch()(aE(t,t.config.apiHost,n,l),c)})}async function oE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},OC),e);try{const i=new VC(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw du(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw du(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw du(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw du(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $p(t,f,c);mr(t,f)}}catch(i){if(i instanceof yr)throw i;mr(t,"network-request-failed",{message:String(i)})}}async function MC(t,e,n,r,i={}){const s=await ko(t,e,n,r,i);return"mfaPendingCredential"in s&&mr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function aE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Wp(t.config,i):`${t.config.apiScheme}://${i}`}class VC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xn(this.auth,"network-request-failed")),LC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function du(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(t,e){return ko(t,"POST","/v1/accounts:delete",e)}async function lE(t,e){return ko(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uE(t,e=!1){const n=ft(t),r=await n.getIdToken(e),i=Qp(r);fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ca(rh(i.auth_time)),issuedAtTime:Ca(rh(i.iat)),expirationTime:Ca(rh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function rh(t){return Number(t)*1e3}function Qp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Q0(n);return i?JSON.parse(i):(bu("Failed to decode base64 JWT payload"),null)}catch(i){return bu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function sv(t){const e=Qp(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&FC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function FC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ca(this.lastLoginAt),this.creationTime=Ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(t){var e;const n=t.auth,r=await t.getIdToken(),i=await tl(t,lE(n,{idToken:r}));fe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?cE(s.providerUserInfo):[],l=$C(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new yf(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function BC(t){const e=ft(t);await _c(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $C(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cE(t){return t.map(e=>{var{providerId:n}=e,r=Bp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(t,e){const n=await oE(t,{},async()=>{const r=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=aE(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",sE.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WC(t,e){return ko(t,"POST","/v2/accounts:revokeToken",qp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=sv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await HC(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new oo;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oo,this.toJSON())}_performRefresh(){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class br{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Bp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await tl(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uE(this,e)}reload(){return BC(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _c(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cr(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await tl(this,UC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,E=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,D=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:R,emailVerified:j,isAnonymous:U,providerData:F,stsTokenManager:y}=n;fe(R&&y,e,"internal-error");const v=oo.fromJSON(this.name,y);fe(typeof R=="string",e,"internal-error"),ii(p,e.name),ii(g,e.name),fe(typeof j=="boolean",e,"internal-error"),fe(typeof U=="boolean",e,"internal-error"),ii(E,e.name),ii(S,e.name),ii(N,e.name),ii(D,e.name),ii(I,e.name),ii(w,e.name);const T=new br({uid:R,auth:e,email:g,emailVerified:j,displayName:p,isAnonymous:U,photoURL:S,phoneNumber:E,tenantId:N,stsTokenManager:v,createdAt:I,lastLoginAt:w});return F&&Array.isArray(F)&&(T.providerData=F.map(x=>Object.assign({},x))),D&&(T._redirectEventId=D),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new oo;i.updateFromServerResponse(n);const s=new br({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _c(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];fe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?cE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new oo;l.updateFromIdToken(r);const u=new br({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new yf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;function kr(t){qr(t instanceof Function,"Expected a class definition");let e=ov.get(t);return e?(qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ov.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dE.type="NONE";const av=dE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(t,e,n){return`firebase:${t}:${e}:${n}`}class ao{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ku(this.userKey,i.apiKey,s),this.fullPersistenceKey=ku("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?br._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ao(kr(av),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||kr(av);const o=ku(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(o);if(f){const p=br._fromJSON(e,f);c!==s&&(l=p),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ao(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ao(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yE(e))return"Blackberry";if(vE(e))return"Webos";if(fE(e))return"Safari";if((e.includes("chrome/")||pE(e))&&!e.includes("edge/"))return"Chrome";if(gE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hE(t=Zt()){return/firefox\//i.test(t)}function fE(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pE(t=Zt()){return/crios\//i.test(t)}function mE(t=Zt()){return/iemobile/i.test(t)}function gE(t=Zt()){return/android/i.test(t)}function yE(t=Zt()){return/blackberry/i.test(t)}function vE(t=Zt()){return/webos/i.test(t)}function Kp(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qC(t=Zt()){var e;return Kp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QC(){return dN()&&document.documentMode===10}function _E(t=Zt()){return Kp(t)||gE(t)||vE(t)||yE(t)||/windows phone/i.test(t)||mE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t,e=[]){let n;switch(t){case"Browser":n=lv(Zt());break;case"Worker":n=`${lv(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${As}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t,e={}){return ko(t,"GET","/v2/passwordPolicy",qp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=6;class XC{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uv(this),this.idTokenSubscription=new uv(this),this.beforeStateQueue=new KC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lE(this,{idToken:e}),r=await br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Cr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _c(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cr(this.app))return Promise.reject(cs(this));const n=e?ft(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cr(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cr(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GC(this),n=new XC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&kr(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[kr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yc(t){return ft(t)}class uv{constructor(e){this.auth=e,this.observer=null,this.addObserver=_N(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZC(t){Gp=t}function eP(t){return Gp.loadJS(t)}function tP(){return Gp.gapiScript}function nP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t,e){const n=_l(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(gc(s,e??{}))return i;mr(i,"already-initialized")}return n.initialize({options:e})}function iP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sP(t,e,n){const r=Yc(t);fe(r._canInitEmulator,r,"emulator-config-failed"),fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=EE(e),{host:o,port:l}=oP(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),aP()}function EE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oP(t){const e=EE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:cv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:cv(o)}}}function cv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,n){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(t,e){return MC(t,"POST","/v1/accounts:signInWithIdp",qp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP="http://localhost";class _s extends xE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Bp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new _s(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return lo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,lo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,lo(e,n)}buildRequest(){const e={requestUri:lP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Yp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends El{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _s._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rr.credential(n,r)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends El{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.GITHUB_SIGN_IN_METHOD="github.com";fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends El{constructor(){super("twitter.com")}static credential(e,n){return _s._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pi.credential(n,r)}catch{return null}}}pi.TWITTER_SIGN_IN_METHOD="twitter.com";pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await br._fromIdTokenResponse(e,r,i),o=dv(r);return new wo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=dv(r);return new wo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function dv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends yr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new wc(e,n,r,i)}}function TE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wc._fromErrorAndOperation(t,s,e,r):s})}async function uP(t,e,n=!1){const r=await tl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(t,e,n=!1){const{auth:r}=t;if(Cr(r.app))return Promise.reject(cs(r));const i="reauthenticate";try{const s=await tl(t,TE(r,i,e,t),n);fe(s.idToken,r,"internal-error");const o=Qp(s.idToken);fe(o,r,"internal-error");const{sub:l}=o;return fe(t.uid===l,r,"user-mismatch"),wo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&mr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(t,e,n=!1){if(Cr(t.app))return Promise.reject(cs(t));const r="signIn",i=await TE(t,r,e),s=await wo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function hP(t,e,n,r){return ft(t).onIdTokenChanged(e,n,r)}function fP(t,e,n){return ft(t).beforeAuthStateChanged(e,n)}function pP(t,e,n,r){return ft(t).onAuthStateChanged(e,n,r)}const Ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ec,"1"),this.storage.removeItem(Ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=1e3,gP=10;class SE extends IE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_E(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);QC()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,gP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SE.type="LOCAL";const yP=SE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE extends IE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}RE.type="SESSION";const AE=RE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Xc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await vP(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=Xp("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return window}function wP(t){hr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}async function EP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TP(){return NE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebaseLocalStorageDb",IP=1,xc="firebaseLocalStorage",PE="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jc(t,e){return t.transaction([xc],e?"readwrite":"readonly").objectStore(xc)}function SP(){const t=indexedDB.deleteDatabase(CE);return new xl(t).toPromise()}function vf(){const t=indexedDB.open(CE,IP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xc,{keyPath:PE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xc)?e(r):(r.close(),await SP(),e(await vf()))})})}async function hv(t,e,n){const r=Jc(t,!0).put({[PE]:e,value:n});return new xl(r).toPromise()}async function RP(t,e){const n=Jc(t,!1).get(e),r=await new xl(n).toPromise();return r===void 0?null:r.value}function fv(t,e){const n=Jc(t,!0).delete(e);return new xl(n).toPromise()}const AP=800,NP=3;class bE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(TP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await EP(),!this.activeServiceWorker)return;this.sender=new _P(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vf();return await hv(e,Ec,"1"),await fv(e,Ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Jc(i,!1).getAll();return new xl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bE.type="LOCAL";const CP=bE;new wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e){return e?kr(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp extends xE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return lo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PP(t){return dP(t.auth,new Jp(t),t.bypassAuthState)}function bP(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),cP(n,new Jp(t),t.bypassAuthState)}async function kP(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),uP(n,new Jp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PP;case"linkViaPopup":case"linkViaRedirect":return kP;case"reauthViaPopup":case"reauthViaRedirect":return bP;default:mr(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new wl(2e3,1e4);async function jP(t,e,n){if(Cr(t.app))return Promise.reject(Xn(t,"operation-not-supported-in-this-environment"));const r=Yc(t);bC(t,e,Yp);const i=kE(r,n);return new os(r,"signInViaPopup",e,i).executeNotNull()}class os extends DE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,os.currentPopupAction&&os.currentPopupAction.cancel(),os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){qr(this.filter.length===1,"Popup operations only handle one event");const e=Xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DP.get())};e()}}os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="pendingRedirect",Du=new Map;class LP extends DE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Du.get(this.auth._key());if(!e){try{const r=await MP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Du.set(this.auth._key(),e)}return this.bypassAuthState||Du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MP(t,e){const n=FP(e),r=UP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function VP(t,e){Du.set(t._key(),e)}function UP(t){return kr(t._redirectPersistence)}function FP(t){return ku(OP,t.config.apiKey,t.name)}async function zP(t,e,n=!1){if(Cr(t.app))return Promise.reject(cs(t));const r=Yc(t),i=kE(r,e),o=await new LP(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=10*60*1e3;class $P{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BP&&this.cachedEventUids.clear(),this.cachedEventUids.has(pv(e))}saveEventToCache(e){this.cachedEventUids.add(pv(e)),this.lastProcessedEventTime=Date.now()}}function pv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(t,e={}){return ko(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QP=/^https?/;async function KP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WP(t);for(const n of e)try{if(GP(n))return}catch{}mr(t,"unauthorized-domain")}function GP(t){const e=gf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!QP.test(n))return!1;if(qP.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new wl(3e4,6e4);function mv(){const t=hr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XP(t){return new Promise((e,n)=>{var r,i,s;function o(){mv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mv(),n(Xn(t,"network-request-failed"))},timeout:YP.get()})}if(!((i=(r=hr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=hr().gapi)===null||s===void 0)&&s.load)o();else{const l=nP("iframefcb");return hr()[l]=()=>{gapi.load?o():n(Xn(t,"network-request-failed"))},eP(`${tP()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ju=null,e})}let ju=null;function JP(t){return ju=ju||XP(t),ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=new wl(5e3,15e3),eb="__/auth/iframe",tb="emulator/auth/iframe",nb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ib(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wp(e,tb):`https://${t.config.authDomain}/${eb}`,r={apiKey:e.apiKey,appName:t.name,v:As},i=rb.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${vl(r).slice(1)}`}async function sb(t){const e=await JP(t),n=hr().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:ib(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nb,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Xn(t,"network-request-failed"),l=hr().setTimeout(()=>{s(o)},ZP.get());function u(){hr().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ab=500,lb=600,ub="_blank",cb="http://localhost";class gv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function db(t,e,n,r=ab,i=lb){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},ob),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Zt().toLowerCase();n&&(l=pE(c)?ub:n),hE(c)&&(e=e||cb,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[E,S])=>`${g}${E}=${S},`,"");if(qC(c)&&l!=="_self")return hb(e||"",l),new gv(null);const p=window.open(e||"",l,f);fe(p,t,"popup-blocked");try{p.focus()}catch{}return new gv(p)}function hb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="__/auth/handler",pb="emulator/auth/handler",mb=encodeURIComponent("fac");async function yv(t,e,n,r,i,s){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:As,eventId:i};if(e instanceof Yp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof El){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),c=u?`#${mb}=${encodeURIComponent(u)}`:"";return`${gb(t)}?${vl(l).slice(1)}${c}`}function gb({config:t}){return t.emulator?Wp(t,pb):`https://${t.authDomain}/${fb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="webStorageSupport";class yb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AE,this._completeRedirectFn=zP,this._overrideRedirectResult=VP}async _openPopup(e,n,r,i){var s;qr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await yv(e,n,r,gf(),i);return db(e,o,Xp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await yv(e,n,r,gf(),i);return wP(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(qr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await sb(e),r=new $P(e);return n.register("authEvent",i=>(fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ih,{type:ih},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ih];o!==void 0&&n(!!o),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _E()||fE()||Kp()}}const vb=yb;var vv="@firebase/auth",_v="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Eb(t){Di(new Hr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wE(t)},c=new JC(r,i,s,u);return iP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Di(new Hr("auth-internal",e=>{const n=Yc(e.getProvider("auth").getImmediate());return(r=>new _b(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(vv,_v,wb(t)),Mn(vv,_v,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=5*60,Tb=Y0("authIdTokenMaxAge")||xb;let wv=null;const Ib=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Tb)return;const i=n==null?void 0:n.token;wv!==i&&(wv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Sb(t=Gc()){const e=_l(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rP(t,{popupRedirectResolver:vb,persistence:[CP,yP,AE]}),r=Y0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Ib(s.toString());fP(n,o,()=>o(n.currentUser)),hP(n,l=>o(l))}}const i=K0("auth");return i&&sP(n,`http://${i}`),n}function Rb(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Xn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Rb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Eb("Browser");var Ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,OE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,v){function T(){}T.prototype=v.prototype,y.D=v.prototype,y.prototype=new T,y.prototype.constructor=y,y.C=function(x,C,b){for(var A=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)A[Ce-2]=arguments[Ce];return v.prototype[C].apply(x,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(y,v,T){T||(T=0);var x=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)x[C]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(C=0;16>C;++C)x[C]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=y.g[0],T=y.g[1],C=y.g[2];var b=y.g[3],A=v+(b^T&(C^b))+x[0]+3614090360&4294967295;v=T+(A<<7&4294967295|A>>>25),A=b+(C^v&(T^C))+x[1]+3905402710&4294967295,b=v+(A<<12&4294967295|A>>>20),A=C+(T^b&(v^T))+x[2]+606105819&4294967295,C=b+(A<<17&4294967295|A>>>15),A=T+(v^C&(b^v))+x[3]+3250441966&4294967295,T=C+(A<<22&4294967295|A>>>10),A=v+(b^T&(C^b))+x[4]+4118548399&4294967295,v=T+(A<<7&4294967295|A>>>25),A=b+(C^v&(T^C))+x[5]+1200080426&4294967295,b=v+(A<<12&4294967295|A>>>20),A=C+(T^b&(v^T))+x[6]+2821735955&4294967295,C=b+(A<<17&4294967295|A>>>15),A=T+(v^C&(b^v))+x[7]+4249261313&4294967295,T=C+(A<<22&4294967295|A>>>10),A=v+(b^T&(C^b))+x[8]+1770035416&4294967295,v=T+(A<<7&4294967295|A>>>25),A=b+(C^v&(T^C))+x[9]+2336552879&4294967295,b=v+(A<<12&4294967295|A>>>20),A=C+(T^b&(v^T))+x[10]+4294925233&4294967295,C=b+(A<<17&4294967295|A>>>15),A=T+(v^C&(b^v))+x[11]+2304563134&4294967295,T=C+(A<<22&4294967295|A>>>10),A=v+(b^T&(C^b))+x[12]+1804603682&4294967295,v=T+(A<<7&4294967295|A>>>25),A=b+(C^v&(T^C))+x[13]+4254626195&4294967295,b=v+(A<<12&4294967295|A>>>20),A=C+(T^b&(v^T))+x[14]+2792965006&4294967295,C=b+(A<<17&4294967295|A>>>15),A=T+(v^C&(b^v))+x[15]+1236535329&4294967295,T=C+(A<<22&4294967295|A>>>10),A=v+(C^b&(T^C))+x[1]+4129170786&4294967295,v=T+(A<<5&4294967295|A>>>27),A=b+(T^C&(v^T))+x[6]+3225465664&4294967295,b=v+(A<<9&4294967295|A>>>23),A=C+(v^T&(b^v))+x[11]+643717713&4294967295,C=b+(A<<14&4294967295|A>>>18),A=T+(b^v&(C^b))+x[0]+3921069994&4294967295,T=C+(A<<20&4294967295|A>>>12),A=v+(C^b&(T^C))+x[5]+3593408605&4294967295,v=T+(A<<5&4294967295|A>>>27),A=b+(T^C&(v^T))+x[10]+38016083&4294967295,b=v+(A<<9&4294967295|A>>>23),A=C+(v^T&(b^v))+x[15]+3634488961&4294967295,C=b+(A<<14&4294967295|A>>>18),A=T+(b^v&(C^b))+x[4]+3889429448&4294967295,T=C+(A<<20&4294967295|A>>>12),A=v+(C^b&(T^C))+x[9]+568446438&4294967295,v=T+(A<<5&4294967295|A>>>27),A=b+(T^C&(v^T))+x[14]+3275163606&4294967295,b=v+(A<<9&4294967295|A>>>23),A=C+(v^T&(b^v))+x[3]+4107603335&4294967295,C=b+(A<<14&4294967295|A>>>18),A=T+(b^v&(C^b))+x[8]+1163531501&4294967295,T=C+(A<<20&4294967295|A>>>12),A=v+(C^b&(T^C))+x[13]+2850285829&4294967295,v=T+(A<<5&4294967295|A>>>27),A=b+(T^C&(v^T))+x[2]+4243563512&4294967295,b=v+(A<<9&4294967295|A>>>23),A=C+(v^T&(b^v))+x[7]+1735328473&4294967295,C=b+(A<<14&4294967295|A>>>18),A=T+(b^v&(C^b))+x[12]+2368359562&4294967295,T=C+(A<<20&4294967295|A>>>12),A=v+(T^C^b)+x[5]+4294588738&4294967295,v=T+(A<<4&4294967295|A>>>28),A=b+(v^T^C)+x[8]+2272392833&4294967295,b=v+(A<<11&4294967295|A>>>21),A=C+(b^v^T)+x[11]+1839030562&4294967295,C=b+(A<<16&4294967295|A>>>16),A=T+(C^b^v)+x[14]+4259657740&4294967295,T=C+(A<<23&4294967295|A>>>9),A=v+(T^C^b)+x[1]+2763975236&4294967295,v=T+(A<<4&4294967295|A>>>28),A=b+(v^T^C)+x[4]+1272893353&4294967295,b=v+(A<<11&4294967295|A>>>21),A=C+(b^v^T)+x[7]+4139469664&4294967295,C=b+(A<<16&4294967295|A>>>16),A=T+(C^b^v)+x[10]+3200236656&4294967295,T=C+(A<<23&4294967295|A>>>9),A=v+(T^C^b)+x[13]+681279174&4294967295,v=T+(A<<4&4294967295|A>>>28),A=b+(v^T^C)+x[0]+3936430074&4294967295,b=v+(A<<11&4294967295|A>>>21),A=C+(b^v^T)+x[3]+3572445317&4294967295,C=b+(A<<16&4294967295|A>>>16),A=T+(C^b^v)+x[6]+76029189&4294967295,T=C+(A<<23&4294967295|A>>>9),A=v+(T^C^b)+x[9]+3654602809&4294967295,v=T+(A<<4&4294967295|A>>>28),A=b+(v^T^C)+x[12]+3873151461&4294967295,b=v+(A<<11&4294967295|A>>>21),A=C+(b^v^T)+x[15]+530742520&4294967295,C=b+(A<<16&4294967295|A>>>16),A=T+(C^b^v)+x[2]+3299628645&4294967295,T=C+(A<<23&4294967295|A>>>9),A=v+(C^(T|~b))+x[0]+4096336452&4294967295,v=T+(A<<6&4294967295|A>>>26),A=b+(T^(v|~C))+x[7]+1126891415&4294967295,b=v+(A<<10&4294967295|A>>>22),A=C+(v^(b|~T))+x[14]+2878612391&4294967295,C=b+(A<<15&4294967295|A>>>17),A=T+(b^(C|~v))+x[5]+4237533241&4294967295,T=C+(A<<21&4294967295|A>>>11),A=v+(C^(T|~b))+x[12]+1700485571&4294967295,v=T+(A<<6&4294967295|A>>>26),A=b+(T^(v|~C))+x[3]+2399980690&4294967295,b=v+(A<<10&4294967295|A>>>22),A=C+(v^(b|~T))+x[10]+4293915773&4294967295,C=b+(A<<15&4294967295|A>>>17),A=T+(b^(C|~v))+x[1]+2240044497&4294967295,T=C+(A<<21&4294967295|A>>>11),A=v+(C^(T|~b))+x[8]+1873313359&4294967295,v=T+(A<<6&4294967295|A>>>26),A=b+(T^(v|~C))+x[15]+4264355552&4294967295,b=v+(A<<10&4294967295|A>>>22),A=C+(v^(b|~T))+x[6]+2734768916&4294967295,C=b+(A<<15&4294967295|A>>>17),A=T+(b^(C|~v))+x[13]+1309151649&4294967295,T=C+(A<<21&4294967295|A>>>11),A=v+(C^(T|~b))+x[4]+4149444226&4294967295,v=T+(A<<6&4294967295|A>>>26),A=b+(T^(v|~C))+x[11]+3174756917&4294967295,b=v+(A<<10&4294967295|A>>>22),A=C+(v^(b|~T))+x[2]+718787259&4294967295,C=b+(A<<15&4294967295|A>>>17),A=T+(b^(C|~v))+x[9]+3951481745&4294967295,y.g[0]=y.g[0]+v&4294967295,y.g[1]=y.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,y.g[2]=y.g[2]+C&4294967295,y.g[3]=y.g[3]+b&4294967295}r.prototype.u=function(y,v){v===void 0&&(v=y.length);for(var T=v-this.blockSize,x=this.B,C=this.h,b=0;b<v;){if(C==0)for(;b<=T;)i(this,y,b),b+=this.blockSize;if(typeof y=="string"){for(;b<v;)if(x[C++]=y.charCodeAt(b++),C==this.blockSize){i(this,x),C=0;break}}else for(;b<v;)if(x[C++]=y[b++],C==this.blockSize){i(this,x),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var v=1;v<y.length-8;++v)y[v]=0;var T=8*this.o;for(v=y.length-8;v<y.length;++v)y[v]=T&255,T/=256;for(this.u(y),y=Array(16),v=T=0;4>v;++v)for(var x=0;32>x;x+=8)y[T++]=this.g[v]>>>x&255;return y};function s(y,v){var T=l;return Object.prototype.hasOwnProperty.call(T,y)?T[y]:T[y]=v(y)}function o(y,v){this.h=v;for(var T=[],x=!0,C=y.length-1;0<=C;C--){var b=y[C]|0;x&&b==v||(T[C]=b,x=!1)}this.g=T}var l={};function u(y){return-128<=y&&128>y?s(y,function(v){return new o([v|0],0>v?-1:0)}):new o([y|0],0>y?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return p;if(0>y)return D(c(-y));for(var v=[],T=1,x=0;y>=T;x++)v[x]=y/T|0,T*=4294967296;return new o(v,0)}function f(y,v){if(y.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(y.charAt(0)=="-")return D(f(y.substring(1),v));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(v,8)),x=p,C=0;C<y.length;C+=8){var b=Math.min(8,y.length-C),A=parseInt(y.substring(C,C+b),v);8>b?(b=c(Math.pow(v,b)),x=x.j(b).add(c(A))):(x=x.j(T),x=x.add(c(A)))}return x}var p=u(0),g=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-D(this).m();for(var y=0,v=1,T=0;T<this.g.length;T++){var x=this.i(T);y+=(0<=x?x:4294967296+x)*v,v*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S(this))return"0";if(N(this))return"-"+D(this).toString(y);for(var v=c(Math.pow(y,6)),T=this,x="";;){var C=j(T,v).g;T=I(T,C.j(v));var b=((0<T.g.length?T.g[0]:T.h)>>>0).toString(y);if(T=C,S(T))return b+x;for(;6>b.length;)b="0"+b;x=b+x}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function S(y){if(y.h!=0)return!1;for(var v=0;v<y.g.length;v++)if(y.g[v]!=0)return!1;return!0}function N(y){return y.h==-1}t.l=function(y){return y=I(this,y),N(y)?-1:S(y)?0:1};function D(y){for(var v=y.g.length,T=[],x=0;x<v;x++)T[x]=~y.g[x];return new o(T,~y.h).add(g)}t.abs=function(){return N(this)?D(this):this},t.add=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],x=0,C=0;C<=v;C++){var b=x+(this.i(C)&65535)+(y.i(C)&65535),A=(b>>>16)+(this.i(C)>>>16)+(y.i(C)>>>16);x=A>>>16,b&=65535,A&=65535,T[C]=A<<16|b}return new o(T,T[T.length-1]&-2147483648?-1:0)};function I(y,v){return y.add(D(v))}t.j=function(y){if(S(this)||S(y))return p;if(N(this))return N(y)?D(this).j(D(y)):D(D(this).j(y));if(N(y))return D(this.j(D(y)));if(0>this.l(E)&&0>y.l(E))return c(this.m()*y.m());for(var v=this.g.length+y.g.length,T=[],x=0;x<2*v;x++)T[x]=0;for(x=0;x<this.g.length;x++)for(var C=0;C<y.g.length;C++){var b=this.i(x)>>>16,A=this.i(x)&65535,Ce=y.i(C)>>>16,Ke=y.i(C)&65535;T[2*x+2*C]+=A*Ke,w(T,2*x+2*C),T[2*x+2*C+1]+=b*Ke,w(T,2*x+2*C+1),T[2*x+2*C+1]+=A*Ce,w(T,2*x+2*C+1),T[2*x+2*C+2]+=b*Ce,w(T,2*x+2*C+2)}for(x=0;x<v;x++)T[x]=T[2*x+1]<<16|T[2*x];for(x=v;x<2*v;x++)T[x]=0;return new o(T,0)};function w(y,v){for(;(y[v]&65535)!=y[v];)y[v+1]+=y[v]>>>16,y[v]&=65535,v++}function R(y,v){this.g=y,this.h=v}function j(y,v){if(S(v))throw Error("division by zero");if(S(y))return new R(p,p);if(N(y))return v=j(D(y),v),new R(D(v.g),D(v.h));if(N(v))return v=j(y,D(v)),new R(D(v.g),v.h);if(30<y.g.length){if(N(y)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,x=v;0>=x.l(y);)T=U(T),x=U(x);var C=F(T,1),b=F(x,1);for(x=F(x,2),T=F(T,2);!S(x);){var A=b.add(x);0>=A.l(y)&&(C=C.add(T),b=A),x=F(x,1),T=F(T,1)}return v=I(y,C.j(v)),new R(C,v)}for(C=p;0<=y.l(v);){for(T=Math.max(1,Math.floor(y.m()/v.m())),x=Math.ceil(Math.log(T)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),b=c(T),A=b.j(v);N(A)||0<A.l(y);)T-=x,b=c(T),A=b.j(v);S(b)&&(b=g),C=C.add(b),y=I(y,A)}return new R(C,y)}t.A=function(y){return j(this,y).h},t.and=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],x=0;x<v;x++)T[x]=this.i(x)&y.i(x);return new o(T,this.h&y.h)},t.or=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],x=0;x<v;x++)T[x]=this.i(x)|y.i(x);return new o(T,this.h|y.h)},t.xor=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],x=0;x<v;x++)T[x]=this.i(x)^y.i(x);return new o(T,this.h^y.h)};function U(y){for(var v=y.g.length+1,T=[],x=0;x<v;x++)T[x]=y.i(x)<<1|y.i(x-1)>>>31;return new o(T,y.h)}function F(y,v){var T=v>>5;v%=32;for(var x=y.g.length-T,C=[],b=0;b<x;b++)C[b]=0<v?y.i(b+T)>>>v|y.i(b+T+1)<<32-v:y.i(b+T);return new o(C,y.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,ds=o}).apply(typeof Ev<"u"?Ev:typeof self<"u"?self:typeof window<"u"?window:{});var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LE,ga,ME,Ou,_f,VE,UE,FE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof hu=="object"&&hu];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var m=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var L=a[_];if(!(L in m))break e;m=m[L]}a=a[a.length-1],_=m[a],h=h(_),h!=_&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var m=0,_=!1,L={next:function(){if(!_&&m<a.length){var V=m++;return{value:h(V,a[V]),done:!1}}return _=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(a){return a||function(){return s(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,_),a.apply(h,L)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function E(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function S(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(_,L,V){for(var q=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)q[Qe-2]=arguments[Qe];return h.prototype[L].apply(_,q)}}function N(a){const h=a.length;if(0<h){const m=Array(h);for(let _=0;_<h;_++)m[_]=a[_];return m}return[]}function D(a,h){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(u(_)){const L=a.length||0,V=_.length||0;a.length=L+V;for(let q=0;q<V;q++)a[L+q]=_[q]}else a.push(_)}}class I{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(a){return/^[\s\xa0]*$/.test(a)}function R(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var U=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function F(a,h,m){for(const _ in a)h.call(m,a[_],_,a)}function y(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function v(a){const h={};for(const m in a)h[m]=a[m];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,h){let m,_;for(let L=1;L<arguments.length;L++){_=arguments[L];for(m in _)a[m]=_[m];for(let V=0;V<T.length;V++)m=T[V],Object.prototype.hasOwnProperty.call(_,m)&&(a[m]=_[m])}}function C(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function b(a){l.setTimeout(()=>{throw a},0)}function A(){var a=ie;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class Ce{constructor(){this.h=this.g=null}add(h,m){const _=Ke.get();_.set(h,m),this.h?this.h.next=_:this.g=_,this.h=_}}var Ke=new I(()=>new re,a=>a.reset());class re{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,B=!1,ie=new Ce,se=()=>{const a=l.Promise.resolve(void 0);Re=()=>{a.then(Ee)}};var Ee=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(m){b(m)}var h=Ke;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}B=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var lt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function He(a,h){if(Te.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(U){e:{try{j(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:We[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&He.aa.h.call(this)}}S(He,Te);var We={2:"touch",3:"pen",4:"mouse"};He.prototype.h=function(){He.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Xe="closure_listenable_"+(1e6*Math.random()|0),Fn=0;function tr(a,h,m,_,L){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!_,this.ha=L,this.key=++Fn,this.da=this.fa=!1}function gn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function nr(a){this.src=a,this.g={},this.h=0}nr.prototype.add=function(a,h,m,_,L){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var q=le(a,h,_,L);return-1<q?(h=a[q],m||(h.fa=!1)):(h=new tr(h,this.src,V,!!_,L),h.fa=m,a.push(h)),h};function qe(a,h){var m=h.type;if(m in a.g){var _=a.g[m],L=Array.prototype.indexOf.call(_,h,void 0),V;(V=0<=L)&&Array.prototype.splice.call(_,L,1),V&&(gn(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function le(a,h,m,_){for(var L=0;L<a.length;++L){var V=a[L];if(!V.da&&V.listener==h&&V.capture==!!m&&V.ha==_)return L}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),ut={};function Ie(a,h,m,_,L){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Ie(a,h[V],m,_,L);return null}return m=je(m),a&&a[Xe]?a.K(h,m,c(_)?!!_.capture:!1,L):Q(a,h,m,!1,_,L)}function Q(a,h,m,_,L,V){if(!h)throw Error("Invalid event type");var q=c(L)?!!L.capture:!!L,Qe=wt(a);if(Qe||(a[_e]=Qe=new nr(a)),m=Qe.add(h,m,_,q,V),m.proxy)return m;if(_=ue(),m.proxy=_,_.src=a,_.listener=m,a.addEventListener)lt||(L=q),L===void 0&&(L=!1),a.addEventListener(h.toString(),_,L);else if(a.attachEvent)a.attachEvent(Me(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ue(){function a(m){return h.call(a.src,a.listener,m)}const h=ke;return a}function ye(a,h,m,_,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)ye(a,h[V],m,_,L);else _=c(_)?!!_.capture:!!_,m=je(m),a&&a[Xe]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],m=le(V,m,_,L),-1<m&&(gn(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=wt(a))&&(h=a.g[h.toString()],a=-1,h&&(a=le(h,m,_,L)),(m=-1<a?h[a]:null)&&Je(m))}function Je(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Xe])qe(h.i,a);else{var m=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(m,_,a.capture):h.detachEvent?h.detachEvent(Me(m),_):h.addListener&&h.removeListener&&h.removeListener(_),(m=wt(h))?(qe(m,a),m.h==0&&(m.src=null,h[_e]=null)):gn(a)}}}function Me(a){return a in ut?ut[a]:ut[a]="on"+a}function ke(a,h){if(a.da)a=!0;else{h=new He(h,this);var m=a.listener,_=a.ha||a.src;a.fa&&Je(a),a=m.call(_,h)}return a}function wt(a){return a=a[_e],a instanceof nr?a:null}var mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function je(a){return typeof a=="function"?a:(a[mt]||(a[mt]=function(h){return a.handleEvent(h)}),a[mt])}function de(){ae.call(this),this.i=new nr(this),this.M=this,this.F=null}S(de,ae),de.prototype[Xe]=!0,de.prototype.removeEventListener=function(a,h,m,_){ye(this,a,h,m,_)};function Ve(a,h){var m,_=a.F;if(_)for(m=[];_;_=_.F)m.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new Te(h,a);else if(h instanceof Te)h.target=h.target||a;else{var L=h;h=new Te(_,a),x(h,L)}if(L=!0,m)for(var V=m.length-1;0<=V;V--){var q=h.g=m[V];L=Ue(q,_,!0,h)&&L}if(q=h.g=a,L=Ue(q,_,!0,h)&&L,L=Ue(q,_,!1,h)&&L,m)for(V=0;V<m.length;V++)q=h.g=m[V],L=Ue(q,_,!1,h)&&L}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],_=0;_<m.length;_++)gn(m[_]);delete a.g[h],a.h--}}this.F=null},de.prototype.K=function(a,h,m,_){return this.i.add(String(a),h,!1,m,_)},de.prototype.L=function(a,h,m,_){return this.i.add(String(a),h,!0,m,_)};function Ue(a,h,m,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,V=0;V<h.length;++V){var q=h[V];if(q&&!q.da&&q.capture==m){var Qe=q.listener,Lt=q.ha||q.src;q.fa&&qe(a.i,q),L=Qe.call(Lt,_)!==!1&&L}}return L&&!_.defaultPrevented}function Pn(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Uo(a){a.g=Pn(()=>{a.g=null,a.i&&(a.i=!1,Uo(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Ps extends ae{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Uo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(a){ae.call(this),this.h=a,this.g={}}S(Hi,ae);var zn=[];function Fo(a){F(a.g,function(h,m){this.g.hasOwnProperty(m)&&Je(h)},a),a.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),Fo(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=l.JSON.stringify,bl=l.JSON.parse,yd=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ks(){}ks.prototype.h=null;function Wi(a){return a.h||(a.h=a.i())}function zo(){}var vr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qi(){Te.call(this,"d")}S(qi,Te);function Bo(){Te.call(this,"c")}S(Bo,Te);var rr={},kl=null;function Qi(){return kl=kl||new de}rr.La="serverreachability";function Ki(a){Te.call(this,rr.La,a)}S(Ki,Te);function ir(a){const h=Qi();Ve(h,new Ki(h))}rr.STAT_EVENT="statevent";function Dl(a,h){Te.call(this,rr.STAT_EVENT,a),this.stat=h}S(Dl,Te);function Ot(a){const h=Qi();Ve(h,new Dl(h,a))}rr.Ma="timingevent";function P(a,h){Te.call(this,rr.Ma,a),this.size=h}S(P,Te);function O(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function M(){this.g=!0}M.prototype.xa=function(){this.g=!1};function $(a,h,m,_,L,V){a.info(function(){if(a.g)if(V)for(var q="",Qe=V.split("&"),Lt=0;Lt<Qe.length;Lt++){var Oe=Qe[Lt].split("=");if(1<Oe.length){var Ht=Oe[0];Oe=Oe[1];var Wt=Ht.split("_");q=2<=Wt.length&&Wt[1]=="type"?q+(Ht+"="+Oe+"&"):q+(Ht+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+_+") [attempt "+L+"]: "+h+`
`+m+`
`+q})}function K(a,h,m,_,L,V,q){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+L+"]: "+h+`
`+m+`
`+V+" "+q})}function te(a,h,m,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Z(a,m)+(_?" "+_:"")})}function ce(a,h){a.info(function(){return"TIMEOUT: "+h})}M.prototype.info=function(){};function Z(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var _=m[a];if(!(2>_.length)){var L=_[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<L.length;q++)L[q]=""}}}}return bs(m)}catch{return h}}var J={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Y={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ne;function he(){}S(he,ks),he.prototype.g=function(){return new XMLHttpRequest},he.prototype.i=function(){return{}},ne=new he;function ve(a,h,m,_){this.j=a,this.i=h,this.l=m,this.R=_||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new It}function It(){this.i=null,this.g="",this.h=!1}var Fe={},Ae={};function Ge(a,h,m){a.L=1,a.v=Ml(xr(h)),a.m=m,a.P=!0,_r(a,null)}function _r(a,h){a.F=Date.now(),en(a),a.A=xr(a.v);var m=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),Xm(m.i,"t",_),a.C=0,m=a.j.J,a.h=new It,a.g=mg(a.j,m?h:null,!a.m),0<a.O&&(a.M=new Ps(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,_=a.ca;var L="readystatechange";Array.isArray(L)||(L&&(zn[0]=L.toString()),L=zn);for(var V=0;V<L.length;V++){var q=Ie(m,L[V],_||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),ir(),$(a.i,a.u,a.A,a.l,a.R,a.m)}ve.prototype.ca=function(a){a=a.target;const h=this.M;h&&Tr(a)==3?h.j():this.Y(a)},ve.prototype.Y=function(a){try{if(a==this.g)e:{const Wt=Tr(this.g);var h=this.g.Ba();const Ls=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||ig(this.g)))){this.J||Wt!=4||h==7||(h==8||0>=Ls?ir(3):ir(2)),wr(this);var m=this.g.Z();this.X=m;t:if(Jr(this)){var _=ig(this.g);a="";var L=_.length,V=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),yn(this);var q="";break t}this.h.i=new l.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(V&&h==L-1)});_.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=m==200,K(this.i,this.u,this.A,this.l,this.R,Wt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Lt=this.g;if((Qe=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Qe)){var Oe=Qe;break t}}Oe=null}if(m=Oe)te(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zr(this,m);else{this.o=!1,this.s=3,Ot(12),bn(this),yn(this);break e}}if(this.P){m=!0;let $n;for(;!this.J&&this.C<q.length;)if($n=Bn(this,q),$n==Ae){Wt==4&&(this.s=4,Ot(14),m=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if($n==Fe){this.s=4,Ot(15),te(this.i,this.l,q,"[Invalid Chunk]"),m=!1;break}else te(this.i,this.l,$n,null),Zr(this,$n);if(Jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||q.length!=0||this.h.h||(this.s=1,Ot(16),m=!1),this.o=this.o&&m,!m)te(this.i,this.l,q,"[Invalid Chunked Response]"),bn(this),yn(this);else if(0<q.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Ed(Ht),Ht.M=!0,Ot(11))}}else te(this.i,this.l,q,null),Zr(this,q);Wt==4&&bn(this),this.o&&!this.J&&(Wt==4?dg(this.j,this):(this.o=!1,en(this)))}else VT(this.g),m==400&&0<q.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),bn(this),yn(this)}}}catch{}finally{}};function Jr(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Bn(a,h){var m=a.C,_=h.indexOf(`
`,m);return _==-1?Ae:(m=Number(h.substring(m,_)),isNaN(m)?Fe:(_+=1,_+m>h.length?Ae:(h=h.slice(_,_+m),a.C=_+m,h)))}ve.prototype.cancel=function(){this.J=!0,bn(this)};function en(a){a.S=Date.now()+a.I,Ds(a,a.I)}function Ds(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=O(g(a.ba,a),h)}function wr(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ve.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ce(this.i,this.A),this.L!=2&&(ir(),Ot(17)),bn(this),this.s=2,yn(this)):Ds(this,this.S-a)};function yn(a){a.j.G==0||a.J||dg(a.j,a)}function bn(a){wr(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Fo(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Zr(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||st(m.h,a))){if(!a.K&&st(m.h,a)&&m.G==3){try{var _=m.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var L=_;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)$l(m),zl(m);else break e;wd(m),Ot(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=O(g(m.Za,m),6e3));if(1>=ei(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Yi(m,11)}else if((a.K||m.g==a)&&$l(m),!w(h))for(L=m.Da.g.parse(h),h=0;h<L.length;h++){let Oe=L[h];if(m.T=Oe[0],Oe=Oe[1],m.G==2)if(Oe[0]=="c"){m.K=Oe[1],m.ia=Oe[2];const Ht=Oe[3];Ht!=null&&(m.la=Ht,m.j.info("VER="+m.la));const Wt=Oe[4];Wt!=null&&(m.Aa=Wt,m.j.info("SVER="+m.Aa));const Ls=Oe[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(_=1.5*Ls,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const $n=a.g;if($n){const Wl=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wl){var V=_.h;V.g||Wl.indexOf("spdy")==-1&&Wl.indexOf("quic")==-1&&Wl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(sr(V,V.h),V.h=null))}if(_.D){const xd=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;xd&&(_.ya=xd,et(_.I,_.D,xd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var q=a;if(_.qa=pg(_,_.J?_.ia:null,_.W),q.K){$o(_.h,q);var Qe=q,Lt=_.L;Lt&&(Qe.I=Lt),Qe.B&&(wr(Qe),en(Qe)),_.g=q}else ug(_);0<m.i.length&&Bl(m)}else Oe[0]!="stop"&&Oe[0]!="close"||Yi(m,7);else m.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Yi(m,7):_d(m):Oe[0]!="noop"&&m.l&&m.l.ta(Oe),m.v=0)}}ir(4)}catch{}}var Pe=class{constructor(a,h){this.g=a,this.map=h}};function Ze(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Er(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ei(a){return a.h?1:a.g?a.g.size:0}function st(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function sr(a,h){a.g?a.g.add(h):a.h=h}function $o(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Ze.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function jl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return N(a.i)}function TT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],m=a.length,_=0;_<m;_++)h.push(a[_]);return h}h=[],m=0;for(_ in a)h[m++]=a[_];return h}function IT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const _ in a)h[m++]=_;return h}}}function Wm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=IT(a),_=TT(a),L=_.length,V=0;V<L;V++)h.call(void 0,_[V],m&&m[V],a)}var qm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ST(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var _=a[m].indexOf("="),L=null;if(0<=_){var V=a[m].substring(0,_);L=a[m].substring(_+1)}else V=a[m];h(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Gi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Gi){this.h=a.h,Ol(this,a.j),this.o=a.o,this.g=a.g,Ll(this,a.s),this.l=a.l;var h=a.i,m=new qo;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Qm(this,m),this.m=a.m}else a&&(h=String(a).match(qm))?(this.h=!1,Ol(this,h[1]||"",!0),this.o=Ho(h[2]||""),this.g=Ho(h[3]||"",!0),Ll(this,h[4]),this.l=Ho(h[5]||"",!0),Qm(this,h[6]||"",!0),this.m=Ho(h[7]||"")):(this.h=!1,this.i=new qo(null,this.h))}Gi.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Wo(h,Km,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Wo(h,Km,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Wo(m,m.charAt(0)=="/"?NT:AT,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Wo(m,PT)),a.join("")};function xr(a){return new Gi(a)}function Ol(a,h,m){a.j=m?Ho(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ll(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Qm(a,h,m){h instanceof qo?(a.i=h,bT(a.i,a.h)):(m||(h=Wo(h,CT)),a.i=new qo(h,a.h))}function et(a,h,m){a.i.set(h,m)}function Ml(a){return et(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ho(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Wo(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,RT),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function RT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Km=/[#\/\?@]/g,AT=/[#\?:]/g,NT=/[#\?]/g,CT=/[#\?@]/g,PT=/#/g;function qo(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function ti(a){a.g||(a.g=new Map,a.h=0,a.i&&ST(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=qo.prototype,t.add=function(a,h){ti(this),this.i=null,a=js(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function Gm(a,h){ti(a),h=js(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Ym(a,h){return ti(a),h=js(a,h),a.g.has(h)}t.forEach=function(a,h){ti(this),this.g.forEach(function(m,_){m.forEach(function(L){a.call(h,L,_,this)},this)},this)},t.na=function(){ti(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let _=0;_<h.length;_++){const L=a[_];for(let V=0;V<L.length;V++)m.push(h[_])}return m},t.V=function(a){ti(this);let h=[];if(typeof a=="string")Ym(this,a)&&(h=h.concat(this.g.get(js(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return ti(this),this.i=null,a=js(this,a),Ym(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Xm(a,h,m){Gm(a,h),0<m.length&&(a.i=null,a.g.set(js(a,h),N(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var _=h[m];const V=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var L=V;q[_]!==""&&(L+="="+encodeURIComponent(String(q[_]))),a.push(L)}}return this.i=a.join("&")};function js(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function bT(a,h){h&&!a.j&&(ti(a),a.i=null,a.g.forEach(function(m,_){var L=_.toLowerCase();_!=L&&(Gm(this,_),Xm(this,L,m))},a)),a.j=h}function kT(a,h){const m=new M;if(l.Image){const _=new Image;_.onload=E(ni,m,"TestLoadImage: loaded",!0,h,_),_.onerror=E(ni,m,"TestLoadImage: error",!1,h,_),_.onabort=E(ni,m,"TestLoadImage: abort",!1,h,_),_.ontimeout=E(ni,m,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function DT(a,h){const m=new M,_=new AbortController,L=setTimeout(()=>{_.abort(),ni(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(V=>{clearTimeout(L),V.ok?ni(m,"TestPingServer: ok",!0,h):ni(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),ni(m,"TestPingServer: error",!1,h)})}function ni(a,h,m,_,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),_(m)}catch{}}function jT(){this.g=new yd}function OT(a,h,m){const _=m||"";try{Wm(a,function(L,V){let q=L;c(L)&&(q=bs(L)),h.push(_+V+"="+encodeURIComponent(q))})}catch(L){throw h.push(_+"type="+encodeURIComponent("_badmap")),L}}function Vl(a){this.l=a.Ub||null,this.j=a.eb||!1}S(Vl,ks),Vl.prototype.g=function(){return new Ul(this.l,this.j)},Vl.prototype.i=function(a){return function(){return a}}({});function Ul(a,h){de.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ul,de),t=Ul.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ko(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ko(this)),this.g&&(this.readyState=3,Ko(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Qo(this):Ko(this),this.readyState==3&&Jm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Qo(this))},t.Qa=function(a){this.g&&(this.response=a,Qo(this))},t.ga=function(){this.g&&Qo(this)};function Qo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ko(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function Ko(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Zm(a){let h="";return F(a,function(m,_){h+=_,h+=":",h+=m,h+=`\r
`}),h}function vd(a,h,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Zm(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):et(a,h,m))}function gt(a){de.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(gt,de);var LT=/^https?$/i,MT=["POST","PUT"];t=gt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ne.g(),this.v=this.o?Wi(this.o):Wi(ne),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){eg(this,V);return}if(a=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var L in _)m.set(L,_[L]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const V of _.keys())m.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),L=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(MT,h,void 0))||_||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of m)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rg(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){eg(this,V)}};function eg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,tg(a),Fl(a)}function tg(a){a.A||(a.A=!0,Ve(a,"complete"),Ve(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ve(this,"complete"),Ve(this,"abort"),Fl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fl(this,!0)),gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ng(this):this.bb())},t.bb=function(){ng(this)};function ng(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Tr(a)!=4||a.Z()!=2)){if(a.u&&Tr(a)==4)Pn(a.Ea,0,a);else if(Ve(a,"readystatechange"),Tr(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var _;if(_=q===0){var L=String(a.D).match(qm)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),_=!LT.test(L?L.toLowerCase():"")}m=_}if(m)Ve(a,"complete"),Ve(a,"success");else{a.m=6;try{var V=2<Tr(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",tg(a)}}finally{Fl(a)}}}}function Fl(a,h){if(a.g){rg(a);const m=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||Ve(a,"ready");try{m.onreadystatechange=_}catch{}}}function rg(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Tr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),bl(h)}};function ig(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function VT(a){const h={};a=(a.g&&2<=Tr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(w(a[_]))continue;var m=C(a[_]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=h[L]||[];h[L]=V,V.push(m)}y(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Go(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function sg(a){this.Aa=0,this.i=[],this.j=new M,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Go("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Go("baseRetryDelayMs",5e3,a),this.cb=Go("retryDelaySeedMs",1e4,a),this.Wa=Go("forwardChannelMaxRetries",2,a),this.wa=Go("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ze(a&&a.concurrentRequestLimit),this.Da=new jT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sg.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,_){Ot(0),this.W=a,this.H=h||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=pg(this,null,this.W),Bl(this)};function _d(a){if(og(a),a.G==3){var h=a.U++,m=xr(a.I);if(et(m,"SID",a.K),et(m,"RID",h),et(m,"TYPE","terminate"),Yo(a,m),h=new ve(a,a.j,h),h.L=2,h.v=Ml(xr(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=mg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),en(h)}fg(a)}function zl(a){a.g&&(Ed(a),a.g.cancel(),a.g=null)}function og(a){zl(a),a.u&&(l.clearTimeout(a.u),a.u=null),$l(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Bl(a){if(!Er(a.h)&&!a.s){a.s=!0;var h=a.Ga;Re||se(),B||(Re(),B=!0),ie.add(h,a),a.B=0}}function UT(a,h){return ei(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=O(g(a.Ga,a,h),hg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const L=new ve(this,this.j,a);let V=this.o;if(this.S&&(V?(V=v(V),x(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=lg(this,L,h),m=xr(this.I),et(m,"RID",a),et(m,"CVER",22),this.D&&et(m,"X-HTTP-Session-Id",this.D),Yo(this,m),V&&(this.O?h="headers="+encodeURIComponent(String(Zm(V)))+"&"+h:this.m&&vd(m,this.m,V)),sr(this.h,L),this.Ua&&et(m,"TYPE","init"),this.P?(et(m,"$req",h),et(m,"SID","null"),L.T=!0,Ge(L,m,null)):Ge(L,m,h),this.G=2}}else this.G==3&&(a?ag(this,a):this.i.length==0||Er(this.h)||ag(this))};function ag(a,h){var m;h?m=h.l:m=a.U++;const _=xr(a.I);et(_,"SID",a.K),et(_,"RID",m),et(_,"AID",a.T),Yo(a,_),a.m&&a.o&&vd(_,a.m,a.o),m=new ve(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=lg(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),sr(a.h,m),Ge(m,_,h)}function Yo(a,h){a.H&&F(a.H,function(m,_){et(h,_,m)}),a.l&&Wm({},function(m,_){et(h,_,m)})}function lg(a,h,m){m=Math.min(a.i.length,m);var _=a.l?g(a.l.Na,a.l,a):null;e:{var L=a.i;let V=-1;for(;;){const q=["count="+m];V==-1?0<m?(V=L[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let Qe=!0;for(let Lt=0;Lt<m;Lt++){let Oe=L[Lt].g;const Ht=L[Lt].map;if(Oe-=V,0>Oe)V=Math.max(0,L[Lt].g-100),Qe=!1;else try{OT(Ht,q,"req"+Oe+"_")}catch{_&&_(Ht)}}if(Qe){_=q.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,_}function ug(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Re||se(),B||(Re(),B=!0),ie.add(h,a),a.v=0}}function wd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=O(g(a.Fa,a),hg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,cg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=O(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),zl(this),cg(this))};function Ed(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function cg(a){a.g=new ve(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=xr(a.qa);et(h,"RID","rpc"),et(h,"SID",a.K),et(h,"AID",a.T),et(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&et(h,"TO",a.ja),et(h,"TYPE","xmlhttp"),Yo(a,h),a.m&&a.o&&vd(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=Ml(xr(h)),m.m=null,m.P=!0,_r(m,a)}t.Za=function(){this.C!=null&&(this.C=null,zl(this),wd(this),Ot(19))};function $l(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function dg(a,h){var m=null;if(a.g==h){$l(a),Ed(a),a.g=null;var _=2}else if(st(a.h,h))m=h.D,$o(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var L=a.B;_=Qi(),Ve(_,new P(_,m)),Bl(a)}else ug(a);else if(L=h.s,L==3||L==0&&0<h.X||!(_==1&&UT(a,h)||_==2&&wd(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),L){case 1:Yi(a,5);break;case 4:Yi(a,10);break;case 3:Yi(a,6);break;default:Yi(a,2)}}}function hg(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function Yi(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),_=a.Xa;const L=!_;_=new Gi(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ol(_,"https"),Ml(_),L?kT(_.toString(),m):DT(_.toString(),m)}else Ot(2);a.G=0,a.l&&a.l.sa(h),fg(a),og(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function fg(a){if(a.G=0,a.ka=[],a.l){const h=jl(a.h);(h.length!=0||a.i.length!=0)&&(D(a.ka,h),D(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function pg(a,h,m){var _=m instanceof Gi?xr(m):new Gi(m);if(_.g!="")h&&(_.g=h+"."+_.g),Ll(_,_.s);else{var L=l.location;_=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var V=new Gi(null);_&&Ol(V,_),h&&(V.g=h),L&&Ll(V,L),m&&(V.l=m),_=V}return m=a.D,h=a.ya,m&&h&&et(_,m,h),et(_,"VER",a.la),Yo(a,_),_}function mg(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new gt(new Vl({eb:m})):new gt(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gg(){}t=gg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hl(){}Hl.prototype.g=function(a,h){return new vn(a,h)};function vn(a,h){de.call(this),this.g=new sg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!w(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Os(this)}S(vn,de),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){_d(this.g)},vn.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=bs(a),a=m);h.i.push(new Pe(h.Ya++,a)),h.G==3&&Bl(h)},vn.prototype.N=function(){this.g.l=null,delete this.j,_d(this.g),delete this.g,vn.aa.N.call(this)};function yg(a){qi.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}S(yg,qi);function vg(){Bo.call(this),this.status=1}S(vg,Bo);function Os(a){this.g=a}S(Os,gg),Os.prototype.ua=function(){Ve(this.g,"a")},Os.prototype.ta=function(a){Ve(this.g,new yg(a))},Os.prototype.sa=function(a){Ve(this.g,new vg)},Os.prototype.ra=function(){Ve(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,FE=function(){return new Hl},UE=function(){return Qi()},VE=rr,_f={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},J.NO_ERROR=0,J.TIMEOUT=8,J.HTTP_ERROR=6,Ou=J,Y.COMPLETE="complete",ME=Y,zo.EventType=vr,vr.OPEN="a",vr.CLOSE="b",vr.ERROR="c",vr.MESSAGE="d",de.prototype.listen=de.prototype.K,ga=zo,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,LE=gt}).apply(typeof hu<"u"?hu:typeof self<"u"?self:typeof window<"u"?window:{});const xv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new Fp("@firebase/firestore");function la(){return ws.logLevel}function ee(t,...e){if(ws.logLevel<=Ne.DEBUG){const n=e.map(Zp);ws.debug(`Firestore (${Do}): ${t}`,...n)}}function Qr(t,...e){if(ws.logLevel<=Ne.ERROR){const n=e.map(Zp);ws.error(`Firestore (${Do}): ${t}`,...n)}}function Eo(t,...e){if(ws.logLevel<=Ne.WARN){const n=e.map(Zp);ws.warn(`Firestore (${Do}): ${t}`,...n)}}function Zp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+t;throw Qr(e),new Error(e)}function $e(t,e){t||pe()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ab{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class Nb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Cb{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Or,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new zE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Gt(e)}}class Pb{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bb{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Pb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Db{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){$e(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string"),this.R=n.token,new kb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=jb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function xo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new bt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new bt(0,0))}static max(){return new me(new bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(),r===void 0?r=e.length-n:r>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof nl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class rt extends nl{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const Ob=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends nl{construct(e,n,r){return new Ut(e,n,r)}static isValidIdentifier(e){return Ob.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ut(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new G(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new G(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(n)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(rt.fromString(e))}static fromName(e){return new oe(rt.fromString(e).popFirst(5))}static empty(){return new oe(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new rt(e.slice()))}}function Lb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new bt(n+1,0):new bt(n,r));return new ji(i,oe.empty(),e)}function Mb(t){return new ji(t.readTime,t.key,-1)}class ji{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ji(me.min(),oe.empty(),-1)}static max(){return new ji(me.max(),oe.empty(),-1)}}function Vb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==Ub)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(i=>i?H.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new H((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new H((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function zb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Il(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}em.oe=-1;function Zc(t){return t==null}function Tc(t){return t===0&&1/t==-1/0}function Bb(t){return typeof t=="number"&&Number.isInteger(t)&&!Tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ns(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $E(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||Vt.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fu(this.root,e,this.comparator,!0)}}class fu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Vt.RED,this.left=i??Vt.EMPTY,this.right=s??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Vt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Vt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iv(this.data.getIterator())}getIteratorFrom(e){return new Iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class Iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new In([])}unionWith(e){let n=new zt(Ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HE("Invalid base64 string: "+s):s}}(e);return new $t(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new $t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const $b=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(t){if($e(!!t),typeof t=="string"){let e=0;const n=$b.exec(t);if($e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Es(t){return typeof t=="string"?$t.fromBase64String(t):$t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nm(t){const e=t.mapValue.fields.__previous_value__;return tm(e)?nm(e):e}function rl(t){const e=Oi(t.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class il{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new il("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu={mapValue:{}};function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tm(t)?4:qb(t)?9007199254740991:Wb(t)?10:11:pe()}function gr(t,e){if(t===e)return!0;const n=xs(t);if(n!==xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rl(t).isEqual(rl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Oi(i.timestampValue),l=Oi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Es(i.bytesValue).isEqual(Es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Et(i.geoPointValue.latitude)===Et(s.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Et(i.integerValue)===Et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Et(i.doubleValue),l=Et(s.doubleValue);return o===l?Tc(o)===Tc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return xo(t.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Tv(o)!==Tv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!gr(o[u],l[u])))return!1;return!0}(t,e);default:return pe()}}function sl(t,e){return(t.values||[]).find(n=>gr(n,e))!==void 0}function To(t,e){if(t===e)return 0;const n=xs(t),r=xs(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Et(s.integerValue||s.doubleValue),u=Et(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Sv(t.timestampValue,e.timestampValue);case 4:return Sv(rl(t),rl(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Es(s),u=Es(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=Le(l[c],u[c]);if(f!==0)return f}return Le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Le(Et(s.latitude),Et(o.latitude));return l!==0?l:Le(Et(s.longitude),Et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Rv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,f;const p=s.fields||{},g=o.fields||{},E=(l=p.value)===null||l===void 0?void 0:l.arrayValue,S=(u=g.value)===null||u===void 0?void 0:u.arrayValue,N=Le(((c=E==null?void 0:E.values)===null||c===void 0?void 0:c.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:Rv(E,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===pu.mapValue&&o===pu.mapValue)return 0;if(s===pu.mapValue)return 1;if(o===pu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=Le(u[p],f[p]);if(g!==0)return g;const E=To(l[u[p]],c[f[p]]);if(E!==0)return E}return Le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw pe()}}function Sv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=Oi(t),r=Oi(e),i=Le(n.seconds,r.seconds);return i!==0?i:Le(n.nanos,r.nanos)}function Rv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=To(n[i],r[i]);if(s)return s}return Le(n.length,r.length)}function Io(t){return wf(t)}function wf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=wf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${wf(n.fields[o])}`;return i+"}"}(t.mapValue):pe()}function Av(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ef(t){return!!t&&"integerValue"in t}function rm(t){return!!t&&"arrayValue"in t}function Nv(t){return!!t&&"nullValue"in t}function Cv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lu(t){return!!t&&"mapValue"in t}function Wb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Pa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ns(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pa(n)}setAll(e){let n=Ut.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Pa(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Lu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ns(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new cn(Pa(this.value))}}function WE(t){const e=[];return Ns(t.fields,(n,r)=>{const i=new Ut([n]);if(Lu(r)){const s=WE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Xt(e,0,me.min(),me.min(),me.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new Xt(e,1,n,me.min(),r,i,0)}static newNoDocument(e,n){return new Xt(e,2,n,me.min(),me.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,me.min(),me.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.position=e,this.inclusive=n}}function Pv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=oe.comparator(oe.fromName(o.referenceValue),n.key):r=To(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function bv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function Qb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{}class Nt extends qE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Gb(e,n,r):n==="array-contains"?new Jb(e,r):n==="in"?new Zb(e,r):n==="not-in"?new ek(e,r):n==="array-contains-any"?new tk(e,r):new Nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Yb(e,r):new Xb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(To(n,this.value)):n!==null&&xs(this.value)===xs(n)&&this.matchesComparison(To(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class er extends qE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new er(e,n)}matches(e){return QE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function QE(t){return t.op==="and"}function KE(t){return Kb(t)&&QE(t)}function Kb(t){for(const e of t.filters)if(e instanceof er)return!1;return!0}function xf(t){if(t instanceof Nt)return t.field.canonicalString()+t.op.toString()+Io(t.value);if(KE(t))return t.filters.map(e=>xf(e)).join(",");{const e=t.filters.map(n=>xf(n)).join(",");return`${t.op}(${e})`}}function GE(t,e){return t instanceof Nt?function(r,i){return i instanceof Nt&&r.op===i.op&&r.field.isEqual(i.field)&&gr(r.value,i.value)}(t,e):t instanceof er?function(r,i){return i instanceof er&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&GE(o,i.filters[l]),!0):!1}(t,e):void pe()}function YE(t){return t instanceof Nt?function(n){return`${n.field.canonicalString()} ${n.op} ${Io(n.value)}`}(t):t instanceof er?function(n){return n.op.toString()+" {"+n.getFilters().map(YE).join(" ,")+"}"}(t):"Filter"}class Gb extends Nt{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Yb extends Nt{constructor(e,n){super(e,"in",n),this.keys=XE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Xb extends Nt{constructor(e,n){super(e,"not-in",n),this.keys=XE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>oe.fromName(r.referenceValue))}class Jb extends Nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rm(n)&&sl(n.arrayValue,this.value)}}class Zb extends Nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sl(this.value.arrayValue,n)}}class ek extends Nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sl(this.value.arrayValue,n)}}class tk extends Nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function kv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new nk(t,e,n,r,i,s,o)}function im(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Io(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Io(r)).join(",")),e.ue=n}return e.ue}function sm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Qb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bv(t.startAt,e.startAt)&&bv(t.endAt,e.endAt)}function Tf(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rk(t,e,n,r,i,s,o,l){return new jo(t,e,n,r,i,s,o,l)}function om(t){return new jo(t)}function Dv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function JE(t){return t.collectionGroup!==null}function ba(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new zt(Ut.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ol(s,r))}),n.has(Ut.keyField().canonicalString())||e.ce.push(new ol(Ut.keyField(),r))}return e.ce}function fr(t){const e=ge(t);return e.le||(e.le=ik(e,ba(t))),e.le}function ik(t,e){if(t.limitType==="F")return kv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ol(i.field,s)});const n=t.endAt?new Ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ic(t.startAt.position,t.startAt.inclusive):null;return kv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function If(t,e){const n=t.filters.concat([e]);return new jo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sc(t,e,n){return new jo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ed(t,e){return sm(fr(t),fr(e))&&t.limitType===e.limitType}function ZE(t){return`${im(fr(t))}|lt:${t.limitType}`}function Us(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>YE(i)).join(", ")}]`),Zc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Io(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Io(i)).join(",")),`Target(${r})`}(fr(t))}; limitType=${t.limitType})`}function td(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):oe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ba(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=Pv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,ba(r),i)||r.endAt&&!function(o,l,u){const c=Pv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,ba(r),i))}(t,e)}function sk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ex(t){return(e,n)=>{let r=!1;for(const i of ba(t)){const s=ok(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ok(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?To(u,c):pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=new pt(oe.comparator);function Kr(){return ak}const tx=new pt(oe.comparator);function ya(...t){let e=tx;for(const n of t)e=e.insert(n.key,n);return e}function nx(t){let e=tx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function as(){return ka()}function rx(){return ka()}function ka(){return new Oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const lk=new pt(oe.comparator),uk=new zt(oe.comparator);function Se(...t){let e=uk;for(const n of t)e=e.add(n);return e}const ck=new zt(Le);function dk(){return ck}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function ix(t){return{integerValue:""+t}}function hk(t,e){return Bb(e)?ix(e):am(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function fk(t,e,n){return t instanceof al?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tm(s)&&(s=nm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ll?ox(t,e):t instanceof ul?ax(t,e):function(i,s){const o=sx(i,s),l=jv(o)+jv(i.Pe);return Ef(o)&&Ef(i.Pe)?ix(l):am(i.serializer,l)}(t,e)}function pk(t,e,n){return t instanceof ll?ox(t,e):t instanceof ul?ax(t,e):n}function sx(t,e){return t instanceof Rc?function(r){return Ef(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class al extends nd{}class ll extends nd{constructor(e){super(),this.elements=e}}function ox(t,e){const n=lx(e);for(const r of t.elements)n.some(i=>gr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ul extends nd{constructor(e){super(),this.elements=e}}function ax(t,e){let n=lx(e);for(const r of t.elements)n=n.filter(i=>!gr(i,r));return{arrayValue:{values:n}}}class Rc extends nd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function jv(t){return Et(t.integerValue||t.doubleValue)}function lx(t){return rm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n){this.field=e,this.transform=n}}function gk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ll&&i instanceof ll||r instanceof ul&&i instanceof ul?xo(r.elements,i.elements,gr):r instanceof Rc&&i instanceof Rc?gr(r.Pe,i.Pe):r instanceof al&&i instanceof al}(t.transform,e.transform)}class yk{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rd{}function ux(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lm(t.key,Jn.none()):new Sl(t.key,t.data,Jn.none());{const n=t.data,r=cn.empty();let i=new zt(Ut.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Bi(t.key,r,new In(i.toArray()),Jn.none())}}function vk(t,e,n){t instanceof Sl?function(i,s,o){const l=i.value.clone(),u=Lv(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Bi?function(i,s,o){if(!Mu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Lv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(cx(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Da(t,e,n,r){return t instanceof Sl?function(s,o,l,u){if(!Mu(s.precondition,o))return l;const c=s.value.clone(),f=Mv(s.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Bi?function(s,o,l,u){if(!Mu(s.precondition,o))return l;const c=Mv(s.fieldTransforms,u,o),f=o.data;return f.setAll(cx(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return Mu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function _k(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=sx(r.transform,i||null);s!=null&&(n===null&&(n=cn.empty()),n.set(r.field,s))}return n||null}function Ov(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xo(r,i,(s,o)=>gk(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sl extends rd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bi extends rd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Lv(t,e,n){const r=new Map;$e(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,pk(o,l,n[i]))}return r}function Mv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,fk(s,o,e))}return r}class lm extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wk extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&vk(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Da(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rx();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=ux(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,(n,r)=>Ov(n,r))&&xo(this.baseMutations,e.baseMutations,(n,r)=>Ov(n,r))}}class um{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$e(e.mutations.length===r.length);let i=function(){return lk}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new um(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,be;function Ik(t){switch(t){default:return pe();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function dx(t){if(t===void 0)return Qr("GRPC error has no .code"),z.UNKNOWN;switch(t){case St.OK:return z.OK;case St.CANCELLED:return z.CANCELLED;case St.UNKNOWN:return z.UNKNOWN;case St.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case St.INTERNAL:return z.INTERNAL;case St.UNAVAILABLE:return z.UNAVAILABLE;case St.UNAUTHENTICATED:return z.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case St.NOT_FOUND:return z.NOT_FOUND;case St.ALREADY_EXISTS:return z.ALREADY_EXISTS;case St.PERMISSION_DENIED:return z.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case St.ABORTED:return z.ABORTED;case St.OUT_OF_RANGE:return z.OUT_OF_RANGE;case St.UNIMPLEMENTED:return z.UNIMPLEMENTED;case St.DATA_LOSS:return z.DATA_LOSS;default:return pe()}}(be=St||(St={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=new ds([4294967295,4294967295],0);function Vv(t){const e=Sk().encode(t),n=new OE;return n.update(e),new Uint8Array(n.digest())}function Uv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ds([n,r],0),new ds([i,s],0)]}class cm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new va(`Invalid padding: ${n}`);if(r<0)throw new va(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new va(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new va(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ds.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ds.fromNumber(r)));return i.compare(Rk)===1&&(i=new ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Vv(e),[r,i]=Uv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new cm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Vv(e),[r,i]=Uv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new id(me.min(),i,new pt(Le),Kr(),Se())}}class Rl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rl(r,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class hx{constructor(e,n){this.targetId=e,this.me=n}}class fx{constructor(e,n,r=$t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Fv{constructor(){this.fe=0,this.ge=Bv(),this.pe=$t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),r=Se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pe()}}),new Rl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Bv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ak{constructor(e){this.Le=e,this.Be=new Map,this.ke=Kr(),this.qe=zv(),this.Qe=new pt(Le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Tf(s))if(r===0){const o=new oe(s.path);this.Ue(n,o,Xt.newNoDocument(o,me.min()))}else $e(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Es(r).toUint8Array()}catch(u){if(u instanceof HE)return Eo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new cm(o,i,s)}catch(u){return Eo(u instanceof va?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Tf(l.target)){const u=new oe(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Xt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Se();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new id(e,n,this.Qe,this.ke,r);return this.ke=Kr(),this.qe=zv(),this.Qe=new pt(Le),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Fv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new zt(Le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Fv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function zv(){return new pt(oe.comparator)}function Bv(){return new pt(oe.comparator)}const Nk={asc:"ASCENDING",desc:"DESCENDING"},Ck={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pk={and:"AND",or:"OR"};class bk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sf(t,e){return t.useProto3Json||Zc(e)?e:{value:e}}function Ac(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function px(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kk(t,e){return Ac(t,e.toTimestamp())}function pr(t){return $e(!!t),me.fromTimestamp(function(n){const r=Oi(n);return new bt(r.seconds,r.nanos)}(t))}function dm(t,e){return Rf(t,e).canonicalString()}function Rf(t,e){const n=function(i){return new rt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mx(t){const e=rt.fromString(t);return $e(wx(e)),e}function Af(t,e){return dm(t.databaseId,e.path)}function sh(t,e){const n=mx(e);if(n.get(1)!==t.databaseId.projectId)throw new G(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(yx(n))}function gx(t,e){return dm(t.databaseId,e)}function Dk(t){const e=mx(t);return e.length===4?rt.emptyPath():yx(e)}function Nf(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yx(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $v(t,e,n){return{name:Af(t,e),fields:n.value.mapValue.fields}}function jk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?($e(f===void 0||typeof f=="string"),$t.fromBase64String(f||"")):($e(f===void 0||f instanceof Buffer||f instanceof Uint8Array),$t.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const f=c.code===void 0?z.UNKNOWN:dx(c.code);return new G(f,c.message||"")}(o);n=new fx(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=sh(t,r.document.name),s=pr(r.document.updateTime),o=r.document.createTime?pr(r.document.createTime):me.min(),l=new cn({mapValue:{fields:r.document.fields}}),u=Xt.newFoundDocument(i,s,o,l),c=r.targetIds||[],f=r.removedTargetIds||[];n=new Vu(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=sh(t,r.document),s=r.readTime?pr(r.readTime):me.min(),o=Xt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Vu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=sh(t,r.document),s=r.removedTargetIds||[];n=new Vu([],s,i,null)}else{if(!("filter"in e))return pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Tk(i,s),l=r.targetId;n=new hx(l,o)}}return n}function Ok(t,e){let n;if(e instanceof Sl)n={update:$v(t,e.key,e.value)};else if(e instanceof lm)n={delete:Af(t,e.key)};else if(e instanceof Bi)n={update:$v(t,e.key,e.data),updateMask:Hk(e.fieldMask)};else{if(!(e instanceof wk))return pe();n={verify:Af(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof al)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ul)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Rc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:kk(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:pe()}(t,e.precondition)),n}function Lk(t,e){return t&&t.length>0?($e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?pr(i.updateTime):pr(s);return o.isEqual(me.min())&&(o=pr(s)),new yk(o,i.transformResults||[])}(n,e))):[]}function Mk(t,e){return{documents:[gx(t,e.path)]}}function Vk(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gx(t,i);const s=function(c){if(c.length!==0)return _x(er.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(g){return{field:Fs(g.field),direction:zk(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Sf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function Uk(t){let e=Dk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$e(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const g=vx(p);return g instanceof er&&KE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(S){return new ol(zs(S.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Zc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,E=p.values||[];return new Ic(E,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,E=p.values||[];return new Ic(E,g)}(n.endAt)),rk(e,i,o,s,l,"F",u,c)}function Fk(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zs(n.unaryFilter.field);return Nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zs(n.unaryFilter.field);return Nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return Nt.create(zs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return er.create(n.compositeFilter.filters.map(r=>vx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function zk(t){return Nk[t]}function Bk(t){return Ck[t]}function $k(t){return Pk[t]}function Fs(t){return{fieldPath:t.canonicalString()}}function zs(t){return Ut.fromServerFormat(t.fieldPath)}function _x(t){return t instanceof Nt?function(n){if(n.op==="=="){if(Cv(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NAN"}};if(Nv(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cv(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NAN"}};if(Nv(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(n.field),op:Bk(n.op),value:n.value}}}(t):t instanceof er?function(n){const r=n.getFilters().map(i=>_x(i));return r.length===1?r[0]:{compositeFilter:{op:$k(n.op),filters:r}}}(t):pe()}function Hk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n,r,i,s=me.min(),o=me.min(),l=$t.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.ct=e}}function qk(t){const e=Uk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.un=new Kk}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(ji.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class Kk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new zt(rt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new So(0)}static kn(){return new So(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.changes=new Oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Da(r.mutation,i,In.empty(),bt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Se()){const i=as();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ya();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=as();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Kr();const o=ka(),l=function(){return ka()}();return n.forEach((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof Bi)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),Da(f.mutation,c,f.mutation.getFieldMask(),bt.now())):o.set(c.key,In.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var p;return l.set(c,new Yk(f,(p=o.get(c))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ka();let i=new pt((o,l)=>o-l),s=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||In.empty();f=l.applyToLocalView(c,f),r.set(u,f);const p=(i.get(l.batchId)||Se()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,p=rx();f.forEach(g=>{if(!s.has(g)){const E=ux(n.get(g),r.get(g));E!==null&&p.set(g,E),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):JE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):H.resolve(as());let l=-1,u=s;return o.next(c=>H.forEach(c,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?H.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Se())).next(f=>({batchId:l,changes:nx(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(r=>{let i=ya();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ya();return this.indexManager.getCollectionParents(e,s).next(l=>H.forEach(l,u=>{const c=function(p,g){return new jo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,Xt.newInvalidDocument(f)))});let l=ya();return o.forEach((u,c)=>{const f=s.get(u);f!==void 0&&Da(f.mutation,c,In.empty(),bt.now()),td(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pr(i.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:qk(i.bundledQuery),readTime:pr(i.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.overlays=new pt(oe.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=as();return H.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const i=as(),s=n.length+1,o=new oe(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return H.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new pt((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=as(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=as(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=i)););return H.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xk(n,r));let s=this.Ir.get(n);s===void 0&&(s=Se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this.Tr=new zt(kt.Er),this.dr=new zt(kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new kt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new oe(new rt([])),r=new kt(n,e),i=new kt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new rt([])),r=new kt(n,e),i=new kt(n,e+1);let s=Se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new kt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Le(e.wr,n.wr)}static Ar(e,n){return Le(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new zt(kt.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ek(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new kt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),i=new kt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new zt(Le);return n.forEach(i=>{const s=new kt(i,0),o=new kt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;oe.isDocumentKey(s)||(s=s.child(""));const o=new kt(new oe(s),0);let l=new zt(Le);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},o),H.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,i=>{const s=new kt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new kt(n,0),i=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.Mr=e,this.docs=function(){return new pt(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=Kr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xt.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Kr();const o=n.path,l=new oe(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Vb(Mb(f),r)<=0||(i.has(f.key)||td(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,r,i){pe()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new r1(this)}getSize(e){return H.resolve(this.size)}}class r1 extends Gk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.persistence=e,this.Nr=new Oo(n=>im(n),sm),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hm,this.targetCount=0,this.kr=So.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new So(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new em(0),this.Kr=!1,this.Kr=!0,this.$r=new e1,this.referenceDelegate=e(this),this.Ur=new i1(this),this.indexManager=new Qk,this.remoteDocumentCache=function(i){return new n1(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Wk(n),this.Gr=new Jk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Zk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new t1(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new o1(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class o1 extends Fb{constructor(e){super(),this.currentSequenceNumber=e}}class fm{constructor(e){this.persistence=e,this.Jr=new hm,this.Yr=null}static Zr(e){return new fm(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const i=oe.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Se(),i=Se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new pm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hN()?8:zb(Zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new a1;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(la()<=Ne.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(la()<=Ne.DEBUG&&ee("QueryEngine","Query:",Us(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(la()<=Ne.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fr(n))):H.resolve())}Yi(e,n){if(Dv(n))return H.resolve(null);let r=fr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sc(n,null,"F"),r=fr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Se(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,Sc(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return Dv(n)||i.isEqual(me.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?H.resolve(null):(la()<=Ne.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Us(n)),this.rs(e,o,n,Lb(i,-1)).next(l=>l))})}ts(e,n){let r=new zt(ex(e));return n.forEach((i,s)=>{td(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return la()<=Ne.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Us(n)),this.Ji.getDocumentsMatchingQuery(e,n,ji.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new pt(Le),this._s=new Oo(s=>im(s),sm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function c1(t,e,n,r){return new u1(t,e,n,r)}async function Ex(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=Se();for(const c of i){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function d1(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const p=c.batch,g=p.keys();let E=H.resolve();return g.forEach(S=>{E=E.next(()=>f.getEntry(u,S)).next(N=>{const D=c.docVersions.get(S);$e(D!==null),N.version.compareTo(D)<0&&(p.applyToRemoteDocument(N,c),N.isValidDocument()&&(N.setReadTime(c.commitVersion),f.addEntry(N)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Se();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function xx(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function h1(t,e){const n=ge(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let E=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken($t.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(p,E),function(N,D,I){return N.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(g,E,f)&&l.push(n.Ur.updateTargetData(s,E))});let u=Kr(),c=Se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(f1(s,o,e.documentUpdates).next(f=>{u=f.Ps,c=f.Is})),!r.isEqual(me.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return H.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function f1(t,e,n){let r=Se(),i=Se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Kr();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(me.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ee("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function p1(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function m1(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new _i(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Cf(t,e,n){const r=ge(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Il(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Hv(t,e,n){const r=ge(t);let i=me.min(),s=Se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const p=ge(u),g=p._s.get(f);return g!==void 0?H.resolve(p.os.get(g)):p.Ur.getTargetData(c,f)}(r,o,fr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:me.min(),n?s:Se())).next(l=>(g1(r,sk(e),l),{documents:l,Ts:s})))}function g1(t,e,n){let r=t.us.get(e)||me.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Wv{constructor(){this.activeTargetIds=dk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y1{constructor(){this.so=new Wv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu=null;function oh(){return mu===null?mu=function(){return 268435456+Math.round(2147483648*Math.random())}():mu++,"0x"+mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class E1 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=oh(),u=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(f=>(ee("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Eo("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=_1[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=oh();return new Promise((o,l)=>{const u=new LE;u.setWithCredentials(!0),u.listenOnce(ME.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ou.NO_ERROR:const f=u.getResponseJson();ee(Kt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ou.TIMEOUT:ee(Kt,`RPC '${e}' ${s} timed out`),l(new G(z.DEADLINE_EXCEEDED,"Request time out"));break;case Ou.HTTP_ERROR:const p=u.getStatus();if(ee(Kt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const S=function(D){const I=D.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(I)>=0?I:z.UNKNOWN}(E.status);l(new G(S,E.message))}else l(new G(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(z.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{ee(Kt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ee(Kt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=oh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FE(),l=UE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ee(Kt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,E=!1;const S=new w1({Io:D=>{E?ee(Kt,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(g||(ee(Kt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ee(Kt,`RPC '${e}' stream ${i} sending:`,D),p.send(D))},To:()=>p.close()}),N=(D,I,w)=>{D.listen(I,R=>{try{w(R)}catch(j){setTimeout(()=>{throw j},0)}})};return N(p,ga.EventType.OPEN,()=>{E||(ee(Kt,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),N(p,ga.EventType.CLOSE,()=>{E||(E=!0,ee(Kt,`RPC '${e}' stream ${i} transport closed`),S.So())}),N(p,ga.EventType.ERROR,D=>{E||(E=!0,Eo(Kt,`RPC '${e}' stream ${i} transport errored:`,D),S.So(new G(z.UNAVAILABLE,"The operation could not be completed")))}),N(p,ga.EventType.MESSAGE,D=>{var I;if(!E){const w=D.data[0];$e(!!w);const R=w,j=R.error||((I=R[0])===null||I===void 0?void 0:I.error);if(j){ee(Kt,`RPC '${e}' stream ${i} received error:`,j);const U=j.status;let F=function(T){const x=St[T];if(x!==void 0)return dx(x)}(U),y=j.message;F===void 0&&(F=z.INTERNAL,y="Unknown error status: "+U+" with message "+j.message),E=!0,S.So(new G(F,y)),p.close()}else ee(Kt,`RPC '${e}' stream ${i} received:`,w),S.bo(w)}}),N(l,VE.STAT_EVENT,D=>{D.stat===_f.PROXY?ee(Kt,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===_f.NOPROXY&&ee(Kt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function ah(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){return new bk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Qr(n.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new G(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x1 extends Ix{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=jk(this.serializer,e),r=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?pr(o.readTime):me.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Nf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Tf(u)?{documents:Mk(s,u)}:{query:Vk(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=px(s,o.resumeToken);const c=Sf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){l.readTime=Ac(s,o.snapshotVersion.toTimestamp());const c=Sf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=Fk(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Nf(this.serializer),n.removeTarget=e,this.a_(n)}}class T1 extends Ix{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Lk(e.writeResults,e.commitTime),r=pr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Nf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ok(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new G(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Rf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Rf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class S1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qr(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Cs(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ge(u);c.L_.add(4),await Al(c),c.q_.set("Unknown"),c.L_.delete(4),await od(c)}(this))})}),this.q_=new S1(r,i)}}async function od(t){if(Cs(t))for(const e of t.B_)await e(!0)}async function Al(t){for(const e of t.B_)await e(!1)}function Sx(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vm(n)?ym(n):Lo(n).r_()&&gm(n,e))}function mm(t,e){const n=ge(t),r=Lo(n);n.N_.delete(e),r.r_()&&Rx(n,e),n.N_.size===0&&(r.r_()?r.o_():Cs(n)&&n.q_.set("Unknown"))}function gm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(t).A_(e)}function Rx(t,e){t.Q_.xe(e),Lo(t).R_(e)}function ym(t){t.Q_=new Ak({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Lo(t).start(),t.q_.v_()}function vm(t){return Cs(t)&&!Lo(t).n_()&&t.N_.size>0}function Cs(t){return ge(t).L_.size===0}function Ax(t){t.Q_=void 0}async function A1(t){t.q_.set("Online")}async function N1(t){t.N_.forEach((e,n)=>{gm(t,e)})}async function C1(t,e){Ax(t),vm(t)?(t.q_.M_(e),ym(t)):t.q_.set("Unknown")}async function P1(t,e,n){if(t.q_.set("Online"),e instanceof fx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nc(t,r)}else if(e instanceof Vu?t.Q_.Ke(e):e instanceof hx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const r=await xx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(c);f&&s.N_.set(c,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken($t.EMPTY_BYTE_STRING,f.snapshotVersion)),Rx(s,u);const p=new _i(f.target,u,c,f.sequenceNumber);gm(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Nc(t,r)}}async function Nc(t,e,n){if(!Il(e))throw e;t.L_.add(1),await Al(t),t.q_.set("Offline"),n||(n=()=>xx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await od(t)})}function Nx(t,e){return e().catch(n=>Nc(t,n,e))}async function ad(t){const e=ge(t),n=Li(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;b1(e);)try{const i=await p1(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,k1(e,i)}catch(i){await Nc(e,i)}Cx(e)&&Px(e)}function b1(t){return Cs(t)&&t.O_.length<10}function k1(t,e){t.O_.push(e);const n=Li(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Cx(t){return Cs(t)&&!Li(t).n_()&&t.O_.length>0}function Px(t){Li(t).start()}async function D1(t){Li(t).p_()}async function j1(t){const e=Li(t);for(const n of t.O_)e.m_(n.mutations)}async function O1(t,e,n){const r=t.O_.shift(),i=um.from(r,e,n);await Nx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ad(t)}async function L1(t,e){e&&Li(t).V_&&await async function(r,i){if(function(o){return Ik(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();Li(r).s_(),await Nx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ad(r)}}(t,e),Cx(t)&&Px(t)}async function Qv(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Cs(n);n.L_.add(3),await Al(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await od(n)}async function M1(t,e){const n=ge(t);e?(n.L_.delete(2),await od(n)):e||(n.L_.add(2),await Al(n),n.q_.set("Unknown"))}function Lo(t){return t.K_||(t.K_=function(n,r,i){const s=ge(n);return s.w_(),new x1(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:A1.bind(null,t),Ro:N1.bind(null,t),mo:C1.bind(null,t),d_:P1.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vm(t)?ym(t):t.q_.set("Unknown")):(await t.K_.stop(),Ax(t))})),t.K_}function Li(t){return t.U_||(t.U_=function(n,r,i){const s=ge(n);return s.w_(),new T1(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:D1.bind(null,t),mo:L1.bind(null,t),f_:j1.bind(null,t),g_:O1.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ad(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new _m(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wm(t,e){if(Qr("AsyncQueue",`${e}: ${t}`),Il(t))return new G(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=ya(),this.sortedSet=new pt(this.comparator)}static emptySet(e){return new uo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof uo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new uo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.W_=new pt(oe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ro{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ro(e,n,uo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class U1{constructor(){this.queries=Gv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ge(n),s=i.queries;i.queries=Gv(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new G(z.ABORTED,"Firestore shutting down"))}}function Gv(){return new Oo(t=>ZE(t),ed)}async function bx(t,e){const n=ge(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new V1,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=wm(o,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Em(n)}async function kx(t,e){const n=ge(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function F1(t,e){const n=ge(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&Em(n)}function z1(t,e,n){const r=ge(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Em(t){t.Y_.forEach(e=>{e.next()})}var Pf,Yv;(Yv=Pf||(Pf={})).ea="default",Yv.Cache="cache";class Dx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ro(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.key=e}}class Ox{constructor(e){this.key=e}}class B1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=ex(e),this.Ra=new uo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Kv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),E=td(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),N=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let D=!1;g&&E?g.data.isEqual(E.data)?S!==N&&(r.track({type:3,doc:E}),D=!0):this.ga(g,E)||(r.track({type:2,doc:E}),D=!0,(u&&this.Aa(E,u)>0||c&&this.Aa(E,c)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),D=!0):g&&!E&&(r.track({type:1,doc:g}),D=!0,(u||c)&&(l=!0)),D&&(E?(o=o.add(E),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(E,S){const N=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return N(E)-N(S)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new Ro(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Kv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ox(r))}),this.da.forEach(r=>{e.has(r)||n.push(new jx(r))}),n}ba(e){this.Ta=e.Ts,this.da=Se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ro.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $1{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class H1{constructor(e){this.key=e,this.va=!1}}class W1{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Oo(l=>ZE(l),ed),this.Ma=new Map,this.xa=new Set,this.Oa=new pt(oe.comparator),this.Na=new Map,this.La=new hm,this.Ba={},this.ka=new Map,this.qa=So.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function q1(t,e,n=!0){const r=zx(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Lx(r,e,n,!0),i}async function Q1(t,e){const n=zx(t);await Lx(n,e,!0,!1)}async function Lx(t,e,n,r){const i=await m1(t.localStore,fr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await K1(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Sx(t.remoteStore,i),l}async function K1(t,e,n,r,i){t.Ka=(p,g,E)=>async function(N,D,I,w){let R=D.view.ma(I);R.ns&&(R=await Hv(N.localStore,D.query,!1).then(({documents:y})=>D.view.ma(y,R)));const j=w&&w.targetChanges.get(D.targetId),U=w&&w.targetMismatches.get(D.targetId)!=null,F=D.view.applyChanges(R,N.isPrimaryClient,j,U);return Jv(N,D.targetId,F.wa),F.snapshot}(t,p,g,E);const s=await Hv(t.localStore,e,!0),o=new B1(e,s.Ts),l=o.ma(s.documents),u=Rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);Jv(t,n,c.wa);const f=new $1(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function G1(t,e,n){const r=ge(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ed(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mm(r.remoteStore,i.targetId),bf(r,i.targetId)}).catch(Tl)):(bf(r,i.targetId),await Cf(r.localStore,i.targetId,!0))}async function Y1(t,e){const n=ge(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mm(n.remoteStore,r.targetId))}async function X1(t,e,n){const r=iD(t);try{const i=await function(o,l){const u=ge(o),c=bt.now(),f=l.reduce((E,S)=>E.add(S.key),Se());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=Kr(),N=Se();return u.cs.getEntries(E,f).next(D=>{S=D,S.forEach((I,w)=>{w.isValidDocument()||(N=N.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,S)).next(D=>{p=D;const I=[];for(const w of l){const R=_k(w,p.get(w.key).overlayedDocument);R!=null&&I.push(new Bi(w.key,R,WE(R.value.mapValue),Jn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,c,I,l)}).next(D=>{g=D;const I=D.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(E,D.batchId,I)})}).then(()=>({batchId:g.batchId,changes:nx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new pt(Le)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Nl(r,i.changes),await ad(r.remoteStore)}catch(i){const s=wm(i,"Failed to persist write");n.reject(s)}}async function Mx(t,e){const n=ge(t);try{const r=await h1(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?$e(o.va):i.removedDocuments.size>0&&($e(o.va),o.va=!1))}),await Nl(n,r,e)}catch(r){await Tl(r)}}function Xv(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ge(o);u.onlineState=l;let c=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(c=!0)}),c&&Em(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function J1(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new pt(oe.comparator);o=o.insert(s,Xt.newNoDocument(s,me.min()));const l=Se().add(s),u=new id(me.min(),new Map,new pt(Le),o,l);await Mx(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),xm(r)}else await Cf(r.localStore,e,!1).then(()=>bf(r,e,n)).catch(Tl)}async function Z1(t,e){const n=ge(t),r=e.batch.batchId;try{const i=await d1(n.localStore,e);Ux(n,r,null),Vx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nl(n,i)}catch(i){await Tl(i)}}async function eD(t,e,n){const r=ge(t);try{const i=await function(o,l){const u=ge(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(p=>($e(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);Ux(r,e,n),Vx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nl(r,i)}catch(i){await Tl(i)}}function Vx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ux(t,e,n){const r=ge(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function bf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Fx(t,r)})}function Fx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(mm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xm(t))}function Jv(t,e,n){for(const r of n)r instanceof jx?(t.La.addReference(r.key,e),tD(t,r)):r instanceof Ox?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Fx(t,r.key)):pe()}function tD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),xm(t))}function xm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(rt.fromString(e)),r=t.qa.next();t.Na.set(r,new H1(n)),t.Oa=t.Oa.insert(n,r),Sx(t.remoteStore,new _i(fr(om(n.path)),r,"TargetPurposeLimboResolution",em.oe))}}async function Nl(t,e,n){const r=ge(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){i.push(c);const p=pm.Wi(u.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const f=ge(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>H.forEach(c,g=>H.forEach(g.$i,E=>f.persistence.referenceDelegate.addReference(p,g.targetId,E)).next(()=>H.forEach(g.Ui,E=>f.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))}catch(p){if(!Il(p))throw p;ee("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const E=f.os.get(g),S=E.snapshotVersion,N=E.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(g,N)}}}(r.localStore,s))}async function nD(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await Ex(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new G(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nl(n,r.hs)}}function rD(t,e){const n=ge(t),r=n.Na.get(e);if(r&&r.va)return Se().add(r.key);{let i=Se();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function zx(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J1.bind(null,e),e.Ca.d_=F1.bind(null,e.eventManager),e.Ca.$a=z1.bind(null,e.eventManager),e}function iD(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eD.bind(null,e),e}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return c1(this.persistence,new l1,e.initialUser,this.serializer)}Ga(e){return new s1(fm.Zr,this.serializer)}Wa(e){return new y1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class kf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nD.bind(null,this.syncEngine),await M1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new U1}()}createDatastore(e){const n=sd(e.databaseInfo.databaseId),r=function(s){return new E1(s)}(e.databaseInfo);return function(s,o,l,u){return new I1(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new R1(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Xv(this.syncEngine,n,0),function(){return qv.D()?new qv:new v1}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,f){const p=new W1(i,s,o,l,u,c);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ge(i);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Al(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}kf.provider={build:()=>new kf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=BE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lh(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ex(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oD(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Qv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Qv(e.remoteStore,i)),t._onlineComponents=e}async function oD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await lh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Eo("Error using user provided cache. Falling back to memory cache: "+n),await lh(t,new Cc)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await lh(t,new Cc);return t._offlineComponents}async function $x(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Zv(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Zv(t,new kf))),t._onlineComponents}function aD(t){return $x(t).then(e=>e.syncEngine)}async function Hx(t){const e=await $x(t),n=e.eventManager;return n.onListen=q1.bind(null,e.syncEngine),n.onUnlisten=G1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Q1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Y1.bind(null,e.syncEngine),n}function lD(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new Bx({next:g=>{f.Za(),o.enqueueAndForget(()=>kx(s,p));const E=g.docs.has(l);!E&&g.fromCache?c.reject(new G(z.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&u&&u.source==="server"?c.reject(new G(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new Dx(om(l.path),f,{includeMetadataChanges:!0,_a:!0});return bx(s,p)}(await Hx(t),t.asyncQueue,e,n,r)),r.promise}function uD(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new Bx({next:g=>{f.Za(),o.enqueueAndForget(()=>kx(s,p)),g.fromCache&&u.source==="server"?c.reject(new G(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new Dx(l,f,{includeMetadataChanges:!0,_a:!0});return bx(s,p)}(await Hx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t,e,n){if(!n)throw new G(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cD(t,e,n,r){if(e===!0&&r===!0)throw new G(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t_(t){if(!oe.isDocumentKey(t))throw new G(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n_(t){if(oe.isDocumentKey(t))throw new G(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ld(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function Gr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ld(t);throw new G(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ud{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ab;switch(r.type){case"firstParty":return new bb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=e_.get(n);r&&(ee("ComponentProvider","Removing Datastore"),e_.delete(n),r.terminate())}(this),Promise.resolve()}}function dD(t,e,n,r={}){var i;const s=(t=Gr(t,ud))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Gt.MOCK_USER;else{l=X0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Gt(c)}t._authCredentials=new Nb(new zE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class Pi extends $i{constructor(e,n,r){super(e,n,om(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new oe(e))}withConverter(e){return new Pi(this.firestore,e,this._path)}}function On(t,e,...n){if(t=ft(t),qx("collection","path",e),t instanceof ud){const r=rt.fromString(e,...n);return n_(r),new Pi(t,null,r)}{if(!(t instanceof mn||t instanceof Pi))throw new G(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return n_(r),new Pi(t.firestore,null,r)}}function Lr(t,e,...n){if(t=ft(t),arguments.length===1&&(e=BE.newId()),qx("doc","path",e),t instanceof ud){const r=rt.fromString(e,...n);return t_(r),new mn(t,null,new oe(r))}{if(!(t instanceof mn||t instanceof Pi))throw new G(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return t_(r),new mn(t.firestore,t instanceof Pi?t.converter:null,new oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tx(this,"async_queue_retry"),this.Vu=()=>{const r=ah();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ah();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ah();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Or;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Il(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Qr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=_m.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Mo extends ud{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new i_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i_(e),this._firestoreClient=void 0,await e}}}function hD(t,e){const n=typeof t=="object"?t:Gc(),r=typeof t=="string"?t:"(default)",i=_l(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Up("firestore");s&&dD(i,...s)}return i}function Tm(t){if(t._terminated)throw new G(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fD(t),t._firestoreClient}function fD(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,f){return new Hb(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Wx(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new sD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ao($t.fromBase64String(e))}catch(n){throw new G(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ao($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^__.*__$/;class mD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sl(e,this.data,n,this.fieldTransforms)}}class Qx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Kx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class Rm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Rm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Kx(this.Cu)&&pD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sd(e)}Qu(e,n,r,i=!1){return new Rm({Cu:e,methodName:n,qu:r,path:Ut.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Am(t){const e=t._freezeSettings(),n=sd(t._databaseId);return new gD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yD(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Cm("Data must be an object, but it was:",o,r);const l=Gx(r,o);let u,c;if(s.merge)u=new In(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const g=Df(e,p,n);if(!o.contains(g))throw new G(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Xx(f,g)||f.push(g)}u=new In(f),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new mD(new cn(l),u,c)}class hd extends dd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hd}}class Nm extends dd{_toFieldTransform(e){return new mk(e.path,new al)}isEqual(e){return e instanceof Nm}}function vD(t,e,n,r){const i=t.Qu(1,e,n);Cm("Data must be an object, but it was:",i,r);const s=[],o=cn.empty();Ns(r,(u,c)=>{const f=Pm(e,u,n);c=ft(c);const p=i.Nu(f);if(c instanceof hd)s.push(f);else{const g=Cl(c,p);g!=null&&(s.push(f),o.set(f,g))}});const l=new In(s);return new Qx(o,l,i.fieldTransforms)}function _D(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[Df(e,r,n)],u=[i];if(s.length%2!=0)throw new G(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(Df(e,s[g])),u.push(s[g+1]);const c=[],f=cn.empty();for(let g=l.length-1;g>=0;--g)if(!Xx(c,l[g])){const E=l[g];let S=u[g];S=ft(S);const N=o.Nu(E);if(S instanceof hd)c.push(E);else{const D=Cl(S,N);D!=null&&(c.push(E),f.set(E,D))}}const p=new In(c);return new Qx(f,p,o.fieldTransforms)}function wD(t,e,n,r=!1){return Cl(n,t.Qu(r?4:3,e))}function Cl(t,e){if(Yx(t=ft(t)))return Cm("Unsupported field value:",e,t),Gx(t,e);if(t instanceof dd)return function(r,i){if(!Kx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Cl(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=bt.fromDate(r);return{timestampValue:Ac(i.serializer,s)}}if(r instanceof bt){const s=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ac(i.serializer,s)}}if(r instanceof Im)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ao)return{bytesValue:px(i.serializer,r._byteString)};if(r instanceof mn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sm)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return am(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ld(r)}`)}(t,e)}function Gx(t,e){const n={};return $E(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(t,(r,i)=>{const s=Cl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Yx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof Im||t instanceof Ao||t instanceof mn||t instanceof dd||t instanceof Sm)}function Cm(t,e,n){if(!Yx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ld(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Df(t,e,n){if((e=ft(e))instanceof cd)return e._internalPath;if(typeof e=="string")return Pm(t,e);throw Pc("Field path arguments must be of type string or ",t,!1,void 0,n)}const ED=new RegExp("[~\\*/\\[\\]]");function Pm(t,e,n){if(e.search(ED)>=0)throw Pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cd(...e.split("."))._internalPath}catch{throw Pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new G(z.INVALID_ARGUMENT,l+t+u)}function Xx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xD extends Jx{data(){return super.data()}}function fd(t,e){return typeof e=="string"?Pm(t,e):e instanceof cd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bm{}class km extends bm{}function Mr(t,e,...n){let r=[];e instanceof bm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Dm).length,l=s.filter(u=>u instanceof pd).length;if(o>1||o>0&&l>0)throw new G(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class pd extends km{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new pd(e,n,r)}_apply(e){const n=this._parse(e);return Zx(e._query,n),new $i(e.firestore,e.converter,If(e._query,n))}_parse(e){const n=Am(e.firestore);return function(s,o,l,u,c,f,p){let g;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){o_(p,f);const E=[];for(const S of p)E.push(s_(u,s,S));g={arrayValue:{values:E}}}else g=s_(u,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||o_(p,f),g=wD(l,o,p,f==="in"||f==="not-in");return Nt.create(c,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function uh(t,e,n){const r=e,i=fd("where",t);return pd._create(i,r,n)}class Dm extends bm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:er.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)Zx(o,u),o=If(o,u)}(e._query,n),new $i(e.firestore,e.converter,If(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jm extends km{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new G(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ol(s,o)}(e._query,this._field,this._direction);return new $i(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new jo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Pl(t,e="asc"){const n=e,r=fd("orderBy",t);return jm._create(r,n)}class Om extends km{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Om(e,n,r)}_apply(e){return new $i(e.firestore,e.converter,Sc(e._query,this._limit,this._limitType))}}function ID(t){return Om._create("limit",t,"F")}function s_(t,e,n){if(typeof(n=ft(n))=="string"){if(n==="")throw new G(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JE(e)&&n.indexOf("/")!==-1)throw new G(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(rt.fromString(n));if(!oe.isDocumentKey(r))throw new G(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Av(t,new oe(r))}if(n instanceof mn)return Av(t,n._key);throw new G(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ld(n)}.`)}function o_(t,e){if(!Array.isArray(t)||t.length===0)throw new G(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zx(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SD{convertValue(e,n="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ns(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Et(o.doubleValue));return new Sm(s)}convertGeoPoint(e){return new Im(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=nm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const n=Oi(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);$e(wx(r));const i=new il(r.get(1),r.get(3)),s=new oe(r.popFirst(5));return i.isEqual(n)||Qr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eT extends Jx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Uu extends eT{data(e={}){return super.data(e)}}class AD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _a(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uu(this._firestore,this._userDataWriter,r.key,r,new _a(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Uu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new _a(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Uu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new _a(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,f=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:ND(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ND(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t){t=Gr(t,mn);const e=Gr(t.firestore,Mo);return lD(Tm(e),t._key).then(n=>CD(e,t,n))}class nT extends SD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ao(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function Vr(t){t=Gr(t,$i);const e=Gr(t.firestore,Mo),n=Tm(e),r=new nT(e);return TD(t._query),uD(n,t._query).then(i=>new AD(e,r,t,i))}function jf(t,e,n,...r){t=Gr(t,mn);const i=Gr(t.firestore,Mo),s=Am(i);let o;return o=typeof(e=ft(e))=="string"||e instanceof cd?_D(s,"updateDoc",t._key,e,n,r):vD(s,"updateDoc",t._key,e),Vm(i,[o.toMutation(t._key,Jn.exists(!0))])}function Lm(t){return Vm(Gr(t.firestore,Mo),[new lm(t._key,Jn.none())])}function Mm(t,e){const n=Gr(t.firestore,Mo),r=Lr(t),i=RD(t.converter,e);return Vm(n,[yD(Am(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}function Vm(t,e){return function(r,i){const s=new Or;return r.asyncQueue.enqueueAndForget(async()=>X1(await aD(r),i,s)),s.promise}(Tm(t),e)}function CD(t,e,n){const r=n.docs.get(e._key),i=new nT(t);return new eT(t,i,e._key,r,new _a(n.hasPendingWrites,n.fromCache),e.converter)}function PD(){return new Nm("serverTimestamp")}(function(e,n=!0){(function(i){Do=i})(As),Di(new Hr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Mo(new Cb(r.getProvider("auth-internal")),new Db(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(c.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Mn(xv,"4.7.3",e),Mn(xv,"4.7.3","esm2017")})();var bD="firebase",kD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(bD,kD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebasestorage.googleapis.com",iT="storageBucket",DD=2*60*1e3,jD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t extends yr{constructor(e,n,r=0){super(ch(e),`Firebase Storage: ${n} (${ch(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ch(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vt||(vt={}));function ch(t){return"storage/"+t}function Um(){const t="An unknown error occurred, please check the error payload for server response.";return new _t(vt.UNKNOWN,t)}function OD(t){return new _t(vt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function LD(t){return new _t(vt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function MD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(vt.UNAUTHENTICATED,t)}function VD(){return new _t(vt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UD(t){return new _t(vt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function FD(){return new _t(vt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zD(){return new _t(vt.CANCELED,"User canceled the upload/download.")}function BD(t){return new _t(vt.INVALID_URL,"Invalid URL '"+t+"'.")}function $D(t){return new _t(vt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function HD(){return new _t(vt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iT+"' property when initializing the app?")}function WD(){return new _t(vt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qD(){return new _t(vt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QD(t){return new _t(vt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Of(t){return new _t(vt.INVALID_ARGUMENT,t)}function sT(){return new _t(vt.APP_DELETED,"The Firebase app was deleted.")}function KD(t){return new _t(vt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ja(t,e){return new _t(vt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ua(t){throw new _t(vt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Sn.makeFromUrl(e,n)}catch{return new Sn(e,"")}if(r.path==="")return r;throw $D(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(j){j.path_=decodeURIComponent(j.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",E=new RegExp(`^https?://${p}/${f}/b/${i}/o${g}`,"i"),S={bucket:1,path:3},N=n===rT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",I=new RegExp(`^https?://${N}/${i}/${D}`,"i"),R=[{regex:l,indices:u,postModify:s},{regex:E,indices:S,postModify:c},{regex:I,indices:{bucket:1,path:2},postModify:c}];for(let j=0;j<R.length;j++){const U=R[j],F=U.regex.exec(e);if(F){const y=F[U.indices.bucket];let v=F[U.indices.path];v||(v=""),r=new Sn(y,v),U.postModify(r);break}}if(r==null)throw BD(e);return r}}class GD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let c=!1;function f(...D){c||(c=!0,e.apply(null,D))}function p(D){i=setTimeout(()=>{i=null,t(E,u())},D)}function g(){s&&clearTimeout(s)}function E(D,...I){if(c){g();return}if(D){g(),f.call(null,D,...I);return}if(u()||o){g(),f.call(null,D,...I);return}r<64&&(r*=2);let R;l===1?(l=2,R=0):R=(r+Math.random())*1e3,p(R)}let S=!1;function N(D){S||(S=!0,g(),!c&&(i!==null?(D||(l=2),clearTimeout(i),p(0)):D||(l=1)))}return p(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function XD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t){return t!==void 0}function ZD(t){return typeof t=="object"&&!Array.isArray(t)}function Fm(t){return typeof t=="string"||t instanceof String}function a_(t){return zm()&&t instanceof Blob}function zm(){return typeof Blob<"u"}function l_(t,e,n,r){if(r<e)throw Of(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Of(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function oT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var hs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hs||(hs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n,r,i,s,o,l,u,c,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new gu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===hs.NO_ERROR,u=s.getStatus();if(!l||e2(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===hs.ABORT;r(!1,new gu(!1,null,f));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new gu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());JD(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=Um();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?sT():zD();o(u)}else{const u=FD();o(u)}};this.canceled_?n(!1,new gu(!1,null,!0)):this.backoffId_=YD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function n2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function r2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function i2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function s2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function o2(t,e,n,r,i,s,o=!0){const l=oT(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return i2(c,e),n2(c,n),r2(c,s),s2(c,r),new t2(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function l2(...t){const e=a2();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(zm())return new Blob(t);throw new _t(vt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function u2(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){if(typeof atob>"u")throw QD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dh{constructor(e,n){this.data=e,this.contentType=n||null}}function d2(t,e){switch(t){case ur.RAW:return new dh(aT(e));case ur.BASE64:case ur.BASE64URL:return new dh(lT(t,e));case ur.DATA_URL:return new dh(f2(e),p2(e))}throw Um()}function aT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function h2(t){let e;try{e=decodeURIComponent(t)}catch{throw ja(ur.DATA_URL,"Malformed data URL.")}return aT(e)}function lT(t,e){switch(t){case ur.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw ja(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ur.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw ja(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=c2(e)}catch(i){throw i.message.includes("polyfill")?i:ja(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class uT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ja(ur.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=m2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function f2(t){const e=new uT(t);return e.base64?lT(ur.BASE64,e.rest):h2(e.rest)}function p2(t){return new uT(t).contentType}function m2(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){let r=0,i="";a_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(a_(this.data_)){const r=this.data_,i=u2(r,e,n);return i===null?null:new mi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mi(r,!0)}}static getBlob(...e){if(zm()){const n=e.map(r=>r instanceof mi?r.data_:r);return new mi(l2.apply(null,n))}else{const n=e.map(o=>Fm(o)?d2(ur.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new mi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t){let e;try{e=JSON.parse(t)}catch{return null}return ZD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function y2(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function dT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t,e){return e}class tn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||v2}}let yu=null;function _2(t){return!Fm(t)||t.length<2?t:dT(t)}function hT(){if(yu)return yu;const t=[];t.push(new tn("bucket")),t.push(new tn("generation")),t.push(new tn("metageneration")),t.push(new tn("name","fullPath",!0));function e(s,o){return _2(o)}const n=new tn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new tn("size");return i.xform=r,t.push(i),t.push(new tn("timeCreated")),t.push(new tn("updated")),t.push(new tn("md5Hash",null,!0)),t.push(new tn("cacheControl",null,!0)),t.push(new tn("contentDisposition",null,!0)),t.push(new tn("contentEncoding",null,!0)),t.push(new tn("contentLanguage",null,!0)),t.push(new tn("contentType",null,!0)),t.push(new tn("metadata","customMetadata",!0)),yu=t,yu}function w2(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Sn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function E2(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return w2(r,t),r}function fT(t,e,n){const r=cT(e);return r===null?null:E2(t,r,n)}function x2(t,e,n,r){const i=cT(e);if(i===null||!Fm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const f=t.bucket,p=t.fullPath,g="/b/"+o(f)+"/o/"+o(p),E=md(g,n,r),S=oT({alt:"media",token:c});return E+S})[0]}function T2(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Bm{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t){if(!t)throw Um()}function I2(t,e){function n(r,i){const s=fT(t,i,e);return pT(s!==null),s}return n}function S2(t,e){function n(r,i){const s=fT(t,i,e);return pT(s!==null),x2(s,i,t.host,t._protocol)}return n}function mT(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=VD():i=MD():n.getStatus()===402?i=LD(t.bucket):n.getStatus()===403?i=UD(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function gT(t){const e=mT(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=OD(t.path)),s.serverResponse=i.serverResponse,s}return n}function R2(t,e,n){const r=e.fullServerUrl(),i=md(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new Bm(i,s,S2(t,n),o);return l.errorHandler=gT(e),l}function A2(t,e){const n=e.fullServerUrl(),r=md(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(u,c){}const l=new Bm(r,i,o,s);return l.successCodes=[200,204],l.errorHandler=gT(e),l}function N2(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function C2(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=N2(null,e)),r}function P2(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let R="";for(let j=0;j<2;j++)R=R+Math.random().toString().slice(2);return R}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const c=C2(e,r,i),f=T2(c,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+u+"--",E=mi.getBlob(p,r,g);if(E===null)throw WD();const S={name:c.fullPath},N=md(s,t.host,t._protocol),D="POST",I=t.maxUploadRetryTime,w=new Bm(N,D,I2(t,n),I);return w.urlParams=S,w.headers=o,w.body=E.uploadData(),w.errorHandler=mT(e),w}class b2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ua("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ua("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ua("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ua("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ua("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class k2 extends b2{initXhr(){this.xhr_.responseType="text"}}function $m(){return new k2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this._service=e,n instanceof Sn?this._location=n:this._location=Sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ts(e,n)}get root(){const e=new Sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dT(this._location.path)}get storage(){return this._service}get parent(){const e=g2(this._location.path);if(e===null)return null;const n=new Sn(this._location.bucket,e);return new Ts(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw KD(e)}}function D2(t,e,n){t._throwIfRoot("uploadBytes");const r=P2(t.storage,t._location,hT(),new mi(e,!0),n);return t.storage.makeRequestWithTokens(r,$m).then(i=>({metadata:i,ref:t}))}function j2(t){t._throwIfRoot("getDownloadURL");const e=R2(t.storage,t._location,hT());return t.storage.makeRequestWithTokens(e,$m).then(n=>{if(n===null)throw qD();return n})}function O2(t){t._throwIfRoot("deleteObject");const e=A2(t.storage,t._location);return t.storage.makeRequestWithTokens(e,$m)}function L2(t,e){const n=y2(t._location.path,e),r=new Sn(t._location.bucket,n);return new Ts(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){return/^[A-Za-z]+:\/\//.test(t)}function V2(t,e){return new Ts(t,e)}function yT(t,e){if(t instanceof Hm){const n=t;if(n._bucket==null)throw HD();const r=new Ts(n,n._bucket);return e!=null?yT(r,e):r}else return e!==void 0?L2(t,e):t}function U2(t,e){if(e&&M2(e)){if(t instanceof Hm)return V2(t,e);throw Of("To use ref(service, url), the first argument must be a Storage instance.")}else return yT(t,e)}function u_(t,e){const n=e==null?void 0:e[iT];return n==null?null:Sn.makeFromBucketSpec(n,t)}function F2(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:X0(i,t.app.options.projectId))}class Hm{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=rT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DD,this._maxUploadRetryTime=jD,this._requests=new Set,i!=null?this._bucket=Sn.makeFromBucketSpec(i,this._host):this._bucket=u_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Sn.makeFromBucketSpec(this._url,e):this._bucket=u_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){l_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){l_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ts(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new GD(sT());{const o=o2(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const c_="@firebase/storage",d_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="storage";function si(t,e,n){return t=ft(t),D2(t,e,n)}function oi(t){return t=ft(t),j2(t)}function ca(t){return t=ft(t),O2(t)}function _n(t,e){return t=ft(t),U2(t,e)}function z2(t=Gc(),e){t=ft(t);const r=_l(t,vT).getImmediate({identifier:e}),i=Up("storage");return i&&B2(r,...i),r}function B2(t,e,n,r={}){F2(t,e,n,r)}function $2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Hm(n,r,i,e,As)}function H2(){Di(new Hr(vT,$2,"PUBLIC").setMultipleInstances(!0)),Mn(c_,d_,""),Mn(c_,d_,"esm2017")}H2();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="us-central1";class q2{constructor(e,n,r,i,s=Lf,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new W2(n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Lf}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Q2(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const h_="@firebase/functions",f_="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="auth-internal",G2="app-check-internal",Y2="messaging-internal";function X2(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(K2),l=r.getProvider(Y2),u=r.getProvider(G2);return new q2(s,o,l,u,i,t)};Di(new Hr(_T,n,"PUBLIC").setMultipleInstances(!0)),Mn(h_,f_,e),Mn(h_,f_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t=Gc(),e=Lf){const r=_l(ft(t),_T).getImmediate({identifier:e}),i=Up("functions");return i&&Z2(r,...i),r}function Z2(t,e,n){Q2(ft(t),e,n)}X2(fetch.bind(self));const ej={apiKey:"AIzaSyB0Qjs2dvrcJAZeWUd9SyPVnTXufRImsi4",authDomain:"xmas-quiz-8c02e.firebaseapp.com",projectId:"xmas-quiz-8c02e",storageBucket:"xmas-quiz-8c02e.firebasestorage.app",messagingSenderId:"978823764359",appId:"1:978823764359:web:dfbd31fbac09f62a82db22"},gd=eE(ej),wT=Sb(gd),ET=new Rr;ET.setCustomParameters({prompt:"select_account"});const tj=ET,xt=hD(gd),wn=z2(gd);J2(gd);const Vo=()=>{const[t,e]=k.useState(!1),[n,r]=k.useState(!0),[i,s]=k.useState(null),[o,l]=k.useState(null);return k.useEffect(()=>{const u=pP(wT,async c=>{if(r(!0),s(null),!c){e(!1),l(null),r(!1);return}l({uid:c.uid,email:c.email});try{if((await uE(c)).claims.admin===!0){e(!0),r(!1);return}const g=Lr(xt,"admins",c.uid),E=await tT(g);e(E.exists())}catch(f){console.error("Error checking admin status:",f),s("Failed to verify admin status"),e(!1)}finally{r(!1)}});return()=>u()},[]),{isAdmin:t,loading:n,error:i,currentUser:o}},nj=({snowflakeCount:t=100})=>{const e=k.useRef(null),n=k.useRef([]),r=k.useRef(0);return k.useEffect(()=>{const i=e.current;if(!i)return;const s=i.getContext("2d");if(!s)return;const o=()=>{i.width=window.innerWidth,i.height=window.innerHeight},l=()=>{n.current=[];for(let p=0;p<t;p++)n.current.push({x:Math.random()*i.width,y:Math.random()*i.height,size:Math.random()*4+1,speed:Math.random()*1+.5,opacity:Math.random()*.6+.3,wind:Math.random()*.5-.25})},u=p=>{s.beginPath(),s.arc(p.x,p.y,p.size,0,Math.PI*2),s.fillStyle=`rgba(255, 255, 255, ${p.opacity})`,s.fill()},c=p=>{p.y+=p.speed,p.x+=p.wind,p.y>i.height&&(p.y=-10,p.x=Math.random()*i.width),p.x>i.width?p.x=0:p.x<0&&(p.x=i.width)},f=()=>{s.clearRect(0,0,i.width,i.height),n.current.forEach(p=>{u(p),c(p)}),r.current=requestAnimationFrame(f)};return window.addEventListener("resize",o),o(),l(),f(),()=>{window.removeEventListener("resize",o),cancelAnimationFrame(r.current)}},[t]),d.jsx("canvas",{ref:e,className:"fixed top-0 left-0 w-full h-full pointer-events-none z-10","aria-hidden":"true"})};function rj(){const{isAdmin:t}=Vo(),[e,n]=k.useState(!1),r=bo();k.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),k.useEffect(()=>{e&&n(!1)},[r.pathname]);const i=()=>{n(!e)};return d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-xmas-bg to-xmas-card bg-opacity-95",children:[d.jsx(nj,{snowflakeCount:150}),d.jsxs("div",{className:"navbar bg-gradient-to-r from-xmas-card via-xmas-card to-xmas-bg border-b border-xmas-gold px-2 sm:px-4 shadow-lg relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-xmas-gold via-transparent to-xmas-gold opacity-60"}),d.jsx("div",{className:"absolute -bottom-4 left-0 right-0 h-8 snow-accumulation-fast"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("button",{className:"btn btn-ghost btn-sm md:hidden relative z-10",onClick:i,"aria-label":"Toggle navigation menu",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-5 h-5 stroke-current",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),d.jsxs(rn,{to:"/",className:"hidden sm:flex items-center group",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-xmas-gold to-xmas-line rounded-full opacity-70 group-hover:opacity-100 blur transition duration-200"}),d.jsx("div",{className:"relative flex items-center justify-center w-10 h-10 bg-xmas-card rounded-full border border-xmas-gold overflow-hidden",children:d.jsx("img",{src:"/Santa.png",alt:"Santa",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})})]}),d.jsx("div",{className:"ml-3 font-christmas text-xl sm:text-2xl bg-gradient-to-br from-xmas-gold via-xmas-snow to-xmas-gold bg-clip-text text-transparent font-bold",children:"PACT - Christmas Quiz"})]}),d.jsxs(rn,{to:"/",className:"sm:hidden flex items-center",children:[d.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-xmas-card border border-xmas-gold overflow-hidden",children:d.jsx("img",{src:"/Santa.png",alt:"Santa",className:"w-full h-full object-cover"})}),d.jsx("span",{className:"ml-2 font-christmas text-lg text-xmas-gold",children:"PACT - Christmas Quiz"})]})]}),d.jsx("div",{className:"flex-1"}),d.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:t&&d.jsxs(rn,{to:"/admin",className:"relative group overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-xmas-line to-xmas-gold opacity-70 blur-sm group-hover:opacity-100 transition duration-300"}),d.jsxs("div",{className:"relative btn btn-sm bg-xmas-card border border-xmas-gold px-3 py-1 flex items-center",children:[d.jsx("i",{className:"fas fa-lock mr-2 text-xmas-gold"}),d.jsx("span",{className:"font-christmas",children:"Admin"})]})]})})]}),d.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-70 z-20 transition-opacity duration-300 md:hidden ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:i}),d.jsxs("div",{className:`fixed top-0 left-0 h-full w-72 bg-gradient-to-b from-xmas-bg to-xmas-card border-r border-xmas-gold z-30 transform transition-transform duration-300 ease-in-out md:hidden shadow-xl ${e?"translate-x-0":"-translate-x-full"}`,children:[d.jsxs("div",{className:"relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-xmas-gold via-transparent to-xmas-gold opacity-60"}),d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-xmas-gold bg-xmas-card bg-opacity-80",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-9 h-9 flex items-center justify-center rounded-full bg-xmas-card border border-xmas-gold shadow-lg overflow-hidden",children:d.jsx("img",{src:"/Santa.png",alt:"Santa",className:"w-full h-full object-cover"})}),d.jsx("div",{className:"ml-3 font-christmas text-xl bg-gradient-to-br from-xmas-gold via-xmas-snow to-xmas-gold bg-clip-text text-transparent font-bold",children:"Xmas Quiz"})]}),d.jsx("button",{className:"btn btn-ghost btn-sm text-xmas-text hover:text-xmas-line",onClick:i,"aria-label":"Close navigation menu",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),d.jsx("div",{className:"overflow-y-auto h-full pb-20",children:d.jsxs("div",{className:"p-4 pt-6",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-christmas text-xl text-xmas-gold mb-4 pl-2 border-l-2 border-xmas-line",children:"Navigation"}),d.jsxs("ul",{className:"space-y-3",children:[d.jsx("li",{children:d.jsx(cu,{to:"/",onClick:i,className:({isActive:s})=>s?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:s})=>d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-home mr-3 text-xmas-gold"}),d.jsx("span",{children:"Home"}),d.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${s?"visible":"invisible"}`})]})})}),d.jsx("li",{children:d.jsx(cu,{to:"/quiz",onClick:i,className:({isActive:s})=>s?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:s})=>d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-question-circle mr-3 text-xmas-gold"}),d.jsx("span",{children:"Take Quiz"}),d.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${s?"visible":"invisible"}`})]})})})]})]}),t&&d.jsxs("div",{children:[d.jsx("h3",{className:"font-christmas text-xl text-xmas-gold mb-4 pl-2 border-l-2 border-xmas-line",children:"Admin"}),d.jsxs("ul",{className:"space-y-3",children:[d.jsx("li",{children:d.jsx(cu,{to:"/admin",onClick:i,className:({isActive:s})=>s?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:s})=>d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-cog mr-3 text-xmas-gold"}),d.jsx("span",{children:"Dashboard"}),d.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${s?"visible":"invisible"}`})]})})}),d.jsx("li",{children:d.jsx(cu,{to:"/admin/results",onClick:i,className:({isActive:s})=>s?"flex items-center p-2 pl-3 rounded-md bg-gradient-to-r from-xmas-card to-transparent border-l-2 border-xmas-gold text-xmas-gold font-medium":"flex items-center p-2 pl-3 rounded-md hover:bg-xmas-card hover:bg-opacity-50 text-xmas-text hover:text-xmas-gold transition-all duration-200",children:({isActive:s})=>d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-trophy mr-3 text-xmas-gold"}),d.jsx("span",{children:"Results"}),d.jsx("i",{className:`fas fa-snowflake ml-auto text-xmas-gold opacity-70 ${s?"visible":"invisible"}`})]})})})]})]}),d.jsx("div",{className:"mt-8 pt-4 border-t border-xmas-gold border-opacity-30 flex justify-center",children:d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("i",{className:"fas fa-snowflake text-xmas-gold opacity-60"}),d.jsx("i",{className:"fas fa-tree text-xmas-gold opacity-60"}),d.jsx("i",{className:"fas fa-gift text-xmas-gold opacity-60"})]})})]})})]}),d.jsx("main",{className:"p-4",children:d.jsx(NA,{})}),d.jsx("div",{className:"fixed bottom-0 left-0 w-full pointer-events-none",children:d.jsx("div",{className:"container mx-auto",children:d.jsxs("div",{className:"relative h-16",children:[d.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-xmas-gold via-transparent to-xmas-gold opacity-40"}),d.jsx("div",{className:"absolute bottom-4 left-4 opacity-30",children:d.jsx("i",{className:"fas fa-tree text-4xl text-xmas-gold"})}),d.jsx("div",{className:"absolute bottom-4 right-4 opacity-30",children:d.jsx("i",{className:"fas fa-star text-4xl text-xmas-gold"})})]})})})]})}const ij=()=>{const[t,e]=k.useState([]),[n,r]=k.useState(!0),[i,s]=k.useState(null);return k.useEffect(()=>{(async()=>{try{const l=Mr(On(xt,"scores"),Pl("score","desc"),ID(10)),u=await Vr(l),c=[];u.forEach(f=>{var g;const p=f.data();c.push({id:f.id,playerName:p.playerName,score:p.score,timestamp:((g=p.timestamp)==null?void 0:g.toDate())||new Date})}),e(c)}catch(l){console.error("Error fetching scores:",l),s("Failed to load scoreboard. Please try again later.")}finally{r(!1)}})()},[]),n?d.jsx("div",{className:"flex justify-center items-center p-8",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):i?d.jsx("div",{className:"text-center text-error p-4",children:d.jsx("p",{children:i})}):t.length===0?d.jsx("div",{className:"text-center p-4",children:d.jsx("p",{className:"text-xl",children:"No scores yet! Be the first to play!"})}):d.jsx("div",{className:"overflow-x-auto snow-accumulation snow-pile relative",children:d.jsxs("table",{className:"table w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-xmas-gold",children:[d.jsx("th",{className:"text-center",children:"#"}),d.jsx("th",{children:"Player"}),d.jsx("th",{className:"text-right",children:"Score"})]})}),d.jsx("tbody",{children:t.map((o,l)=>d.jsxs("tr",{className:`${l<3?"font-bold":""} ${l===0?"bg-opacity-20 bg-xmas-gold":""}`,children:[d.jsxs("td",{className:"text-center",children:[l===0&&d.jsx("i",{className:"fas fa-crown text-xmas-gold mr-1"}),l+1]}),d.jsxs("td",{className:"flex items-center gap-2",children:[o.playerName,l===0&&d.jsx("span",{className:"badge badge-warning",children:"Champion"}),l===1&&d.jsx("span",{className:"badge badge-secondary",children:"Runner-up"})]}),d.jsx("td",{className:"text-right font-bold",children:o.score})]},o.id))})]})})},sj=()=>d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"text-center mb-12",children:[d.jsx("h1",{className:"font-christmas text-5xl md:text-7xl text-xmas-line mb-4",children:"Christmas Quiz"}),d.jsx("p",{className:"text-xl md:text-2xl text-xmas-snow mb-8",children:"Test your Christmas knowledge and compete for the top spot!"}),d.jsx("div",{className:"flex flex-col md:flex-row justify-center gap-6 mb-12",children:d.jsxs(rn,{to:"/quiz",className:"btn btn-primary btn-lg text-xl px-8 py-3 rounded-md shadow-lg hover:shadow-xl transition-all duration-300 border border-xmas-gold border-opacity-30",children:[d.jsx("i",{className:"fas fa-play-circle mr-2"})," Start Quiz"]})})]}),d.jsx("div",{className:"w-full max-w-4xl mx-auto mb-8",children:d.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-xmas-gold to-transparent"})}),d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-xl p-6 mb-12 border border-xmas-gold border-opacity-30 snow-accumulation snow-accumulation-fast relative",children:[d.jsx("div",{className:"mb-6 text-center",children:d.jsxs("h2",{className:"font-christmas text-3xl md:text-4xl text-xmas-gold inline-block relative",children:[d.jsx("span",{className:"relative z-10",children:"Leaderboard"}),d.jsx("span",{className:"absolute -bottom-2 left-0 right-0 h-1 bg-xmas-gold opacity-30 rounded-full"})]})}),d.jsx(ij,{})]}),d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-xl p-6 mb-12 border border-xmas-gold border-opacity-20 snow-accumulation snow-accumulation-slow relative",children:[d.jsx("h2",{className:"font-christmas text-3xl text-xmas-line mb-6",children:"How to Play"}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-line",children:[d.jsx("div",{className:"text-3xl text-xmas-gold mb-4 text-center",children:d.jsx("i",{className:"fas fa-question-circle"})}),d.jsx("h3",{className:"font-christmas text-xl text-center mb-3",children:"Answer Questions"}),d.jsx("p",{className:"text-center text-xmas-text text-opacity-80",children:"Test your Christmas knowledge with our festive questions!"})]}),d.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-gold",children:[d.jsx("div",{className:"text-3xl text-xmas-gold mb-4 text-center",children:d.jsx("i",{className:"fas fa-gift"})}),d.jsx("h3",{className:"font-christmas text-xl text-center mb-3",children:"Multiple Rounds"}),d.jsx("p",{className:"text-center text-xmas-text text-opacity-80",children:"Enjoy different themed rounds of Christmas fun!"})]}),d.jsxs("div",{className:"bg-xmas-card bg-opacity-70 p-6 rounded-lg shadow-md border-l-2 border-xmas-line",children:[d.jsx("div",{className:"text-3xl text-xmas-gold mb-4 text-center",children:d.jsx("i",{className:"fas fa-medal"})}),d.jsx("h3",{className:"font-christmas text-xl text-center mb-3",children:"Compete"}),d.jsx("p",{className:"text-center text-xmas-text text-opacity-80",children:"Get on the leaderboard and show off your Christmas spirit!"})]})]})]}),d.jsx("div",{className:"w-full max-w-4xl mx-auto mb-8",children:d.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-xmas-gold to-transparent"})}),d.jsx("footer",{className:"text-center text-xmas-mute mt-12 pb-8",children:d.jsxs("p",{children:[" ",new Date().getFullYear()," Christmas Quiz | ",d.jsx(rn,{to:"/admin/login",className:"hover:text-xmas-link",children:"Admin"})]})})]});var nt=(t=>(t.GENERAL="general",t.PICTURE="picture",t.MUSIC="music",t.TRIVIA="trivia",t.CHRISTMAS="christmas",t))(nt||{});const Fu=({src:t,alt:e,className:n="",thumbnailHeight:r="h-12",zoomFactor:i=2,maxWidth:s="600px",maxHeight:o="600px"})=>{const[l,u]=k.useState(!1),[c,f]=k.useState({top:!0,left:null}),p=k.useRef(null),g=k.useRef(null);return k.useEffect(()=>{if(l&&p.current&&g.current){const E=p.current.getBoundingClientRect(),S=g.current.getBoundingClientRect(),N=window.innerWidth,D=E.left+S.width/2>N,I=E.left-S.width/2<0,w=E.top-S.height<0;f({top:!w,left:D?!0:I?!1:null})}},[l]),d.jsxs("div",{className:"relative inline-block",ref:p,children:[d.jsx("img",{src:t,alt:e,className:`${r} w-auto object-cover rounded-lg cursor-pointer ${n}`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)}),l&&d.jsx("div",{ref:g,className:`absolute z-50 shadow-2xl rounded-lg overflow-hidden ${c.top?"bottom-full mb-2":"top-full mt-2"} ${c.left===!0?"right-0":c.left===!1?"left-0":"left-1/2 transform -translate-x-1/2"}`,children:d.jsx("img",{src:t,alt:e,className:"object-contain rounded-lg",style:{maxHeight:o,maxWidth:s,minHeight:"300px",minWidth:"300px",width:"auto",height:"auto"}})})]})},xT=(t,e,n={})=>{if(!e||!t)return!1;const{allowPartialMatch:r=!0,minMatchPercentage:i=70,acceptableAlternatives:s=[]}=n,o=c=>c.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim(),l=o(t),u=o(e);return!!(l===u||s.length>0&&s.map(f=>o(f)).includes(l)||r&&(u.includes(l)&&l.length>=u.length*(i/100)||l.includes(u)&&u.length>=l.length*(i/100)))},oj=({question:t,userAnswer:e,roundType:n})=>{const r=t.isTextInput?typeof e=="string"&&e.toLowerCase().trim()===(t.textAnswer||"").toLowerCase().trim():typeof e=="number"&&e===t.correctAnswer,i=t.isTextInput?typeof e=="string"&&!r&&xT(e,t.textAnswer,{acceptableAlternatives:t.alternativeAnswers||[]}):!1,s=r||i;return d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-4 mb-4",children:[d.jsx("h3",{className:"text-xl font-christmas mb-2",children:t.text}),n===nt.PICTURE?d.jsxs("div",{className:"flex flex-col items-center mb-6",children:[t.coverImageUrl&&d.jsxs("div",{className:"flex flex-col items-center mb-4",children:[d.jsx("p",{className:"text-xl font-christmas mb-2",children:"Movie Cover"}),d.jsx(Fu,{src:t.coverImageUrl,alt:"Cover Image",thumbnailHeight:"max-h-72",maxWidth:"600px",maxHeight:"600px",className:"object-contain rounded-lg shadow-lg"})]}),t.normalImageUrl&&d.jsxs("div",{className:"flex flex-col items-center mt-4",children:[d.jsx("p",{className:"text-sm mb-1",children:"Scene from the movie"}),d.jsx(Fu,{src:t.normalImageUrl,alt:"Answer Image",thumbnailHeight:"max-h-48",maxWidth:"500px",maxHeight:"500px",className:"object-contain rounded-lg"})]})]}):t.imageUrl&&d.jsx("div",{className:"flex flex-col items-center mb-6",children:d.jsx(Fu,{src:t.imageUrl,alt:"Question Image",thumbnailHeight:"max-h-48",maxWidth:"500px",maxHeight:"500px",className:"object-contain rounded-lg"})}),d.jsx("div",{className:"mt-3",children:d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm",children:"Your answer:"}),d.jsx("p",{className:`font-bold ${s?"text-green-500":"text-red-500"}`,children:t.isTextInput?e||"No answer provided":typeof e=="number"?t.options[e]:"No answer provided"}),i&&d.jsx("p",{className:"text-xs text-amber-500 italic mt-1",children:"Alternative answer accepted"})]}),(!s||i)&&d.jsxs("div",{className:"mt-2 sm:mt-0",children:[d.jsx("p",{className:"text-sm",children:i?"Primary answer:":"Correct answer:"}),d.jsx("p",{className:"font-bold text-green-500",children:t.isTextInput?t.textAnswer:t.options[t.correctAnswer]})]})]})}),d.jsx("div",{className:"mt-3 flex justify-end",children:s?d.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:"Correct"}):d.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-red-100 text-red-800",children:"Incorrect"})})]})},aj=({round:t,questions:e,userAnswers:n,roundScore:r,onContinue:i,isLastRound:s=!1})=>d.jsx("div",{className:"container mx-auto px-4 py-6",children:d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6 mb-6 snow-accumulation snow-accumulation-slow relative",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4",children:[d.jsxs("h2",{className:"text-2xl font-christmas text-xmas-gold",children:[t.title," - Round Results"]}),d.jsxs("div",{className:"mt-3 md:mt-0",children:[d.jsx("span",{className:"text-sm",children:"Round Score"}),d.jsxs("div",{className:"text-3xl font-bold text-xmas-gold",children:[r," / ",e.length]})]})]}),t.description&&d.jsx("div",{className:"bg-xmas-gold bg-opacity-10 p-4 rounded-lg mb-6 border border-xmas-gold border-opacity-30",children:d.jsx("p",{className:"text-xmas-text italic",children:t.description})}),d.jsx("div",{className:"space-y-6",children:e.map(o=>d.jsx(oj,{question:o,userAnswer:n[o.id],roundType:t.type},o.id))}),d.jsx("div",{className:"mt-8 flex justify-end",children:d.jsx("button",{className:"btn btn-primary",onClick:i,children:s?"Finish Quiz":"Continue to Next Round"})})]})}),lj=({rounds:t,completedRounds:e,onSelectRound:n,currentRoundIndex:r,roundScores:i={},quizFinished:s=!1,onSubmitFinalScore:o})=>{const l=u=>{switch(u){case nt.PICTURE:return d.jsx("i",{className:"fas fa-image text-info"});case nt.MUSIC:return d.jsx("i",{className:"fas fa-music text-success"});case nt.TRIVIA:return d.jsx("i",{className:"fas fa-lightbulb text-warning"});case nt.CHRISTMAS:return d.jsx("i",{className:"fas fa-holly-berry text-error"});default:return d.jsx("i",{className:"fas fa-question-circle text-primary"})}};return d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6 mb-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-2xl font-christmas text-xmas-gold",children:s?"Review Your Rounds":"Choose a Round"}),s&&o&&d.jsx("div",{children:d.jsxs("button",{className:"btn btn-primary",onClick:o,children:[d.jsx("i",{className:"fas fa-trophy mr-2"})," Submit Final Score"]})})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((u,c)=>{const f=e.includes(u.id),p=r===c;return d.jsx("button",{className:`p-5 rounded-lg border transition-all ${p?"bg-xmas-gold bg-opacity-20 border-xmas-gold":f?"bg-success bg-opacity-10 border-success border-opacity-30":"bg-xmas-card hover:bg-xmas-gold hover:bg-opacity-10 border-xmas-gold border-opacity-30"}`,onClick:()=>n(c),children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"text-xl",children:l(u.type)}),d.jsxs("div",{className:"flex-1 text-left",children:[d.jsx("h3",{className:"font-christmas text-lg",children:u.title}),d.jsx("p",{className:"text-sm text-xmas-text text-opacity-80 line-clamp-3 h-14",children:u.description})]}),f&&d.jsxs("div",{className:"text-success flex flex-col items-end",children:[d.jsx("i",{className:"fas fa-check-circle"}),i&&i[u.id]!==void 0&&d.jsxs("span",{className:"text-xs mt-1 font-bold",children:[i[u.id]," pts"]})]})]})},u.id)})}),s&&d.jsx("div",{className:"mt-6 p-4 bg-success bg-opacity-10 border border-success border-opacity-30 rounded-lg",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"text-xl text-success",children:d.jsx("i",{className:"fas fa-check-circle"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-christmas text-lg",children:"All Rounds Completed!"}),d.jsx("p",{className:"text-sm",children:"Click on any round to review your answers or submit your final score."})]})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-sm",children:"Total Score"}),d.jsx("div",{className:"text-2xl font-bold text-success",children:Object.values(i).reduce((u,c)=>u+c,0)})]})]})})]})},hh=()=>{window.scrollTo({top:0,behavior:"smooth"})},uj=()=>{const t=Rs(),[e,n]=k.useState([]),[r,i]=k.useState([]),[s,o]=k.useState(null),[l,u]=k.useState([]),[c,f]=k.useState({}),[p,g]=k.useState({}),[E,S]=k.useState(0),[N,D]=k.useState({}),[I,w]=k.useState([]),[R,j]=k.useState(""),[U,F]=k.useState(!1),[y,v]=k.useState(!1),[T,x]=k.useState(!1),[C,b]=k.useState(!1),[A,Ce]=k.useState(!1),[Ke,re]=k.useState(!1),[Re,B]=k.useState(!1),[ie,se]=k.useState({}),[Ee,ae]=k.useState(!0),[Te,lt]=k.useState(!1),[He,We]=k.useState(null);k.useEffect(()=>{(async()=>{try{const _e=Mr(On(xt,"rounds"),Pl("order","asc")),ut=await Vr(_e),Ie=[];ut.forEach(ke=>{const wt=ke.data();Ie.push({id:ke.id,...wt})});const Q=Ie.filter(ke=>ke.published!==!1),ue=Mr(On(xt,"questions")),ye=await Vr(ue),Je=[];ye.forEach(ke=>{const wt=ke.data();Je.push({id:ke.id,...wt,roundId:wt.roundId||""})});const Me={};Q.forEach(ke=>{Me[ke.id]=0}),n(Q),i(Je),D(Me),ae(!1)}catch(_e){console.error("Error fetching quiz data:",_e),We("Failed to load quiz data. Please try again later."),ae(!1)}})()},[]);const Xe=()=>{v(!0),B(!0)},Fn=(le,_e)=>{f(ut=>({...ut,[le]:_e}))},tr=(le,_e)=>{g(ut=>({...ut,[le]:_e}))},gn=()=>{if(s===null)return;let le=0;const _e={};l.forEach(Ie=>{if(Ie.isTextInput){const Q=p[Ie.id]||"";_e[Ie.id]=Q,xT(Q,Ie.textAnswer,{acceptableAlternatives:Ie.alternativeAnswers||[]})&&le++}else{const Q=c[Ie.id];_e[Ie.id]=Q,Q!==void 0&&Q===Ie.correctAnswer&&le++}}),S(Ie=>Ie+le);const ut=e[s];D(Ie=>({...Ie,[ut.id]:le})),se(Ie=>({...Ie,..._e})),hh(),b(!0),re(!0)},nr=()=>{if(re(!1),hh(),s!==null){const _e=e[s];_e&&!I.includes(_e.id)&&w(ut=>[...ut,_e.id])}const le=[...I];s!==null&&!le.includes(e[s].id)&&le.push(e[s].id),le.length>=e.length&&x(!0),B(!0),o(null),u([]),f({}),g({}),b(!1),Ce(!1)},qe=async()=>{if(!R.trim()){alert("Please enter your name");return}lt(!0);try{await Mm(On(xt,"scores"),{playerName:R.trim(),score:E,roundScores:N,completedRounds:I,timestamp:PD()}),hh(),t("/")}catch(le){console.error("Error submitting score:",le),We("Failed to submit your score. Please try again."),lt(!1)}};if(Ee)return d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-xmas-gold"}),d.jsx("p",{className:"mt-4 text-xl",children:"Loading Christmas Quiz..."})]});if(He)return d.jsx("div",{className:"text-center p-8",children:d.jsxs("div",{className:"bg-error bg-opacity-20 p-6 rounded-lg",children:[d.jsx("h2",{className:"text-2xl font-christmas text-error mb-4",children:"Oh no! Something went wrong"}),d.jsx("p",{className:"mb-4",children:He}),d.jsx("button",{className:"btn btn-primary",onClick:()=>t("/"),children:"Return Home"})]})});if(r.length===0)return d.jsx("div",{className:"text-center p-8",children:d.jsxs("div",{className:"bg-warning bg-opacity-20 p-6 rounded-lg",children:[d.jsx("h2",{className:"text-2xl font-christmas text-warning mb-4",children:"No Questions Available"}),d.jsx("p",{className:"mb-4",children:"There are no quiz questions available right now. Please check back later!"}),d.jsx("button",{className:"btn btn-primary",onClick:()=>t("/"),children:"Return Home"})]})});if(!y)return d.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[d.jsx("h1",{className:"font-christmas text-4xl md:text-5xl text-xmas-line mb-6",children:"Christmas Quiz"}),d.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg max-w-2xl mx-auto",children:[d.jsx("h2",{className:"text-2xl font-christmas text-xmas-gold mb-4",children:"Ready to Test Your Christmas Knowledge?"}),d.jsx("p",{className:"mb-6",children:"Answer the questions correctly to earn points. Choose any round to begin!"}),d.jsxs("button",{className:"btn btn-primary btn-lg font-christmas text-xl",onClick:Xe,children:[d.jsx("i",{className:"fas fa-play-circle mr-2"})," Start Quiz"]})]})]});if(U)return d.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[d.jsx("h1",{className:"font-christmas text-4xl md:text-5xl text-xmas-line mb-6",children:"Quiz Complete!"}),d.jsxs("div",{className:"bg-xmas-card p-6 rounded-lg shadow-lg max-w-md mx-auto",children:[d.jsx("div",{className:"text-6xl text-xmas-gold mb-4",children:d.jsx("i",{className:"fas fa-star"})}),d.jsx("h2",{className:"text-3xl font-christmas text-xmas-gold mb-2",children:"Your Score"}),d.jsxs("p",{className:"text-4xl font-bold mb-6",children:[E," points"]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text text-xmas-snow",children:"Enter your name to save your score:"})}),d.jsx("input",{type:"text",className:"input input-bordered w-full",value:R,onChange:le=>j(le.target.value),placeholder:"Your Name",disabled:Te})]}),d.jsx("button",{className:"btn btn-primary w-full",onClick:qe,disabled:Te,children:Te?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Submitting..."]}):"Submit Score"})]})]});if(e[s],Ke&&s!==null){const le=e[s],_e=[...I];_e.includes(le.id)||_e.push(le.id);const ut=_e.length>=e.length;return d.jsx(aj,{round:le,questions:l,userAnswers:ie,roundScore:N[le.id]||0,onContinue:nr,isLastRound:ut})}if(Re)return d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h1",{className:"text-2xl font-christmas text-xmas-line",children:"Christmas Quiz"}),d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:"text-sm",children:"Current Score"}),d.jsx("h2",{className:"text-xl font-bold",children:E})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("span",{className:"text-sm",children:"Rounds Completed"}),d.jsxs("h2",{className:"text-xl font-bold",children:[I.length," / ",e.length]})]})]}),d.jsx(lj,{rounds:e,completedRounds:I,onSelectRound:le=>{const _e=e[le],ut=r.filter(Ie=>Ie.roundId===_e.id);o(le),u(ut),I.includes(_e.id)?re(!0):re(!1),B(!1)},currentRoundIndex:s,roundScores:N,quizFinished:T,onSubmitFinalScore:()=>F(!0)})]});if(s!==null){const le=e[s];return d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-sm",children:"Round"}),d.jsx("h2",{className:"text-xl font-bold",children:(le==null?void 0:le.title)||"Quiz"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:"text-sm",children:"Score"}),d.jsx("h2",{className:"text-xl font-bold",children:E})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("span",{className:"text-sm",children:"Questions"}),d.jsx("h2",{className:"text-xl font-bold",children:l.length})]})]}),(le==null?void 0:le.description)&&d.jsx("div",{className:"bg-xmas-gold bg-opacity-10 p-4 rounded-lg mb-6 border border-xmas-gold border-opacity-30",children:d.jsx("p",{className:"text-xmas-text italic",children:le.description})}),d.jsx("div",{className:"space-y-8 mb-8",children:l.map((_e,ut)=>d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6",children:[d.jsxs("h3",{className:"text-2xl font-christmas mb-4",children:["Question ",ut+1,": ",_e.text]}),(le==null?void 0:le.type)===nt.PICTURE&&_e.blankedImageUrl&&d.jsx("div",{className:"mb-4 flex justify-center",children:d.jsx(Fu,{src:_e.blankedImageUrl,alt:"Question Image",thumbnailHeight:"max-h-64",maxWidth:"800px",maxHeight:"800px",className:"object-contain rounded-lg"})}),_e.isTextInput?d.jsxs("div",{className:"form-control",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Your Answer:"})}),d.jsx("div",{className:"flex gap-2",children:d.jsx("input",{type:"text",className:"input input-bordered flex-1",value:p[_e.id]||"",onChange:Ie=>tr(_e.id,Ie.target.value),placeholder:"Type your answer here"})})]}):d.jsx("div",{className:"space-y-3",children:_e.options.map((Ie,Q)=>d.jsxs("button",{className:`btn btn-outline w-full justify-start text-left px-4 py-3 ${c[_e.id]===Q?"btn-primary":""}`,onClick:()=>Fn(_e.id,Q),children:[d.jsxs("span",{className:"mr-3",children:[String.fromCharCode(65+Q),"."]}),Ie]},Q))})]},_e.id))}),d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("button",{className:"btn btn-outline",onClick:()=>{B(!0),o(null)},children:[d.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Round Selection"]}),d.jsx("button",{className:"btn btn-primary btn-lg",onClick:gn,children:"Submit Answers & Show Results"})]})]})}},cj=()=>{const t=Rs(),{isAdmin:e,loading:n,currentUser:r}=Vo(),[i,s]=k.useState(!1),[o,l]=k.useState(null),u=!1;k.useEffect(()=>{e&&!n&&t("/admin")},[e,n,t]);const c=async()=>{l(null),s(!0);try{await jP(wT,tj)}catch(f){console.error("Login error:",f),f.code==="auth/popup-closed-by-user"?l("Sign-in popup was closed. Please try again."):f.code==="auth/cancelled-popup-request"?l("Another popup is already open. Please try again."):f.code==="auth/unauthorized-domain"?(console.error("Unauthorized domain error:",window.location.hostname),l("This domain is not authorized for OAuth operations. Please add "+window.location.hostname+" to your Firebase authorized domains list in the Firebase console under Authentication > Sign-in method > Authorized domains.")):l("Failed to sign in. Please try again."),s(!1)}};return n?d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):d.jsx("div",{className:"container mx-auto px-4 py-12",children:d.jsxs("div",{className:"max-w-md mx-auto",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"font-christmas text-4xl text-xmas-line mb-2",children:"Admin Login"}),d.jsx("p",{className:"text-xmas-mute",children:"Sign in to manage the Christmas Quiz"})]}),d.jsxs("div",{className:"bg-xmas-card rounded-lg shadow-lg p-6",children:[u,r&&d.jsxs("div",{className:"bg-info bg-opacity-10 border-l-4 border-info p-4 mb-6 rounded",children:[d.jsx("p",{className:"text-info font-bold mb-2",children:"User Authenticated"}),d.jsxs("p",{className:"text-info text-sm mb-1",children:["Email: ",r.email]}),d.jsxs("p",{className:"text-info text-sm mb-2",children:["UID: ",r.uid]}),d.jsxs("p",{className:"text-info text-sm",children:["To grant admin access, create a document in the ",d.jsx("code",{className:"bg-base-300 px-1 py-0.5 rounded",children:"admins"})," collection with this UID as the document ID."]}),u]}),o&&d.jsx("div",{className:"bg-error bg-opacity-10 border-l-4 border-error p-4 mb-6 rounded",children:d.jsx("p",{className:"text-error",children:o})}),d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("p",{className:"mb-4",children:"Sign in with your Google account to access the admin panel."}),d.jsx("p",{className:"text-sm text-xmas-mute mb-6",children:"Only authorized administrators will be granted access."}),d.jsx("button",{onClick:c,className:"btn btn-primary w-full flex items-center justify-center gap-2",disabled:i,children:i?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"loading loading-spinner loading-sm"}),"Signing in..."]}):d.jsxs(d.Fragment,{children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 48 48",children:[d.jsx("path",{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12
                      s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20
                      s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`}),d.jsx("path",{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039
                      l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`}),d.jsx("path",{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36
                      c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`}),d.jsx("path",{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571
                      c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`})]}),"Sign in with Google"]})})]})]}),d.jsx("div",{className:"text-center mt-6",children:d.jsx("button",{onClick:()=>t("/"),className:"btn btn-link text-xmas-mute",children:"Back to Home"})})]})})},dj=()=>{const t=Rs(),{isAdmin:e,loading:n}=Vo(),[r,i]=k.useState([]),[s,o]=k.useState(!0),[l,u]=k.useState(null);k.useEffect(()=>{!n&&!e&&t("/admin/login")},[e,n,t]),k.useEffect(()=>{e&&(async()=>{if(e){o(!0);try{const p=await Vr(Mr(On(xt,"rounds"),Pl("order","asc"))),g=[];p.forEach(E=>{const S=E.data();g.push({id:E.id,...S})}),i(g)}catch(p){console.error("Error fetching rounds:",p),u("Failed to load rounds")}finally{o(!1)}}})()},[e]);const c=f=>{switch(f){case nt.PICTURE:return d.jsx("i",{className:"fas fa-image text-info"});case nt.MUSIC:return d.jsx("i",{className:"fas fa-music text-success"});case nt.TRIVIA:return d.jsx("i",{className:"fas fa-lightbulb text-warning"});case nt.CHRISTMAS:return d.jsx("i",{className:"fas fa-holly-berry text-error"});default:return d.jsx("i",{className:"fas fa-question-circle text-primary"})}};return n||s?d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:"Admin Dashboard"}),d.jsx("div",{className:"flex gap-2",children:d.jsxs(rn,{to:"/admin/results",className:"btn btn-outline",children:[d.jsx("i",{className:"fas fa-trophy mr-2"})," View Results"]})})]}),l&&d.jsxs("div",{className:"alert alert-error mb-6",children:[d.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),d.jsx("span",{children:l})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("h2",{className:"text-2xl font-christmas mb-4 text-xmas-gold",children:"Quiz Rounds"}),r.length===0?d.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[d.jsx("h3",{className:"text-xl mb-4",children:"No rounds yet"}),d.jsx("p",{className:"mb-4",children:"Start by adding your first quiz round!"}),d.jsxs(rn,{to:"/admin/rounds",className:"btn btn-primary",children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})]}):d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.map(f=>d.jsx("div",{className:"card bg-xmas-card shadow-xl",children:d.jsxs("div",{className:"card-body",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h2",{className:"card-title font-christmas",children:[c(f.type)," ",f.title]}),d.jsxs("div",{className:"badge badge-outline",children:["#",f.order]})]}),d.jsx("p",{className:"text-sm mb-4",children:f.description}),d.jsx("div",{className:"card-actions justify-end",children:d.jsxs(rn,{to:`/admin/questions/${f.id}`,className:"btn btn-primary btn-sm",children:[d.jsx("i",{className:"fas fa-list mr-1"})," Manage Questions"]})})]})},f.id)),d.jsx("div",{className:"card bg-base-100 border-2 border-dashed border-base-300 shadow-xl flex items-center justify-center",children:d.jsxs("div",{className:"card-body items-center text-center",children:[d.jsx("h2",{className:"card-title font-christmas",children:"Add New Round"}),d.jsx("p",{children:"Create a new quiz round"}),d.jsx("div",{className:"card-actions justify-center mt-4",children:d.jsxs(rn,{to:"/admin/rounds",className:"btn btn-primary",children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})})]})})]})]})]})},hj=()=>{const t=Rs(),{isAdmin:e,loading:n}=Vo(),[r,i]=k.useState([]),[s,o]=k.useState(!0),[l,u]=k.useState(null),[c,f]=k.useState("score"),[p,g]=k.useState("desc");k.useEffect(()=>{!n&&!e&&t("/admin/login")},[e,n,t]),k.useEffect(()=>{e&&(async()=>{if(e)try{const D=Mr(On(xt,"scores"),Pl(c,p)),I=await Vr(D),w=[];I.forEach(R=>{var U;const j=R.data();w.push({id:R.id,playerName:j.playerName,score:j.score,timestamp:((U=j.timestamp)==null?void 0:U.toDate())||new Date})}),i(w)}catch(D){console.error("Error fetching scores:",D),u("Failed to load scores")}finally{o(!1)}})()},[e,c,p]);const E=N=>{N===c?g(p==="asc"?"desc":"asc"):(f(N),g("desc"))},S=async N=>{if(confirm("Are you sure you want to delete this score?"))try{await Lm(Lr(xt,"scores",N)),i(r.filter(D=>D.id!==N))}catch(D){console.error("Error deleting score:",D),u("Failed to delete score")}};return n||s?d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:"Quiz Results"}),d.jsxs(rn,{to:"/admin",className:"btn btn-outline",children:[d.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Dashboard"]})]}),l&&d.jsxs("div",{className:"alert alert-error mb-6",children:[d.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),d.jsx("span",{children:l})]}),r.length===0?d.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[d.jsx("h3",{className:"text-xl mb-4",children:"No quiz results yet"}),d.jsx("p",{children:"Results will appear here once players complete the quiz"})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"bg-xmas-card p-4 rounded-lg mb-6",children:d.jsxs("div",{className:"stats shadow",children:[d.jsxs("div",{className:"stat",children:[d.jsx("div",{className:"stat-title",children:"Total Players"}),d.jsx("div",{className:"stat-value",children:r.length})]}),d.jsxs("div",{className:"stat",children:[d.jsx("div",{className:"stat-title",children:"Average Score"}),d.jsx("div",{className:"stat-value",children:Math.round(r.reduce((N,D)=>N+D.score,0)/r.length)})]}),d.jsxs("div",{className:"stat",children:[d.jsx("div",{className:"stat-title",children:"Highest Score"}),d.jsx("div",{className:"stat-value",children:Math.max(...r.map(N=>N.score))})]})]})}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"table w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Rank"}),d.jsx("th",{children:d.jsxs("button",{className:"flex items-center",onClick:()=>E("playerName"),children:["Player",c==="playerName"&&d.jsx("i",{className:`fas fa-sort-${p==="asc"?"up":"down"} ml-2`})]})}),d.jsx("th",{children:d.jsxs("button",{className:"flex items-center",onClick:()=>E("score"),children:["Score",c==="score"&&d.jsx("i",{className:`fas fa-sort-${p==="asc"?"up":"down"} ml-2`})]})}),d.jsx("th",{children:d.jsxs("button",{className:"flex items-center",onClick:()=>E("timestamp"),children:["Date",c==="timestamp"&&d.jsx("i",{className:`fas fa-sort-${p==="asc"?"up":"down"} ml-2`})]})}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:r.map((N,D)=>d.jsxs("tr",{children:[d.jsx("td",{children:D+1}),d.jsx("td",{children:N.playerName}),d.jsx("td",{className:"font-bold",children:N.score}),d.jsxs("td",{children:[N.timestamp.toLocaleDateString()," ",N.timestamp.toLocaleTimeString()]}),d.jsx("td",{children:d.jsx("button",{className:"btn btn-sm btn-error btn-outline",onClick:()=>S(N.id),children:d.jsx("i",{className:"fas fa-trash"})})})]},N.id))})]})})]})]})},fj=()=>{const t=Rs(),{isAdmin:e,loading:n}=Vo(),[r,i]=k.useState([]),[s,o]=k.useState(!0),[l,u]=k.useState(null),[c,f]=k.useState(!1),[p,g]=k.useState(null),[E,S]=k.useState(""),[N,D]=k.useState(""),[I,w]=k.useState(nt.GENERAL),[R,j]=k.useState(1),[U,F]=k.useState(!1),[y,v]=k.useState(!1);k.useEffect(()=>{!n&&!e&&t("/admin/login")},[e,n,t]);const T=k.useCallback(async()=>{try{o(!0);const re=Mr(On(xt,"rounds"),Pl("order","asc")),Re=await Vr(re),B=[];Re.forEach(ie=>{const se=ie.data();B.push({id:ie.id,...se,published:se.published!==void 0?se.published:!1})}),i(B)}catch(re){console.error("Error fetching rounds:",re),u("Failed to load rounds")}finally{o(!1)}},[]);k.useCallback(async re=>{try{const Re=re.published===!0,B=Lr(xt,"rounds",re.id);await jf(B,{published:!Re}),await T()}catch(Re){console.error("Error toggling published status:",Re),u("Failed to update round status")}},[xt,T]),k.useEffect(()=>{n||T()},[n,T]);const x=()=>{S(""),D(""),w(nt.GENERAL),j(r.length+1),F(!1),g(null)},C=async re=>{re.preventDefault(),v(!0);try{await Mm(On(xt,"rounds"),{title:E,description:N,type:I,order:R,published:U}),await T(),f(!1),x()}catch(Re){console.error("Error adding round:",Re),u("Failed to add round")}finally{v(!1)}},b=re=>{g(re),S(re.title),D(re.description),w(re.type),j(re.order),F(re.published===!0),f(!0)},A=async re=>{if(re.preventDefault(),!!p){v(!0);try{const Re=Lr(xt,"rounds",p.id);await jf(Re,{title:E,description:N,type:I,order:R,published:U}),await T(),f(!1),x()}catch(Re){console.error("Error updating round:",Re),u("Failed to update round")}finally{v(!1)}}},Ce=async re=>{if(confirm("Are you sure you want to delete this round? This will NOT delete questions in this round."))try{await Lm(Lr(xt,"rounds",re)),await T()}catch(Re){console.error("Error deleting round:",Re),u("Failed to delete round")}},Ke=re=>{switch(re){case nt.PICTURE:return d.jsx("i",{className:"fas fa-image text-info"});case nt.MUSIC:return d.jsx("i",{className:"fas fa-music text-success"});case nt.TRIVIA:return d.jsx("i",{className:"fas fa-lightbulb text-warning"});case nt.CHRISTMAS:return d.jsx("i",{className:"fas fa-holly-berry text-error"});default:return d.jsx("i",{className:"fas fa-question-circle text-primary"})}};return n||s?d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:"Quiz Rounds"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(rn,{to:"/admin",className:"btn btn-outline",children:[d.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Dashboard"]}),d.jsxs("button",{className:"btn btn-primary",onClick:()=>{x(),j(r.length+1),f(!0)},children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})]})]}),l&&d.jsxs("div",{className:"alert alert-error mb-6",children:[d.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),d.jsx("span",{children:l})]}),r.length===0?d.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[d.jsx("h3",{className:"text-xl mb-4",children:"No rounds yet"}),d.jsx("p",{className:"mb-4",children:"Start by adding your first quiz round!"}),d.jsxs("button",{className:"btn btn-primary",onClick:()=>f(!0),children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Round"]})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(re=>d.jsx("div",{className:"card bg-xmas-card shadow-xl",children:d.jsxs("div",{className:"card-body",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h2",{className:"card-title font-christmas",children:[Ke(re.type)," ",re.title]}),d.jsxs("div",{className:"flex gap-2 items-center",children:[re.published===!0?d.jsx("div",{className:"badge badge-success",children:"Published"}):d.jsx("div",{className:"badge badge-warning",children:"Draft"}),d.jsxs("div",{className:"badge badge-outline",children:["#",re.order]})]})]}),d.jsx("p",{className:"text-sm mb-4",children:re.description}),d.jsxs("div",{className:"card-actions justify-end",children:[d.jsxs(rn,{to:`/admin/questions/${re.id}`,className:"btn btn-primary btn-sm",children:[d.jsx("i",{className:"fas fa-list mr-1"})," Manage Questions"]}),d.jsx("button",{className:"btn btn-outline btn-sm",onClick:()=>b(re),children:d.jsx("i",{className:"fas fa-edit"})}),d.jsx("button",{className:"btn btn-error btn-outline btn-sm",onClick:()=>Ce(re.id),children:d.jsx("i",{className:"fas fa-trash"})})]})]})},re.id))}),c&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"bg-xmas-card rounded-lg shadow-xl max-w-md w-full",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-christmas",children:p?"Edit Round":"Add New Round"}),d.jsx("button",{className:"btn btn-sm btn-circle",onClick:()=>{f(!1),x()},children:d.jsx("i",{className:"fas fa-times"})})]}),d.jsxs("form",{onSubmit:p?A:C,children:[d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Round Title"})}),d.jsx("input",{type:"text",className:"input input-bordered",value:E,onChange:re=>S(re.target.value),placeholder:"e.g., Christmas Movies",required:!0})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Description"})}),d.jsx("textarea",{className:"textarea textarea-bordered h-20",value:N,onChange:re=>D(re.target.value),placeholder:"Brief description of this round"})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Round Type"})}),d.jsxs("select",{className:"select select-bordered w-full",value:I,onChange:re=>w(re.target.value),required:!0,children:[d.jsx("option",{value:nt.GENERAL,children:"General Questions"}),d.jsx("option",{value:nt.PICTURE,children:"Picture Round"}),d.jsx("option",{value:nt.MUSIC,children:"Music Round"}),d.jsx("option",{value:nt.TRIVIA,children:"Trivia Round"}),d.jsx("option",{value:nt.CHRISTMAS,children:"Christmas Round"})]})]}),d.jsxs("div",{className:"form-control mb-6",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Display Order"})}),d.jsx("input",{type:"number",className:"input input-bordered",value:R,onChange:re=>j(parseInt(re.target.value)||1),min:"1",required:!0})]}),d.jsxs("div",{className:"form-control mb-6",children:[d.jsxs("label",{className:"label cursor-pointer",children:[d.jsx("span",{className:"label-text",children:"Published"}),d.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:U,onChange:re=>F(re.target.checked)})]}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Only published rounds will be visible to users in the quiz."})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{f(!1),x()},children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn btn-primary",disabled:y,children:y?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),p?"Updating...":"Adding..."]}):p?"Update Round":"Add Round"})]})]})]})})})]})},pj=async(t,e=.8)=>new Promise((n,r)=>{const i=new FileReader;i.onload=s=>{var l;const o=new Image;o.onload=()=>{const u=document.createElement("canvas");u.width=o.width,u.height=o.height;const c=u.getContext("2d");if(!c){r(new Error("Could not get canvas context"));return}c.drawImage(o,0,0),u.toBlob(f=>{if(!f){r(new Error("Could not convert image to WebP"));return}const p=t.name.split(".").slice(0,-1).join(".")+".webp",g=new File([f],p,{type:"image/webp"});n(g)},"image/webp",e)},o.onerror=()=>{r(new Error("Failed to load image"))},o.src=(l=s.target)==null?void 0:l.result},i.onerror=()=>{r(new Error("Failed to read file"))},i.readAsDataURL(t)}),mj=t=>t.type.startsWith("image/"),gj=async(t,e=.8)=>{if(!mj(t)||t.type==="image/webp")return t;try{return await pj(t,e)}catch(n){return console.error("Error converting image to WebP:",n),t}},yj=()=>{const t=Rs(),{roundId:e}=pA(),{isAdmin:n,loading:r}=Vo(),[i,s]=k.useState(null),[o,l]=k.useState([]),[u,c]=k.useState(!0),[f,p]=k.useState(null),[g,E]=k.useState(!1),[S,N]=k.useState(null),[D,I]=k.useState(""),[w,R]=k.useState(["","","",""]),[j,U]=k.useState(0),[F,y]=k.useState(null),[v,T]=k.useState(null),[x,C]=k.useState(null),[b,A]=k.useState(null),[Ce,Ke]=k.useState(null),[re,Re]=k.useState(null),[B,ie]=k.useState(null),[se,Ee]=k.useState(null),[ae,Te]=k.useState(!1),[lt,He]=k.useState(""),[We,Xe]=k.useState([""]),[Fn,tr]=k.useState(!1);k.useEffect(()=>{!r&&!n&&t("/admin/login")},[n,r,t]),k.useEffect(()=>{n&&e&&(async()=>{if(!(!n||!e))try{const ue=await tT(Lr(xt,"rounds",e));if(!ue.exists()){p("Round not found"),c(!1);return}const ye=ue.data();s({id:ue.id,...ye});const Je=Mr(On(xt,"questions"),uh("roundId","==",e)),Me=await Vr(Je),ke=[];Me.forEach(wt=>{const mt=wt.data();ke.push({id:wt.id,...mt})}),l(ke)}catch(ue){console.error("Error fetching round data:",ue),p("Failed to load round data")}finally{c(!1)}})()},[n,e]);const gn=async(Q,ue)=>{var Je;const ye=(Je=Q.target.files)==null?void 0:Je[0];if(ye)try{const Me=await gj(ye,.85);switch(ue){case"main":y(Me);const ke=new FileReader;ke.onloadend=()=>{Ke(ke.result)},ke.readAsDataURL(Me);break;case"blanked":T(Me);const wt=new FileReader;wt.onloadend=()=>{Re(wt.result)},wt.readAsDataURL(Me);break;case"normal":C(Me);const mt=new FileReader;mt.onloadend=()=>{ie(mt.result)},mt.readAsDataURL(Me);break;case"cover":A(Me);const je=new FileReader;je.onloadend=()=>{Ee(je.result)},je.readAsDataURL(Me);break}}catch(Me){console.error("Error processing image:",Me);const ke=ye;switch(ue){case"main":y(ke),Ke(URL.createObjectURL(ke));break;case"blanked":T(ke),Re(URL.createObjectURL(ke));break;case"normal":C(ke),ie(URL.createObjectURL(ke));break;case"cover":A(ke),Ee(URL.createObjectURL(ke));break}}},nr=(Q,ue)=>{const ye=[...w];ye[Q]=ue,R(ye)},qe=()=>{I(""),R(["","","",""]),U(0),y(null),T(null),C(null),A(null),Ke(null),Re(null),ie(null),Ee(null),Te(!1),He(""),Xe([""]),N(null)},le=async Q=>{if(Q.preventDefault(),!!e){tr(!0);try{let ue="",ye="",Je="",Me="";if(F){const je=_n(wn,`question-images/${Date.now()}-${F.name}`),de={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"main",originalFormat:F.type,convertedToWebP:F.type!=="image/webp"?"true":"false"}};await si(je,F,de),ue=await oi(je)}if(v){const je=_n(wn,`question-images/blanked-${Date.now()}-${v.name}`),de={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"blanked",originalFormat:v.type,convertedToWebP:v.type!=="image/webp"?"true":"false"}};await si(je,v,de),ye=await oi(je)}if(x){const je=_n(wn,`question-images/normal-${Date.now()}-${x.name}`),de={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"normal",originalFormat:x.type,convertedToWebP:x.type!=="image/webp"?"true":"false"}};await si(je,x,de),Je=await oi(je)}if(b){const je=_n(wn,`question-images/cover-${Date.now()}-${b.name}`),de={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),imageType:"cover",originalFormat:b.type,convertedToWebP:b.type!=="image/webp"?"true":"false"}};await si(je,b,de),Me=await oi(je)}await Mm(On(xt,"questions"),{text:D,options:w,correctAnswer:j,roundId:e,...ue&&{imageUrl:ue},...ye&&{blankedImageUrl:ye},...Je&&{normalImageUrl:Je},...Me&&{coverImageUrl:Me},...ae&&{isTextInput:ae},...ae&&lt&&{textAnswer:lt},...ae&&{alternativeAnswers:We.filter(je=>je.trim()!=="")}});const ke=Mr(On(xt,"questions"),uh("roundId","==",e)),wt=await Vr(ke),mt=[];wt.forEach(je=>{const de=je.data();mt.push({id:je.id,...de})}),l(mt),E(!1),qe()}catch(ue){console.error("Error adding question:",ue),p("Failed to add question")}finally{tr(!1)}}},_e=Q=>{N(Q),I(Q.text),R([...Q.options]),U(Q.correctAnswer),Ke(Q.imageUrl||null),Re(Q.blankedImageUrl||null),ie(Q.normalImageUrl||null),Ee(Q.coverImageUrl||null),Te(Q.isTextInput||!1),He(Q.textAnswer||""),Xe(Q.alternativeAnswers||[""]),E(!0)},ut=async Q=>{if(Q.preventDefault(),!(!S||!e)){tr(!0);try{let ue=S.imageUrl||"",ye=S.blankedImageUrl||"",Je=S.normalImageUrl||"",Me=S.coverImageUrl||"";if(F){if(S.imageUrl)try{const Ue=_n(wn,S.imageUrl);await ca(Ue)}catch(Ue){console.error("Error deleting old main image:",Ue)}const de=_n(wn,`question-images/${Date.now()}-${F.name}`),Ve={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"main",originalFormat:F.type,convertedToWebP:F.type!=="image/webp"?"true":"false"}};await si(de,F,Ve),ue=await oi(de)}if(v){if(S.blankedImageUrl)try{const Ue=_n(wn,S.blankedImageUrl);await ca(Ue)}catch(Ue){console.error("Error deleting old blanked image:",Ue)}const de=_n(wn,`question-images/blanked-${Date.now()}-${v.name}`),Ve={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"blanked",originalFormat:v.type,convertedToWebP:v.type!=="image/webp"?"true":"false"}};await si(de,v,Ve),ye=await oi(de)}if(x){if(S.normalImageUrl)try{const Ue=_n(wn,S.normalImageUrl);await ca(Ue)}catch(Ue){console.error("Error deleting old normal image:",Ue)}const de=_n(wn,`question-images/normal-${Date.now()}-${x.name}`),Ve={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"normal",originalFormat:x.type,convertedToWebP:x.type!=="image/webp"?"true":"false"}};await si(de,x,Ve),Je=await oi(de)}if(b){if(S.coverImageUrl)try{const Ue=_n(wn,S.coverImageUrl);await ca(Ue)}catch(Ue){console.error("Error deleting old cover image:",Ue)}const de=_n(wn,`question-images/cover-${Date.now()}-${b.name}`),Ve={contentType:"image/webp",customMetadata:{uploadedBy:"admin",uploadedAt:new Date().toISOString(),action:"update",imageType:"cover",originalFormat:b.type,convertedToWebP:b.type!=="image/webp"?"true":"false"}};await si(de,b,Ve),Me=await oi(de)}const ke=Lr(xt,"questions",S.id);await jf(ke,{text:D,options:w,correctAnswer:j,roundId:e,...ue&&{imageUrl:ue},...ye&&{blankedImageUrl:ye},...Je&&{normalImageUrl:Je},...Me&&{coverImageUrl:Me},isTextInput:ae,...ae&&{textAnswer:lt},...ae&&{alternativeAnswers:We.filter(de=>de.trim()!=="")}});const wt=Mr(On(xt,"questions"),uh("roundId","==",e)),mt=await Vr(wt),je=[];mt.forEach(de=>{const Ve=de.data();je.push({id:de.id,...Ve})}),l(je),E(!1),qe()}catch(ue){console.error("Error updating question:",ue),p("Failed to update question")}finally{tr(!1)}}},Ie=async(Q,ue)=>{if(confirm("Are you sure you want to delete this question?"))try{if(ue)try{const ye=_n(wn,ue);await ca(ye)}catch(ye){console.error("Error deleting image:",ye)}await Lm(Lr(xt,"questions",Q)),l(o.filter(ye=>ye.id!==Q))}catch(ye){console.error("Error deleting question:",ye),p("Failed to delete question")}};return r||u?d.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-xmas-gold"})}):i?d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"font-christmas text-3xl md:text-4xl text-xmas-line",children:i.title}),d.jsx("p",{className:"text-xmas-mute",children:i.description})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(rn,{to:"/admin/rounds",className:"btn btn-outline",children:[d.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Rounds"]}),d.jsxs("button",{className:"btn btn-primary",onClick:()=>{qe(),E(!0)},children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Question"]})]})]}),f&&d.jsxs("div",{className:"alert alert-error mb-6",children:[d.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),d.jsx("span",{children:f})]}),o.length===0?d.jsxs("div",{className:"bg-xmas-card p-8 rounded-lg text-center",children:[d.jsx("h3",{className:"text-xl mb-4",children:"No questions in this round yet"}),d.jsx("p",{className:"mb-4",children:"Start by adding your first question!"}),d.jsxs("button",{className:"btn btn-primary",onClick:()=>E(!0),children:[d.jsx("i",{className:"fas fa-plus mr-2"})," Add Question"]})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"table w-full",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Question"}),d.jsx("th",{children:"Options"}),d.jsx("th",{children:"Correct Answer"}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:o.map(Q=>d.jsxs("tr",{children:[d.jsxs("td",{className:"max-w-xs",children:[d.jsx("div",{className:"font-medium",children:Q.text}),Q.imageUrl&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:Q.imageUrl,alt:"Question",className:"h-12 w-auto object-cover rounded"})})]}),d.jsx("td",{children:Q.isTextInput?d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-500 italic",children:"Text input question"}),Q.alternativeAnswers&&Q.alternativeAnswers.length>0&&d.jsxs("div",{className:"mt-2",children:[d.jsx("p",{className:"text-xs font-medium",children:"Alternative answers:"}),d.jsx("ul",{className:"list-disc pl-4 text-sm",children:Q.alternativeAnswers.map((ue,ye)=>d.jsx("li",{children:ue},ye))})]})]}):d.jsx("ol",{className:"list-alpha pl-4",children:Q.options.map((ue,ye)=>d.jsx("li",{className:ye===Q.correctAnswer?"font-bold text-success":"",children:ue},ye))})}),d.jsx("td",{children:Q.isTextInput?Q.textAnswer:String.fromCharCode(65+Q.correctAnswer)}),d.jsx("td",{children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>_e(Q),children:d.jsx("i",{className:"fas fa-edit"})}),d.jsx("button",{className:"btn btn-sm btn-error btn-outline",onClick:()=>Ie(Q.id,Q.imageUrl),children:d.jsx("i",{className:"fas fa-trash"})})]})})]},Q.id))})]})}),g&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:d.jsx("div",{className:"bg-xmas-card rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-christmas",children:S?"Edit Question":"Add New Question"}),d.jsx("button",{className:"btn btn-sm btn-circle",onClick:()=>{E(!1),qe()},children:d.jsx("i",{className:"fas fa-times"})})]}),d.jsxs("form",{onSubmit:S?ut:le,children:[d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Question Text"})}),d.jsx("textarea",{className:"textarea textarea-bordered h-24",value:D,onChange:Q=>I(Q.target.value),placeholder:"Enter your question here",required:!0})]}),(i==null?void 0:i.type)===nt.PICTURE&&d.jsx("div",{className:"form-control mb-4",children:d.jsxs("label",{className:"label cursor-pointer",children:[d.jsx("span",{className:"label-text",children:"Use text input instead of multiple choice"}),d.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:ae,onChange:Q=>Te(Q.target.checked)})]})}),ae&&(i==null?void 0:i.type)===nt.PICTURE?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Correct Text Answer"})}),d.jsx("input",{type:"text",className:"input input-bordered w-full",value:lt,onChange:Q=>He(Q.target.value),placeholder:"Enter the correct answer",required:ae})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsxs("label",{className:"label",children:[d.jsx("span",{className:"label-text",children:"Alternative Acceptable Answers"}),d.jsxs("button",{type:"button",className:"btn btn-xs btn-outline",onClick:()=>Xe([...We,""]),children:[d.jsx("i",{className:"fas fa-plus mr-1"})," Add"]})]}),d.jsx("div",{className:"space-y-2",children:We.map((Q,ue)=>d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",className:"input input-bordered flex-1",value:Q,onChange:ye=>{const Je=[...We];Je[ue]=ye.target.value,Xe(Je)},placeholder:`Alternative answer ${ue+1}`}),We.length>1&&d.jsx("button",{type:"button",className:"btn btn-sm btn-outline btn-error",onClick:()=>{const ye=We.filter((Je,Me)=>Me!==ue);Xe(ye)},children:d.jsx("i",{className:"fas fa-times"})})]},ue))}),d.jsx("p",{className:"text-xs text-xmas-mute mt-2",children:`Add alternative answers that should be accepted (e.g., "Christmas Vacation" for "National Lampoon's Christmas Vacation")`})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Options"})}),w.map((Q,ue)=>d.jsxs("div",{className:"flex items-center mb-2",children:[d.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-xmas-card border border-base-300 rounded-full mr-2",children:String.fromCharCode(65+ue)}),d.jsx("input",{type:"text",className:"input input-bordered flex-1",value:Q,onChange:ye=>nr(ue,ye.target.value),placeholder:`Option ${String.fromCharCode(65+ue)}`,required:!ae})]},ue))]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Correct Answer"})}),d.jsx("select",{className:"select select-bordered w-full",value:j,onChange:Q=>U(Number(Q.target.value)),required:!ae,children:w.map((Q,ue)=>d.jsx("option",{value:ue,children:String.fromCharCode(65+ue)},ue))})]})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Main Image (Optional)"})}),d.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:Q=>gn(Q,"main")}),Ce&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:Ce,alt:"Main Preview",className:"h-32 object-contain rounded"})})]}),(i==null?void 0:i.type)===nt.PICTURE&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Blanked Image (Shown during question)"})}),d.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:Q=>gn(Q,"blanked")}),re&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:re,alt:"Blanked Preview",className:"h-32 object-contain rounded"})})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Normal Image (Shown with answers)"})}),d.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:Q=>gn(Q,"normal")}),B&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:B,alt:"Normal Preview",className:"h-32 object-contain rounded"})})]}),d.jsxs("div",{className:"form-control mb-4",children:[d.jsx("label",{className:"label",children:d.jsx("span",{className:"label-text",children:"Cover Image (Shown before next round)"})}),d.jsx("input",{type:"file",className:"file-input file-input-bordered w-full",accept:"image/*",onChange:Q=>gn(Q,"cover")}),se&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:se,alt:"Cover Preview",className:"h-32 object-contain rounded"})})]})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>{E(!1),qe()},children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Fn,children:Fn?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),S?"Updating...":"Adding..."]}):S?"Update Question":"Add Question"})]})]})]})})})]}):d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsxs("div",{className:"bg-error bg-opacity-10 p-6 rounded-lg",children:[d.jsx("h2",{className:"text-2xl font-christmas text-error mb-4",children:"Round Not Found"}),d.jsx("p",{className:"mb-4",children:"The round you're looking for doesn't exist or has been deleted."}),d.jsx(rn,{to:"/admin/rounds",className:"btn btn-primary",children:"Back to Rounds"})]})})},vj=LA([{element:d.jsx(rj,{}),children:[{path:"/",element:d.jsx(sj,{})},{path:"/quiz",element:d.jsx(uj,{})},{path:"/admin/login",element:d.jsx(cj,{})},{path:"/admin",element:d.jsx(dj,{})},{path:"/admin/results",element:d.jsx(hj,{})},{path:"/admin/rounds",element:d.jsx(fj,{})},{path:"/admin/questions/:roundId",element:d.jsx(yj,{})}]}]);fh.createRoot(document.getElementById("root")).render(d.jsx(R_.StrictMode,{children:d.jsx(HA,{router:vj})}));
